<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/workflows/liquibase-community/migrate-with-sql.html" />
		<meta name="description" content="This page explains how to use SQL to migrate your database." />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <h1 id="your-first-migration-with-sql">Migrating with SQL</h1>
        <div align="center"><iframe width="560" height="315" src="https://www.youtube.com/embed/HdXcf9E8ZVI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
        </div>
        <p>This page describes how to update your database using a formatted SQL&#160;<MadCap:variable name="General.changelog" />. When you use a SQL <MadCap:variable name="General.changelog" /> with <MadCap:variable name="General.Liquibase" />, schema changes are written using SQL statements that create, modify, or drop database objects. Data changes are written using SQL statements that insert, update, or delete data in the database.</p>
        <h2 id="prerequisites">Prerequisites</h2>
        <p>Before performing any of these steps, you must be able to connect to a local or remote database, accessible via command line or IDE/GUI.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">For more information on which databases <MadCap:variable name="General.Liquibase" /> supports or information on running each database with <MadCap:variable name="General.Liquibase" />, see <a href="https://www.liquibase.org/get-started/databases">Supported Databases</a>.</p>
        <h2 id="step-1-create-a-formatted-sql-changelog">Step 1: Create a formatted SQL <MadCap:variable name="General.changelog" /></h2>
        <p>To complete your first migration, create a formatted SQL <MadCap:variable name="General.changelog" /> in your <MadCap:variable name="General.Liquibase" /> project directory so <MadCap:variable name="General.Liquibase" /> can track, version, and deploy changes to your database.</p>
        <p class="tip" MadCap:autonum="&lt;b&gt;Tip: &lt;/b&gt;">Formatted SQL <MadCap:variable name="General.changelog" />s generated by <MadCap:variable name="General.Liquibase" /> versions prior to 4.2 might cause issues because of the lack of space after a double dash ( <code>--</code> ). To fix those issues, add a space after the double dash. For example: <code>--liquibase formatted sql</code> instead of <code>--liquibase formatted sql</code> and <code>--changeset myname:create-table</code> instead of <code>--changeset myname:create-table</code>.</p>
        <p><strong><u>To create your <MadCap:variable name="General.changelog" /></u></strong>:</p>
        <ol>
            <li>Create a file in your <MadCap:variable name="General.Liquibase" /> project directory called <code class="highlighter-rouge">changelog.sql</code>.</li>
            <li>Enter the following information into the <code class="highlighter-rouge">changelog.sql</code> file for this example:</li><pre xml:space="preserve"><code class="language-sql" data-lang="sql">--liquibase formatted sql</code></pre>
        </ol>
        <h2 id="step-2-add-a-changeset">Step 2: Add a <MadCap:variable name="General.changeset" /></h2>
        <p><MadCap:variable name="General.changeset" />s are units of change that <MadCap:variable name="General.Liquibase" /> can execute on a database. When adding a <MadCap:variable name="General.changeset" />, your change must be defined by both an <code class="highlighter-rouge">id</code> <MadCap:variable name="General.Param/Attribute" /> and an <code class="highlighter-rouge">author</code> <MadCap:variable name="General.Param/Attribute" />. It is best practice to only include one change in each <MadCap:variable name="General.changeset" />.</p>
        <p><strong><u>To add your <MadCap:variable name="General.changeset" /></u></strong>:</p>
        <ol>
            <li>Locate and open the <code class="highlighter-rouge">changelog.sql</code> file.</li>
            <li>Enter the following information into the <code class="highlighter-rouge">changelog.sql</code> file for this example, then save it.</li><pre><code class="language-sql" data-lang="sql">--liquibase formatted sql 
--changeset bob:1 
create table test1 (  
id int primary key, 
name varchar(255)
);</code></pre>
        </ol>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">For more information about SQL syntax, see <MadCap:xref href="../../concepts/changelogs/sql-format.html">Example Changelogs: SQL Format</MadCap:xref>.</p>
        <h2 id="step-3-deploy-your-changelog">Step 3: Deploy your <MadCap:variable name="General.changelog" /></h2>
        <p>To deploy the <MadCap:variable name="General.changelog" /> and your new <MadCap:variable name="General.changeset" />, run the <code class="highlighter-rouge">update</code> command. When running this command, <MadCap:variable name="General.Liquibase" /> reads your list of <MadCap:variable name="General.changeset" />s in order and checks the <MadCap:variable name="General.databasechangelog" /> table for anything that was previously run. Any <MadCap:variable name="General.changeset" />s that have <em>not</em> already been applied to the database will get applied, and <MadCap:variable name="General.Liquibase" /> will track that information.</p>
        <p><strong><u>To apply the <MadCap:variable name="General.changeset" /></u></strong>:</p>
        <ol>
            <li>Open your command prompt or terminal.</li>
            <li>Run the following command: <code class="highlighter-rouge">liquibase update --changelog-file=changelog.sql</code></li>
        </ol>
        <p>Now, your database contains a table called <code>test1</code>.</p>
        <h2 id="step-4-check-your-database">Step 4: Check your database</h2>
        <p>To check your database, open your database IDE to find the change that you made.</p>
        <p>Also, you can see  two tables that were created along with <code>test1</code>:</p>
        <ul>
            <li><MadCap:variable name="General.databasechangelog" />
            </li>
            <li><MadCap:variable name="General.databasechangeloglock" />
            </li>
        </ul>
        <p>The <MadCap:variable name="General.databasechangelog" /> table contains a list of all the changes that 
have been run against the database. The <MadCap:variable name="General.databasechangeloglock" /> table is used to ensure  only one instance of <MadCap:variable name="General.Liquibase" /> is running at one time.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">For more information, see <MadCap:xref href="../../concepts/tracking-tables/databasechangelog-table.html">[%=General.databasechangelog%] table</MadCap:xref> and <MadCap:xref href="../../concepts/tracking-tables/databasechangeloglock-table.html">[%=General.databasechangeloglock%] table</MadCap:xref>.</p>
        <h2>Additional information</h2>
        <p>You can use this topic when you only have a handful of SQL scripts. However, if your list of scripts becomes too large to maintain in a formatted SQL <MadCap:variable name="General.changelog" />, you may want to break up your scripts into smaller and more manageable chunks. If you want to perform migrations with multiple SQL files, refer to the <MadCap:xref href="multiple-sql-migration.html">Database migrations with multiple SQL files</MadCap:xref> topic. You can also learn about migrations with <MadCap:variable name="General.changetypes" />s by going to the <MadCap:xref href="migrate-with-changetypes.html">Migrating with [%=General.Liquibase%] [%=General.changetypes%]s</MadCap:xref> topics.</p>
        <h2>Related links</h2>
        <ul>
            <li>
                <MadCap:xref href="../../concepts/changelogs/home.html">Changelog</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../../concepts/changelogs/changeset.html">Changeset</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../../concepts/connections/creating-config-properties.html">Create and Configure a [%=General.liquiPropFile%] File</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../../commands/update/update.html">update</MadCap:xref><![CDATA[           ]]></li>
        </ul>
    </body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <h1>Troubleshoot running raw SQL using SQLPlus</h1>
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/images/icon-pro-top.flsnp" />
        <p>Issues sometimes arise when running raw SQL with SQLPlus. This is caused by  SQLPlus behavior that occurs when a SQL script is configured incorrectly. Learn how to troubleshoot this issue in the two examples below. Learn more about the <a href="https://docs.oracle.com/en/database/oracle/oracle-database/21/sqpug/SQL-Plus-quick-start.html#GUID-BF1995BD-EF9B-4EA2-9B32-7BFACDEB79DA">rules for SQLPlus on Oracle’s documentation here</a>.</p>
        <h2>Case 1:  <MadCap:variable name="General.Liquibase" /> <code>update</code> hangs when deploying a raw SQL script using SQLPlus.</h2>
        <h3>Troubleshoot by:</h3>
        <p>Verify the SQL script has a closing /. This character indicates to SQLPlus that the PLSQL block is complete and is ready to be committed to the database. If you do not have a closing /, <MadCap:variable name="General.Liquibase" /> will hang until the value in <code>liquibase.sqlplus.timeout</code> is reached.<br /></p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">Learn more here: <MadCap:xref href="use-sql-plus-integration.htm">Use SQL Plus and runWith on Oracle</MadCap:xref></p>
        <p>Verify the SQL Plus timeout configured for <MadCap:variable name="General.Liquibase" /> is long enough for your Oracle environment. The default is 10 seconds. In larger environments or when many rows are impacted during update, 10 seconds for a response may not be long enough. You can provide a custom setting for <MadCap:variable name="General.Liquibase" /> SQLPlus timeout property <code>liquibase.sqlplus.timeout</code>.</p>
        <h2>Case 2: <MadCap:variable name="General.Liquibase" /> update fails with “object already exists” during a SQLPlus execution of a raw SQL script.</h2>
        <h3>Troubleshoot by:</h3>
        <p>Verify the SQL script is not duplicating logic  to create an object that already exists on the database. Depending on your version of Oracle and the object impacted, create or replace syntax can be provided to overcome an “object already exists” error.</p>
        <p>Verify the SQL script does not include a / after non-PL/SQL blocks. SQLPlus does not support use of the / with non-PL/SQL blocks. For example, a SQL script containing a CREATE TABLE and a CREATE TRIGGER should not include the / character at the end of the create table SQL because “CREATE TABLE” is not PL/SQL. Including / after CREATE TABLE causes <MadCap:variable name="General.Liquibase" /> to exit with “object already exists.”</p>
    </body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/concepts/changelogs/preconditions.html" />
        <meta name="description" content="Reference information for using Preconditions in Liquibase. Preconditions control the execution of an update based on the state of the database and can be attached to a changelog or changeset." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <h1 id="preconditions">Preconditions</h1>
        <p>Preconditions are tags you add to your <MadCap:variable name="General.changelog" /> or individual <MadCap:variable name="General.changeset" />s to control the execution of an update based on the state of the database. Preconditions let you specify security and standardization requirements for your <MadCap:variable name="General.changeset" />s. If a precondition on a <MadCap:variable name="General.changeset" /> fails, <MadCap:variable name="General.Liquibase" /> does not deploy that <MadCap:variable name="General.changeset" />.</p>
        <h2>Uses</h2>
        <p>You can use preconditions to:</p>
        <ul>
            <li>Document what assumptions the author of the <MadCap:variable name="General.changelog" /> had when creating it.</li>
            <li>Enforce that those assumptions are not violated by users running the <MadCap:variable name="General.changelog" />.</li>
            <li>Perform data checks before performing an unrecoverable change such as <MadCap:xref href="../../change-types/drop-table.html">dropTable</MadCap:xref>.</li>
            <li>Control what <MadCap:variable name="General.changeset" />s are run and not run based on the state of the database.</li>
        </ul>
        <p>You can use all <MadCap:variable name="General.Liquibase" /> preconditions in XML, YAML, and JSON&#160;<MadCap:variable name="General.changelog" />s. Only some preconditions are supported in SQL <MadCap:variable name="General.changelog" />s. For a list of preconditions, see <MadCap:xref href="#available-preconditions">Available preconditions</MadCap:xref>.</p>
        <h2>Syntax</h2>
        <p>You can use one <b>local</b>&#160;<code>&lt;preConditions&gt;</code> tag per <MadCap:variable name="General.changeset" /> and one <b>global</b>&#160;<code>&lt;preConditions&gt;</code> tag in the <MadCap:variable name="General.changelog" /> (outside any <MadCap:variable name="General.changeset" />). In XML, YAML, and JSON <MadCap:variable name="General.changelog" />s, you can use conditional logic to add multiple preconditions within a single <code>&lt;preConditions&gt;</code> tag.</p>
        <p>Preconditions at the <MadCap:variable name="General.changelog" /> level are applied to all <MadCap:variable name="General.changeset" />s, not just those listed in the current <MadCap:variable name="General.changelog" /> or its child <MadCap:variable name="General.changelog" />s.</p>
        <p>The following example XML, YAML, and JSON <MadCap:variable name="General.changelog" />s will only be run if the database executed against is Oracle and the database user executing the script is <code>SYSTEM</code>. Also, they will run the <MadCap:variable name="General.changeset" /> with the <code>sqlCheck</code> precondition and <MadCap:xref href="../../change-types/create-table.html">createTable</MadCap:xref>. The example SQL <MadCap:variable name="General.changelog" /> only runs the <code>sqlCheck</code> precondition and <code>createTable</code>.</p>
        <p>If the preconditions check fails, you will receive a warning and it will continue executing the <MadCap:variable name="General.changeset" /> as normal because of the <code>onFail="WARN"</code> precondition. To prevent the execution of the <MadCap:variable name="General.changeset" /> when the precondition fails, you can set <code>HALT</code> or <code>CONTINUE</code> values. For more information, see <MadCap:xref href="#onFail/onError">onFail/onError values</MadCap:xref>.</p>
        <h2>Example <MadCap:variable name="General.changelog" />s with preconditions</h2>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h3">
                <li class="js-tablist__item"><a href="#xml_example_main" id="label_xml_example_main" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_main" id="label_yaml_example_main" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_main" id="label_json_example_main" class="js-tablist__link">JSON example</a>
                </li>
                <li class="js-tablist__item"><a href="#sql_example_main" id="label_sql_example_main" class="js-tablist__link">SQL example</a>
                </li>
            </ul>
            <div id="xml_example_main" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;?xml version="1.1" encoding="UTF-8" standalone="no"?&gt;
<MadCap:snippetText src="../../Z_Resources/Snippets/code/liquibase-xsd-xml-changelog-closed.flsnp" />

    &lt;preConditions&gt;
        &lt;dbms  type="oracle"  /&gt;
        &lt;runningAs  username="SYSTEM"  /&gt;
    &lt;/preConditions&gt;

    &lt;changeSet  id="1"  author="Liquibase User"&gt;
        &lt;preConditions  onFail="WARN"&gt;
            &lt;sqlCheck  expectedResult="0"&gt;SELECT COUNT(*) FROM example_table&lt;/sqlCheck&gt;
        &lt;/preConditions&gt;
        &lt;comment&gt;Comments should go after the precondition. Otherwise, Liquibase returns an error.&lt;/comment&gt;

        &lt;createTable  tableName="example_table"&gt;
            &lt;column name="id" type="int" autoIncrement="true"&gt;
                &lt;constraints primaryKey="true" nullable="false"&gt;
            &lt;/column&gt;
            &lt;column name="firstname" type="varchar(50)"&gt;
            &lt;column name="lastname" type="varchar(50)"&gt;
                &lt;constraints nullable="false"&gt;
            &lt;/column&gt;
            &lt;column name="state" type="char(2)"&gt;
        &lt;/createTable&gt;
    &lt;/changeSet&gt;
&lt;/databaseChangeLog&gt;</code></pre>
            </div>
            <div id="yaml_example_main" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">databaseChangeLog:
 - preConditions:
     - dbms:
        type: oracle
     - runningAs:
        username: SYSTEM
 - changeSet:
     id:  1
     author: Liquibase User
     preConditions:
       - onFail: WARN
       - sqlCheck:
          expectedResult: 0
          sql: SELECT COUNT(*) FROM example_table
     comment: Comments should go after the precondition. Otherwise, Liquibase returns an error.
     changes:
     - createTable:
         tableName: example_table
         columns:
          - column:
             name: id
             type: int
             autoIncrement: true
             constraints:
              primaryKey: true
              nullable: false
          - column:
             name:  firstname
	         type:  varchar(50)
          - column:
             name:  lastname
             type:  varchar(50)
             constraints:
              nullable:  false
          - column:
             name:  state
             type:  char(2)</code></pre>
            </div>
            <div id="json_example_main" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "databaseChangeLog": [
    {
      "preConditions": [
        {
          "dmbs": {
            "type": "oracle"
          }
        },
        {
          "runningAs": {
            "username": "SYSTEM"
          }
        }
      ],
      "changeSet": {
        "id": "1",
        "author": "Liquibase User",
        "preConditions": [
          {
            "onFail": "WARN"
          },
          {
            "sqlCheck": {
              "expectedResult": 0,
              "sql": "SELECT COUNT(*) FROM example_table"
            }
          }
        ],
        "comment": "Comments should go after the precondition. Otherwise, Liquibase returns an error.",
        "changes": [
          {
            "createTable": {
              "tableName": "example_table",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "int",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "firstname",
                    "type": "varchar(50)"
                  }
                },
                {
                  "column": {
                    "name": "lastname",
                    "type": "varchar(50)",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "state",
                    "type": "char(2)"
                  }
                }
              ]
            }
          }
        ]
      }
    }
  ]
}</code></pre>
            </div>
            <div id="sql_example_main" class="js-tabcontent"><pre xml:space="preserve"><code class="language-sql">--liquibase formatted sql
			
--changeset Liquibase User:1
--preconditions onFail:WARN 
--precondition-sql-check expectedResult:0 SELECT COUNT(*) FROM example_table
--comment: /* Comments should go after the precondition. Otherwise, Liquibase returns an error. */
create table example_table (  
	id int primary key,
	firstname varchar(50),
	lastname varchar(50) not null,
	state char(2)
)</code></pre>
            </div>
        </div>
        <h3>Multiple preconditions</h3>
        <p> In XML, JSON, and YAML <MadCap:variable name="General.changelog" />s, you can set multiple preconditions in one <code>&lt;preConditions&gt;</code> tag by using nestable <code>AND</code>, <code>OR</code>, and <code>NOT</code> conditional logic tags. If no conditional tags are specified, the default value is <code>AND</code>.</p>
        <p><MadCap:variable name="General.Liquibase" /> uses lazy evaluation (call-by-need) when running preconditions. For example, if the first condition of an <code>AND</code> expression fails, <MadCap:variable name="General.Liquibase" /> does not evaluate the second condition. If the first condition of an <code>OR</code> expression succeeds, <MadCap:variable name="General.Liquibase" /> does not evaluate the second condition.</p>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h3">
                <li class="js-tablist__item"><a href="#xml_example_multiple" id="label_xml_example_multiple" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_multiple" id="label_yaml_example_multiple" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_multiple" id="label_json_example_multiple" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_multiple" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions&gt;
    &lt;or&gt;
        &lt;CONDITION_1&gt;
        &lt;CONDITION_2&gt;
    &lt;/or&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_multiple" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - or:
        - CONDITION_1
        - CONDITION_2</code></pre>
            </div>
            <div id="json_example_multiple" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "or": [
        {
          {CONDITION_1}
        },
        {
          {CONDITION_2}
        }
      ]
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3>Examples</h3>
        <p>The following syntax example will check that the update is running on Oracle and with the <code>SYSTEM</code> user but will only generate a warning message if the precondition fails:</p><pre xml:space="preserve"><code class="language-xml">&lt;preConditions  onFail="WARN"&gt;
    &lt;dbms  type="oracle"  /&gt;
    &lt;runningAs  username="SYSTEM"  /&gt;
&lt;/preConditions&gt;</code></pre>
        <p>The following will require running the <MadCap:variable name="General.changelog" /> on Oracle or MySQL:</p><pre xml:space="preserve"><code class="language-xml">&lt;preConditions&gt;
   &lt;or&gt;
      &lt;dbms  type="oracle"  /&gt;
      &lt;dbms  type="mysql"  /&gt;
   &lt;/or&gt;
&lt;/preConditions&gt;</code></pre>
        <p>You can also see the precondition running as <code>SYSTEM</code> if executing against an Oracle database or running as SA if executing against a MS SQL database.</p><pre xml:space="preserve"><code class="language-xml">&lt;preConditions&gt;
    &lt;or&gt;
       &lt;and&gt;
          &lt;dbms  type="oracle"  /&gt;  
          &lt;runningAs  username="SYSTEM"  /&gt;
       &lt;/and&gt;
       &lt;and&gt;
          &lt;dbms  type="mssql"  /&gt;
          &lt;runningAs  username="sa"  /&gt;
       &lt;/and&gt;
     &lt;/or&gt;
&lt;/preConditions&gt;</code></pre>
        <h2 id="handling-failures-and-errors">Handling failures and errors</h2>
        <p><MadCap:variable name="General.Liquibase" /> defines two types of preconditions:</p>
        <ul>
            <li>Precondition <b>failures</b> which represent that the check failed</li>
            <li>Precondition <b>errors</b> that are the exceptions thrown in the execution of a check</li>
        </ul>
        <p>The process of both can be controlled through the <code>onFail</code> and <code>onError</code> <MadCap:variable name="General.Param/Attribute" />s on the <code>&lt;preConditions&gt;</code> tag.</p>
        <h3 id="available-attributes">Available <MadCap:variable name="General.Param/Attribute" />s</h3>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>onError</code>
                    </td>
                    <td>Controls what happens if there is an error checking whether the precondition passed or not.</td>
                </tr>
                <tr>
                    <td><code>onErrorMessage</code>
                    </td>
                    <td>Provides a custom message to output when preconditions fail. <b>Since 2.0</b></td>
                </tr>
                <tr>
                    <td><code>onFail</code>
                    </td>
                    <td>Controls what happens if the preconditions check fails.</td>
                </tr>
                <tr>
                    <td><code>onFailMessage</code>
                    </td>
                    <td>Provides a custom message to output when preconditions fail. <b>Since 2.0</b></td>
                </tr>
                <tr>
                    <td><code>onSqlOutput</code>
                    </td>
                    <td>Controls how preconditions are evaluated with the <code>update-sql</code> command for XML, YAML, and JSON <MadCap:variable name="General.changelog" />s. <b>Since 1.9.5</b></td>
                </tr>
                <tr>
                    <td><code>onUpdateSql</code>
                    </td>
                    <td>Controls how preconditions are evaluated with the <code>update-sql</code> command for formatted SQL&#160;<MadCap:variable name="General.changelog" />s.</td>
                </tr>
            </tbody>
        </table>
        <h3><a name="onFail/onError"></a><code>onFail</code>/<code>onError</code> precondition values</h3>
        <MadCap:snippetBlock src="../../Resources/Snippets/NewSnippet.flsnp" />
        <h3 id="possible-onsqloutput-values"><code>onSqlOutput</code>/<code>onUpdateSql</code> values</h3>
        <MadCap:snippetBlock src="../../Resources/Snippets/onSqlOutput onUpdateSql values.flsnp" />
        <p>Failures and errors will cause <MadCap:variable name="General.Liquibase" /> to return non-zero exit codes in command output. Warnings will cause <MadCap:variable name="General.Liquibase" /> to return exit codes of zero.</p>
        <h3>Example failures/errors</h3>
        <p>The following is a sample failure on a <MadCap:variable name="General.changelog" />:</p><pre xml:space="preserve"><code class="language-text">Unexpected error running Liquibase: Validation Failed:
1 preconditions failed
myChangelog.xml : DBMS Precondition failed: expected oracle, got postgresql</code></pre>
        <p>The following is a sample error on a <MadCap:variable name="General.changelog" />:</p><pre xml:space="preserve"><code class="language-text">Unexpected error running Liquibase: Validation Failed:
1 preconditions generated an error
myChangelog.xml : liquibase.precondition.core.SqlPrecondition@5745ca0e : ERROR: relation "public.table_does_not_exist" does not exist</code></pre>
        <p>The following is a sample warning on a <MadCap:variable name="General.changeset" />:</p><pre xml:space="preserve"><code class="language-text">WARNING: Executing myChangelog.xml::01-new::wonder.woman despite precondition failure due to onFail='WARN':
1 preconditions failed
myChangelog.xml : Column public.customer.name_new does not exist</code></pre>
        <h2 id="available-preconditions"><a name="available-preconditions"></a>Available preconditions</h2>
        <p>The examples of preconditions shown in the table doesn't include the <code>schemaName</code> <MadCap:variable name="General.Param/Attribute" />. It is best practice not to keep the <code>schemaName</code> in the <MadCap:variable name="General.changeset" /> and rely on the default schema except for times you don't want to create something in the default schema.</p>
        <p>Additionally, you can include the <code>onError</code> or <code>onFail</code> <MadCap:variable name="General.Param/Attribute" />s with the <code>WARN</code>, <code>HALT</code>, <code>CONTINUE</code>, or <code>MARK_RAN</code> value in the preconditions tag, however, the <code>CONTINUE</code> and <code>MARK_RAN</code> options can only be applied to preconditions inside a <MadCap:variable name="General.changeset" />.</p>
        <h3><code>changeLogPropertyDefined</code>
        </h3>
        <p>Checks whether given <MadCap:variable name="General.changelog" /><MadCap:variable name="General.Param/Attribute" /> is present. It fails if the value is not the same as given.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>property</code>
                    </td>
                    <td>
                        <p>The name of the property to check.</p>
                    </td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>value</code>
                    </td>
                    <td>The required value for a given property.</td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_changeLogPropertyDefined" id="label_xml_example_changeLogPropertyDefined" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_changeLogPropertyDefined" id="label_yaml_example_changeLogPropertyDefined" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_changeLogPropertyDefined" id="label_json_example_changeLogPropertyDefined" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_changeLogPropertyDefined" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;changeLogPropertyDefined property="myproperty"
                              value="requiredvalue"/&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_changeLogPropertyDefined" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - changeLogPropertyDefined:
       property: myproperty
       value: requiredvalue</code></pre>
            </div>
            <div id="json_example_changeLogPropertyDefined" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "changeLogPropertyDefined": {
        "property": "myproperty",
        "value": "requiredvalue"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>changeSetExecuted</code>
        </h3>
        <p>Defines if the specified <MadCap:variable name="General.changeset" /> has already been executed.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>id</code>
                    </td>
                    <td>The <MadCap:variable name="General.changeset" /> id.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>author</code>
                    </td>
                    <td>The <MadCap:variable name="General.changeset" /> author.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>changeLogFile</code>
                    </td>
                    <td>The file name (including searchPath relative path) of the <MadCap:variable name="General.changeset" />.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_changeSetExecuted" id="label_xml_example_changeSetExecuted" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_changeSetExecuted" id="label_yaml_example_changeSetExecuted" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_changeSetExecuted" id="label_json_example_changeSetExecuted" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_changeSetExecuted" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="HALT"&gt;
    &lt;changeSetExecuted id="1"
                          author="liquibase"
                          changeLogFile="changelog.xml" /&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_changeSetExecuted" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: HALT
    - changeSetExecuted:
       id: 1
       author: liquibase
       changeLogFile: changelog.xml</code></pre>
            </div>
            <div id="json_example_changeSetExecuted" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "HALT"
    },
    {
      "changeSetExecuted": {
        "id": "1",
        "author": "liquibase",
        "changeLogFile": "changelog.xml"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>columnExists</code>
        </h3>
        <p>Defines if the specified column exists in the database.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>columnName</code>
                    </td>
                    <td> The name of the column.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>tableName</code>
                    </td>
                    <td>The name of the column's table.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>schemaName</code>
                    </td>
                    <td>The name of the table's schema.</td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_columnExists" id="label_xml_example_columnExists" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_columnExists" id="label_yaml_example_columnExists" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_columnExists" id="label_json_example_columnExists" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_columnExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;columnExists tableName="table1"
                  columnName="column1" /&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_columnExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - columnExists:
       tableName: table1
       columnName: column1</code></pre>
            </div>
            <div id="json_example_columnExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "columnExists": {
        "tableName": "table1",
        "columnName": "column1"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>dbms</code>
        </h3>
        <p>Defines if the database executed against matches the type specified.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>type</code>
                    </td>
                    <td>
                        <p>The type of database expected. Multiple dbms values can be specified using comma-separated values.</p>
                    </td>
                    <td><b>Required</b>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_dbms" id="label_xml_example_dbms" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_dbms" id="label_yaml_example_dbms" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_dbms" id="label_json_example_dbms" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_dbms" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
  &lt;or&gt;
    &lt;dbms  type="oracle"  /&gt;
    &lt;dbms  type="mysql"  /&gt;
  &lt;/or&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_dbms" class="js-tabcontent"><pre style="white-space:pre-wrap;"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - or:
       - dbms:
          type: oracle
       - dbms:
          type: mysql</code></pre>
            </div>
            <div id="json_example_dbms" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "or": [
        {
          "dbms": {
            "type": "oracle"
          }
        },
        {
          "dbms": {
            "type": "mysql"
          }
        }
      ]
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>expectedQuotingStrategy</code>
        </h3>
        <p>Controls how object names are quoted in the SQL files generated by <MadCap:variable name="General.Liquibase" /> and used in calls to the database. For more information, see <code><MadCap:xref href="attributes/objectquotingstrategy.htm">objectQuotingStrategy</MadCap:xref></code>.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>strategy</code>
                    </td>
                    <td>The object quoting strategy. Valid values are <code>LEGACY</code>, <code>QUOTE_ALL_OBJECTS</code>, and <code>QUOTE_ONLY_RESERVED_WORDS</code>.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_expectedQuotingStrategy" id="label_xml_example_expectedQuotingStrategy" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_expectedQuotingStrategy" id="label_yaml_example_expectedQuotingStrategy" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_expectedQuotingStrategy" id="label_json_example_expectedQuotingStrategy" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_expectedQuotingStrategy" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;expectedQuotingStrategy strategy="LEGACY" /&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_expectedQuotingStrategy" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - expectedQuotingStrategy:
       strategy: LEGACY</code></pre>
            </div>
            <div id="json_example_expectedQuotingStrategy" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "expectedQuotingStrategy": {
        "strategy": "LEGACY"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>foreignKeyConstraintExists</code>
        </h3>
        <p>Defines if the specified foreign key exists in a table in the database.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>foreignKeyName</code>
                    </td>
                    <td>The name of the foreign key.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>foreignKeyTableName</code>
                    </td>
                    <td>The name of the table the foreign key is in.</td>
                    <td><b>Required</b> in 4.7.0+</td>
                </tr>
                <tr>
                    <td><code>schemaName</code>
                    </td>
                    <td>The name of the foreign key's schema.</td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_foreignKeyConstraintExists" id="label_xml_example_foreignKeyConstraintExists" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_foreignKeyConstraintExists" id="label_yaml_example_foreignKeyConstraintExists" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_foreignKeyConstraintExists" id="label_json_example_foreignKeyConstraintExists" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_foreignKeyConstraintExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;foreignKeyConstraintExists foreignKeyName="PK_2354"
                                foreignKeyTableName="myTable" /&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_foreignKeyConstraintExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - foreignKeyConstraintExists:
       foreignKeyName: PK_2354
       foreignKeyTableName: myTable</code></pre>
            </div>
            <div id="json_example_foreignKeyConstraintExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "foreignKeyConstraintExists": {
        "foreignKeyName": "PK_2354",
        "foreignKeyTableName": "myTable"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>indexExists</code>
        </h3>
        <p>Defines if the specified index exists in the database. You can either specify the <code>indexName</code>&#160;<MadCap:variable name="General.Param/Attribute" /> or <code>tableName</code> and <code>columnNames</code>&#160;<MadCap:variable name="General.Param/Attribute" />s.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">There are a few databases where the <code>indexName</code> is not unique, which is why both <code>indexName</code> and <code>tableName</code> can be used.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>indexName</code>
                    </td>
                    <td>The name of the index.</td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>columnNames</code>
                    </td>
                    <td>The name of the column.</td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>tableName</code>
                    </td>
                    <td> The name of the table.</td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>schemaName</code>
                    </td>
                    <td>The name of the index's schema.</td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_indexExists" id="label_xml_example_indexExists" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_indexExists" id="label_yaml_example_indexExists" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_indexExists" id="label_json_example_indexExists" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_indexExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;indexExists indexName="originindex"/&gt;
&lt;/preConditions&gt;</code></pre><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;indexExists tableName="MY_NEW_TABLE"
                 columnNames="ID"/&gt;
&lt;/preConditions&gt;</code></pre><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;indexExists indexName="originindex"
                 tableName="MY_NEW_TABLE"/&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_indexExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - indexExists:
       indexName: originindex</code></pre><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - indexExists:
       tableName: MY_NEW_TABLE
       columnNames: ID</code></pre><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - indexExists:
       indexName: originindex
       tableName: MY_NEW_TABLE</code></pre>
            </div>
            <div id="json_example_indexExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "indexExists": {
        "indexName": "originindex"
      }
    }
  ]
}</code></pre><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "indexExists": {
        "tableName": "MY_NEW_TABLE",
        "columnNames": "ID"
      }
    }
  ]
}</code></pre><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "indexExists": {
        "indexName": "originindex",
        "tableName": "MY_NEW_TABLE"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>primaryKeyExists</code>
        </h3>
        <p>Defines if the specified primary key exists in the database.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>primaryKeyName</code>
                    </td>
                    <td>The name of the primary key constraint.</td>
                    <td>Either <code>tableName</code> or <code>primaryKeyName</code> is <b>required</b></td>
                </tr>
                <tr>
                    <td><code>tableName</code>
                    </td>
                    <td>The name of the table containing primary key.</td>
                    <td>Either <code>tableName</code> or <code>primaryKeyName</code> is <b>required</b><p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">On DB2, H2, HSQLDB, MySQL, and SQLite, <code>tableName</code> is <b>required</b> even if you also specify <code>primaryKeyName</code>.</p></td>
                </tr>
                <tr>
                    <td><code>schemaName</code>
                    </td>
                    <td>The name of the primary key's schema.</td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_primaryKeyExists" id="label_xml_example_primaryKeyExists" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_primaryKeyExists" id="label_yaml_example_primaryKeyExists" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_primaryKeyExists" id="label_json_example_primaryKeyExists" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_primaryKeyExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="HALT"&gt;
    &lt;primaryKeyExists primaryKeyName="ID_2354"
                      tableName="table1" /&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_primaryKeyExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: HALT
    - primaryKeyExists:
       primaryKeyName: ID_2354
       tableName: table1</code></pre>
            </div>
            <div id="json_example_primaryKeyExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "HALT"
    },
    {
      "primaryKeyExists": {
        "primaryKeyName": "ID_2354",
        "tableName": "table1"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>rowCount</code>
        </h3>
        <p>Checks that the number of rows in a table matches an expected value.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>expectedRows</code>
                    </td>
                    <td>The number of rows the user expects in a table.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>tableName</code>
                    </td>
                    <td>The name of the column's table.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_rowCount" id="label_xml_example_rowCount" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_rowCount" id="label_yaml_example_rowCount" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_rowCount" id="label_json_example_rowCount" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_rowCount" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;rowCount expectedRows="5"
              tableName="person"/&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_rowCount" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - rowCount:
       expectedRows: 5
       tableName: person</code></pre>
            </div>
            <div id="json_example_rowCount" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "rowCount": {
        "expectedRows": "5",
        "tableName": "person"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>runningAs</code>
        </h3>
        <p>Defines if the database user executed under matches the username specified.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>username</code>
                    </td>
                    <td>The database user script which is expected to run as.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_runningAs" id="label_xml_example_runningAs" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_runningAs" id="label_yaml_example_runningAs" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_runningAs" id="label_json_example_runningAs" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_runningAs" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions  onFail="WARN"&gt;
    &lt;dbms  type="oracle"  /&gt;
    &lt;runningAs  username="SYSTEM"  /&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_runningAs" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - dbms:
       type: oracle
    - runningAs:
       username: SYSTEM</code></pre>
            </div>
            <div id="json_example_runningAs" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "dbms": {
        "type": "oracle"
      }
    },
    {
      "runningAs": {
        "username": "SYSTEM"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>sequenceExists</code>
        </h3>
        <p>Defines if the specified sequence exists in the database.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>sequenceName</code>
                    </td>
                    <td> The name of the sequence.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>schemaName</code>
                    </td>
                    <td>The name of the sequence's schema. </td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_sequenceExists" id="label_xml_example_sequenceExists" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_sequenceExists" id="label_yaml_example_sequenceExists" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_sequenceExists" id="label_json_example_sequenceExists" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_sequenceExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;sequenceExists sequenceName="idnumber" /&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_sequenceExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - sequenceExists:
       sequenceName: idnumber</code></pre>
            </div>
            <div id="json_example_sequenceExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "sequenceExists": {
        "sequenceName": "idnumber"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>sqlCheck</code>
        </h3>
        <p>Executes an SQL string and checks the returned value. The SQL must return a single row with a single value.</p>
        <ul>
            <li>To check a number of rows, use the <code>count</code> SQL function.</li>
            <li>To check for ranges of values, perform the check in the SQL and return a value that can be easily compared against.</li>
        </ul>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>expectedResult</code>
                    </td>
                    <td>The value to compare the SQL result to.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>sql</code>
                    </td>
                    <td>In JSON and YAML <MadCap:variable name="General.changelog" />s, the SQL statement to run. In XML <MadCap:variable name="General.changelog" />s, insert the SQL statement directly within the <code>&lt;sqlCheck&gt;&lt;/sqlCheck&gt;</code>&#160;tags. IN SQL <MadCap:variable name="General.changelog" />s, insert the SQL statement directly in the precondition header.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_sqlCheck" id="label_xml_example_sqlCheck" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_sqlCheck" id="label_yaml_example_sqlCheck" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_sqlCheck" id="label_json_example_sqlCheck" class="js-tablist__link">JSON example</a>
                </li>
                <li class="js-tablist__item"><a href="#sql_example_sqlCheck" id="label_sql_example_sqlCheck" class="js-tablist__link">SQL example</a>
                </li>
            </ul>
            <div id="xml_example_sqlCheck" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;sqlCheck expectedResult="1"&gt;
        SELECT COUNT(1)
        FROM pg_tables
        WHERE TABLENAME = 'myRequiredTable'
    &lt;/sqlCheck&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_sqlCheck" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - sqlCheck:
       expectedResult: 1
       sql: SELECT COUNT(1) FROM pg_tables WHERE TABLENAME = 'myRequiredTable'</code></pre>
            </div>
            <div id="json_example_sqlCheck" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "sqlCheck": {
        "expectedResult": "1",
        "sql": "SELECT COUNT(1) FROM pg_tables WHERE TABLENAME = 'myRequiredTable'"
      }
    }
  ]
}</code></pre>
            </div>
            <div id="sql_example_sqlCheck" class="js-tabcontent"><pre xml:space="preserve"><code class="language-sql">--changeset your.name:1
--preconditions onFail:WARN
--precondition-sql-check expectedResult:1 SELECT COUNT(1) FROM pg_tables WHERE TABLENAME = 'myRequiredTable'
create table example_table (
	id int primary key,
	firstname varchar(50),
	lastname varchar(50) not null,
	state char(2)
)</code></pre>
            </div>
        </div>
        <h3><code>tableExists</code>
        </h3>
        <p>Defines if the specified table exists in the database.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>tableName</code>
                    </td>
                    <td>  The name of the table.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>schemaName</code>
                    </td>
                    <td>The name of the table's schema. </td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_tableExists" id="label_xml_example_tableExists" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_tableExists" id="label_yaml_example_tableExists" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_tableExists" id="label_json_example_tableExists" class="js-tablist__link">JSON example</a>
                </li>
                <li class="js-tablist__item"><a href="#sql_example_tableExists" id="label_sql_example_tableExists" class="js-tablist__link">SQL example</a>
                </li>
            </ul>
            <div id="xml_example_tableExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;changeSet author="author" id="1"&gt;
   &lt;preConditions onFail="MARK_RAN"&gt;
       &lt;not&gt;
           &lt;tableExists tableName="MY_NEW_TABLE"/&gt;
       &lt;/not&gt; 
   &lt;/preConditions&gt;

   &lt;createTable tableName="MY_NEW_TABLE"&gt;
       &lt;column name="IDX"
               type="${integer.type}"&gt;
           &lt;constraints nullable="false"/&gt; 
       &lt;/column&gt;
       &lt;column name="INTVAL"
               type="${integer.type}"/&gt;
   &lt;/createTable&gt;
&lt;/changeSet&gt;</code></pre>
            </div>
            <div id="yaml_example_tableExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- changeSet:
    preConditions:
      - onFail: MARK_RAN
      - not:
          - tableExists:
             tableName: MY_NEW_TABLE
    changes:
      - createTable:
          tableName: MY_NEW_TABLE
          columns:
            - column:
               name: INTVAL
               type: ${integer.type}
               constraints:
                 nullable: false</code></pre>
            </div>
            <div id="json_example_tableExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "changeSet": {
    "preConditions": [
      {
        "onFail": "MARK_RAN"
      },
      {
        "not": [
          {
            "tableExists": {
              "tableName": "MY_NEW_TABLE"
            }
          }
        ]
      }
    ],
    "changes": [
      {
        "createTable": {
          "tableName": "MY_NEW_TABLE",
          "columns": [
            {
              "column": {
                "name": "INTVAL",
                "type": "${integer.type}",
                "constraints": {
                  "nullable": "false"
                }
              }
            }
          ]
        }
      }
    ]
  }
}</code></pre>
            </div>
            <div id="sql_example_tableExists" class="js-tabcontent">
                <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><code class="language-text">tableExists</code> is supported for SQL <MadCap:variable name="General.changelog" />s in <MadCap:variable name="General.Liquibase" /> 4.27.0 and later.</p><pre xml:space="preserve"><code class="language-sql">--changeset your.name:1
--preconditions onFail:MARK_RAN
--precondition-table-exists table:table1 schema:12345
create table table2 (
    id int primary key
);</code></pre>
            </div>
        </div>
        <h3><code>tableIsEmpty</code>
        </h3>
        <p>Checks whether the specified table is empty.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>tableName</code>
                    </td>
                    <td>The name of the table.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>catalogName</code>
                    </td>
                    <td>The name of the database catalog.</td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>schemaName</code>
                    </td>
                    <td>The name of the database schema.</td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_tableIsEmpty" id="label_xml_example_tableIsEmpty" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_tableIsEmpty" id="label_yaml_example_tableIsEmpty" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_tableIsEmpty" id="label_json_example_tableIsEmpty" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_tableIsEmpty" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;tableIsEmpty tableName="myTable"
                  catalogName="myCatalog"
                  schemaName="mySchema" /&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_tableIsEmpty" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - tableIsEmpty:
       tableName: myTable
       catalogName: myCatalog
       schemaName: mySchema</code></pre>
            </div>
            <div id="json_example_tableIsEmpty" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "tableIsEmpty": {
        "tableName": "myTable",
        "catalogName": "myCatalog",
        "schemaName": "mySchema"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>uniqueConstraintExists</code>
        </h3>
        <p>Checks for the existence of unique constraints before running the update. (since <MadCap:variable name="General.Liquibase" /> 4.9.0)</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>tableName</code>
                    </td>
                    <td>The name of the column's table.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>columnNames</code>
                    </td>
                    <td>The name of the column.</td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>constraintName</code>
                    </td>
                    <td>The name of the unique constraint.</td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_uniqueConstraintExists" id="label_xml_example_uniqueConstraintExists" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_uniqueConstraintExists" id="label_yaml_example_uniqueConstraintExists" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_uniqueConstraintExists" id="label_json_example_uniqueConstraintExists" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_uniqueConstraintExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;uniqueConstraintExists constraintName="uq_constraint_name"
                            tableName="test_table"/&gt;
&lt;/preConditions&gt;</code></pre><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;uniqueConstraintExists tableName="test_table"
                            columnNames="first_name, last_name"/&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_uniqueConstraintExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - uniqueConstraintExists:
       constraintName: uq_constraint_name
       tableName: test_table</code></pre><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: WARN
    - uniqueConstraintExists:
       tableName: test_table
       columnNames: first_name, last_name</code></pre>
            </div>
            <div id="json_example_uniqueConstraintExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "uniqueConstraintExists": {
        "constraintName": "uq_constraint_name",
        "tableName": "test_table"
      }
    }
  ]
}</code></pre><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "WARN"
    },
    {
      "uniqueConstraintExists": {
        "tableName": "test_table",
        "columnNames": "first_name, last_name"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
        <h3><code>viewExists</code>
        </h3>
        <p>Defines if the specified view exists in the database.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>viewName</code>
                    </td>
                    <td>The name of the view.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>schemaName</code>
                    </td>
                    <td>The name of the view's schema.</td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_viewExists" id="label_xml_example_viewExists" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_viewExists" id="label_yaml_example_viewExists" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_viewExists" id="label_json_example_viewExists" class="js-tablist__link">JSON example</a>
                </li>
                <li class="js-tablist__item"><a href="#sql_example_viewExists" id="label_sql_example_viewExists" class="js-tablist__link">SQL example</a>
                </li>
            </ul>
            <div id="xml_example_viewExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;preConditions onFail="HALT"&gt;
    &lt;viewExists viewName="liquibase" /&gt;
&lt;/preConditions&gt;</code></pre>
            </div>
            <div id="yaml_example_viewExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - onFail: HALT
    - viewExists:
       viewName: liquibase</code></pre>
            </div>
            <div id="json_example_viewExists" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "onFail": "HALT"
    },
    {
      "viewExists": {
        "viewName": "liquibase"
      }
    }
  ]
}</code></pre>
            </div>
            <div id="sql_example_viewExists" class="js-tabcontent">
                <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><code class="language-text">viewExists</code> is supported for SQL <MadCap:variable name="General.changelog" />s in <MadCap:variable name="General.Liquibase" /> 4.27.0 and later.</p><pre xml:space="preserve"><code class="language-json">--changeset your.name:1
--preconditions onFail:MARK_RAN
--precondition-view-exists view:view1 schema:12345
create table table1 (
    id int primary key
);</code></pre>
            </div>
        </div>
        <h3><code>customPrecondition</code>
        </h3>
        <p>Can be created by adding a class that implements the <code><a href="https://javadocs.liquibase.com/liquibase-core/liquibase/precondition/CustomPrecondition.html">liquibase.precondition.CustomPrecondition</a></code> interface. Parameters on custom classes are set through reflection based on the <code>&lt;param&gt;</code> sub-tags. Pass parameters as strings to the custom precondition.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>className</code>
                    </td>
                    <td>The name of the custom precondition class.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
            </tbody>
        </table>
        <h4><code>&lt;param&gt;</code>&#160;sub-tag</h4>
        <p>The parameter to pass to the custom precondition.</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>name</code>
                    </td>
                    <td>The name of the parameter to set.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>value</code>
                    </td>
                    <td>A string value to set parameter to.</td>
                    <td><b>Required</b>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h4">
                <li class="js-tablist__item"><a href="#xml_example_customPrecondition" id="label_xml_example_customPrecondition" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_customPrecondition" id="label_yaml_example_customPrecondition" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_customPrecondition" id="label_json_example_customPrecondition" class="js-tablist__link">JSON example</a>
                </li>
            </ul>
            <div id="xml_example_customPrecondition" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;customPrecondition className="com.example.CustomTableCheck"&gt;
     &lt;param name="tableName"
            value="our_table"/&gt;
     &lt;param name="count"
            value="42"/&gt;
&lt;/customPrecondition&gt;</code></pre>
            </div>
            <div id="yaml_example_customPrecondition" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">- customPrecondition:
    - className: com.example.CustomTableCheck
    - param:
       name: tableName
       value: our_table
    - param:
       name: count
       value: 42</code></pre>
            </div>
            <div id="json_example_customPrecondition" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{
  "customPrecondition": [
    {
      "className": "com.example.CustomTableCheck"
    },
    {
      "param": {
        "name": "tableName",
        "value": "our_table"
      }
    },
    {
      "param": {
        "name": "count",
        "value": "42"
      }
    }
  ]
}</code></pre>
            </div>
        </div>
    </body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/concepts/changelogs/preconditions.html" />
        <meta name="description" content="Reference information for using Preconditions in Liquibase. Preconditions control the execution of an update based on the state of the database and can be attached to a changelog or changeset." />
    </head>
    <body>
        <h1 id="preconditions">Preconditions</h1>
        <p>Preconditions are tags you add to your <MadCap:variable name="General.changelog" /> or individual <MadCap:variable name="General.changeset" />s to control the execution of an update based on the state of the database. Preconditions let you specify security and standardization requirements for your <MadCap:variable name="General.changeset" />s. If a precondition on a <MadCap:variable name="General.changeset" /> fails, <MadCap:variable name="General.Liquibase" /> does not deploy that <MadCap:variable name="General.changeset" />.</p>
        <h2>Uses</h2>
        <p>You can use preconditions to:</p>
        <ul>
            <li>Document what assumptions the author of the <MadCap:variable name="General.changelog" /> had when creating it.</li>
            <li>Enforce that those assumptions are not violated by users running the <MadCap:variable name="General.changelog" />.</li>
            <li>Perform data checks before performing an unrecoverable change such as <MadCap:xref href="../../change-types/drop-table.html">dropTable</MadCap:xref>.</li>
            <li>Control what <MadCap:variable name="General.changeset" />s are run and not run based on the state of the database.</li>
        </ul>
        <p>You can use all <MadCap:variable name="General.Liquibase" /> preconditions in XML, YAML, and JSON&#160;<MadCap:variable name="General.changelog" />s. The only supported precondition for SQL&#160;<MadCap:variable name="General.changelog" />s is <code>sqlCheck</code>. For a list of preconditions, see <MadCap:xref href="#available-preconditions">Available preconditions</MadCap:xref>.</p>
        <h2>Syntax</h2>
        <p>You can use one <b>local</b>&#160;<code>&lt;preConditions&gt;</code> tag per <MadCap:variable name="General.changeset" /> and one <b>global</b>&#160;<code>&lt;preConditions&gt;</code> tag in the <MadCap:variable name="General.changelog" /> (outside any <MadCap:variable name="General.changeset" />). In XML, YAML, and JSON <MadCap:variable name="General.changelog" />s, you can use conditional logic to add multiple preconditions within a single <code>&lt;preConditions&gt;</code> tag.</p>
        <p>Preconditions at the <MadCap:variable name="General.changelog" /> level are applied to all <MadCap:variable name="General.changeset" />s, not just those listed in the current <MadCap:variable name="General.changelog" /> or its child <MadCap:variable name="General.changelog" />s.</p>
        <p>The following example XML, YAML, and JSON <MadCap:variable name="General.changelog" />s will only be run if the database executed against is Oracle and the database user executing the script is <code>SYSTEM</code>. Also, they will run the <MadCap:variable name="General.changeset" /> with the <code>sqlCheck</code> precondition and <MadCap:xref href="../../change-types/create-table.html">createTable</MadCap:xref>. The example SQL <MadCap:variable name="General.changelog" /> only runs the <code>sqlCheck</code> precondition and <code>createTable</code>.</p>
        <p>If the preconditions check fails, you will receive a warning and it will continue executing the <MadCap:variable name="General.changeset" /> as normal because of the <code>onFail="WARN"</code> precondition. To prevent the execution of the <MadCap:variable name="General.changeset" /> when the precondition fails, you can set <code>HALT</code> or <code>CONTINUE</code> values. For more information, see <MadCap:xref href="#onFail/onError">onFail/onError values</MadCap:xref>.</p>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 18pt;">XML example</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-xml">&lt;?xml version="1.1" encoding="UTF-8" standalone="no"?&gt;
<MadCap:snippetText src="../../Z_Resources/Snippets/code/liquibase-xsd-xml-changelog-closed.flsnp" />

    &lt;preConditions&gt;
        &lt;dbms  type="oracle"  /&gt;
        &lt;runningAs  username="SYSTEM"  /&gt;
    &lt;/preConditions&gt;

    &lt;changeSet  id="1"  author="Liquibase User"&gt;
        &lt;preConditions  onFail="WARN"&gt;
            &lt;sqlCheck  expectedResult="0"&gt;SELECT COUNT(*) FROM example_table&lt;/sqlCheck&gt;
        &lt;/preConditions&gt;
        &lt;comment&gt;Comments should go after the precondition. Otherwise, Liquibase returns an error.&lt;/comment&gt;

        &lt;createTable  tableName="example_table"&gt;
            &lt;column name="id" type="int" autoIncrement="true"&gt;
                &lt;constraints primaryKey="true" nullable="false"&gt;
            &lt;/column&gt;
            &lt;column name="firstname" type="varchar(50)"&gt;
            &lt;column name="lastname" type="varchar(50)"&gt;
                &lt;constraints nullable="false"&gt;
            &lt;/column&gt;
            &lt;column name="state" type="char(2)"&gt;
        &lt;/createTable&gt;
    &lt;/changeSet&gt;
&lt;/databaseChangeLog&gt;</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 18pt;">SQL example</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-sql">-- liquibase formatted sql
			
-- changeset Liquibase User:1
-- precondition-sql-check expectedResult:0 SELECT COUNT(*) FROM example_table
-- comment: /* Comments should go after the precondition. Otherwise, Liquibase returns an error. */
create table example_table (  
	id int primary key,
	firstname varchar(50),
	lastname varchar(50) not null,
	state char(2)
)</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 18pt;">YAML example</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-yaml">databaseChangeLog:
 - preConditions:
     - dbms:
        type: oracle
     - runningAs:
        username: SYSTEM
 - changeSet:
     id:  1
     author: Liquibase User
     preConditions:
       - onFail: WARN
       - sqlCheck:
          expectedResult: 0
          sql: SELECT COUNT(*) FROM example_table
     comment: Comments should go after the precondition. Otherwise, Liquibase returns an error.
     changes:
     - createTable:
         tableName: example_table
         columns:
          - column:
             name: id
             type: int
             autoIncrement: true
             constraints:
              primaryKey: true
              nullable: false
          - column:
             name:  firstname
	         type:  varchar(50)
          - column:
             name:  lastname
             type:  varchar(50)
             constraints:
              nullable:  false
          - column:
             name:  state
             type:  char(2)</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 18pt;">JSON example</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre><code class="language-json">{
  "databaseChangeLog": [
    {
      "preConditions": [
        {
          "dmbs": {
            "type": "oracle"
          }
        },
        {
          "runningAs": {
            "username": "SYSTEM"
          }
        }
      ],
      "changeSet": {
        "id": "1",
        "author": "Liquibase User",
        "preConditions": [
          {
            "onFail": "WARN"
          },
          {
            "sqlCheck": {
              "expectedResult": 0,
              "sql": "SELECT COUNT(*) FROM example_table"
            }
          }
        ],
        "comment": "Comments should go after the precondition. Otherwise, Liquibase returns an error.",
        "changes": [
          {
            "createTable": {
              "tableName": "example_table",
              "columns": [
                {
                  "column": {
                    "name": "id",
                    "type": "int",
                    "autoIncrement": true,
                    "constraints": {
                      "primaryKey": true,
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "firstname",
                    "type": "varchar(50)"
                  }
                },
                {
                  "column": {
                    "name": "lastname",
                    "type": "varchar(50)",
                    "constraints": {
                      "nullable": false
                    }
                  }
                },
                {
                  "column": {
                    "name": "state",
                    "type": "char(2)"
                  }
                }
              ]
            }
          }
        ]
      }
    }
  ]
}</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <h3>Multiple preconditions</h3>
        <p> In XML, JSON, and YAML <MadCap:variable name="General.changelog" />s, you can set multiple preconditions in one <code>&lt;preConditions&gt;</code> tag by using nestable <code>AND</code>, <code>OR</code>, and <code>NOT</code> conditional logic tags. If no conditional tags are specified, the default value is <code>AND</code>.</p>
        <p><MadCap:variable name="General.Liquibase" /> uses lazy evaluation (call-by-need) when running preconditions. For example, if the first condition of an <code>AND</code> expression fails, <MadCap:variable name="General.Liquibase" /> does not evaluate the second condition. If the first condition of an <code>OR</code> expression succeeds, <MadCap:variable name="General.Liquibase" /> does not evaluate the second condition.</p>
        <ul>
            <li>
                <p>XML:</p><pre xml:space="preserve"><code class="language-xml">&lt;preConditions&gt;
    &lt;or&gt;
        &lt;CONDITION_1&gt;
        &lt;CONDITION_2&gt;
    &lt;/or&gt;
&lt;/preConditions&gt;</code></pre>
            </li>
            <li>
                <p>JSON:</p><pre xml:space="preserve"><code class="language-json">{
  "preConditions": [
    {
      "or": [
        {
          {CONDITION_1},
          {CONDITION_2}
        }
      ]
    }
  ]
}</code></pre>
            </li>
            <li>
                <p>YAML:</p><pre xml:space="preserve"><code class="language-yaml">- preConditions:
    - or:
        - CONDITION_1
        - CONDITION_2</code></pre>
            </li>
        </ul>
        <h3>Examples</h3>
        <p>The following syntax example will check that the update is running on Oracle and with the <code>SYSTEM</code> user but will only generate a warning message if the precondition fails:</p><pre xml:space="preserve"><code class="language-xml">&lt;preConditions  onFail="WARN"&gt;
    &lt;dbms  type="oracle"  /&gt;
    &lt;runningAs  username="SYSTEM"  /&gt;
&lt;/preConditions&gt;</code></pre>
        <p>The following will require running the <MadCap:variable name="General.changelog" /> on Oracle or MySQL:</p><pre xml:space="preserve"><code class="language-xml">&lt;preConditions&gt;
   &lt;or&gt;
      &lt;dbms  type="oracle"  /&gt;
      &lt;dbms  type="mysql"  /&gt;
   &lt;/or&gt;
&lt;/preConditions&gt;</code></pre>
        <p>You can also see the precondition running as <code>SYSTEM</code> if executing against an Oracle database or running as SA if executing against a MS SQL database.</p><pre xml:space="preserve"><code class="language-xml">&lt;preConditions&gt;
    &lt;or&gt;
       &lt;and&gt;
          &lt;dbms  type="oracle"  /&gt;  
          &lt;runningAs  username="SYSTEM"  /&gt;
       &lt;/and&gt;
       &lt;and&gt;
          &lt;dbms  type="mssql"  /&gt;
          &lt;runningAs  username="sa"  /&gt;
       &lt;/and&gt;
     &lt;/or&gt;
&lt;/preConditions&gt;</code></pre>
        <h2 id="handling-failures-and-errors">Handling failures and errors</h2>
        <p><MadCap:variable name="General.Liquibase" /> defines two types of preconditions:</p>
        <ul>
            <li>Precondition <b>failures</b> which represent that the check failed</li>
            <li>Precondition <b>errors</b> that are the exceptions thrown in the execution of a check</li>
        </ul>
        <p>The process of both can be controlled through the <code>onFail</code> and <code>onError</code> <MadCap:variable name="General.Param/Attribute" />s on the <code>&lt;preConditions&gt;</code> tag.</p>
        <h3 id="available-attributes">Available <MadCap:variable name="General.Param/Attribute" />s</h3>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>onError</code>
                    </td>
                    <td>Controls what happens if there is an error checking whether the precondition passed or not.</td>
                </tr>
                <tr>
                    <td><code>onErrorMessage</code>
                    </td>
                    <td>Provides a custom message to output when preconditions fail. <b>Since 2.0</b></td>
                </tr>
                <tr>
                    <td><code>onFail</code>
                    </td>
                    <td>Controls what happens if the preconditions check fails.</td>
                </tr>
                <tr>
                    <td><code>onFailMessage</code>
                    </td>
                    <td>Provides a custom message to output when preconditions fail. <b>Since 2.0</b></td>
                </tr>
                <tr>
                    <td><code>onSqlOutput</code>
                    </td>
                    <td>Controls how preconditions are evaluated in the <code>update-sql</code> mode for XML, YAML, and JSON <MadCap:variable name="General.changelog" />s. <b>Since 1.9.5</b></td>
                </tr>
                <tr>
                    <td><code>onUpdateSql</code>
                    </td>
                    <td>Controls how preconditions are evaluated in the <code>update-sql</code> mode for formatted SQL&#160;<MadCap:variable name="General.changelog" />s.</td>
                </tr>
            </tbody>
        </table>
        <h3><a name="onFail/onError"></a><code>onFail</code>/<code>onError</code> values</h3>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th>Value</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>CONTINUE</code>
                    </td>
                    <td>Skips over the <MadCap:variable name="General.changeset" />. Execution of the <MadCap:variable name="General.changeset" /> will be attempted again on the next update. Continues with the <MadCap:variable name="General.changelog" />.</td>
                </tr>
                <tr>
                    <td><code>HALT</code>
                    </td>
                    <td>Halts the execution of the entire <MadCap:variable name="General.changelog" /> (default). <code>HALT</code> can be put outside a <MadCap:variable name="General.changeset" /> (e.g. at the beginning of the <MadCap:variable name="General.changelog" />).</td>
                </tr>
                <tr>
                    <td><code>MARK_RAN</code>
                    </td>
                    <td>Skips over the <MadCap:variable name="General.changeset" /> but mark it as executed. Continues with the <MadCap:variable name="General.changelog" />.</td>
                </tr>
                <tr>
                    <td><code>WARN</code>
                    </td>
                    <td>Sends a warning and continues executing the <MadCap:variable name="General.changeset" /> / <MadCap:variable name="General.changelog" /> as normal. <code>WARN</code> can be put outside a <MadCap:variable name="General.changeset" /> (e.g. at the beginning of the <MadCap:variable name="General.changelog" />).</td>
                </tr>
            </tbody>
        </table>
        <h3 id="possible-onsqloutput-values"><code>onSqlOutput</code>/<code>onUpdateSql</code> values</h3>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th>Value</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>FAIL</code>
                    </td>
                    <td>Fails the <code>preCondition</code> in the <code>update-sql</code> mode.</td>
                </tr>
                <tr>
                    <td><code>IGNORE</code>
                    </td>
                    <td>Ignores the <code>preCondition</code> in the <code>update-sql</code> mode (default).</td>
                </tr>
                <tr>
                    <td><code>TEST</code>
                    </td>
                    <td>Runs the <MadCap:variable name="General.changeset" /> in the <code>update-sql</code> mode.</td>
                </tr>
            </tbody>
        </table>
        <p>Failures and errors will cause <MadCap:variable name="General.Liquibase" /> to return non-zero exit codes in command output. Warnings will cause <MadCap:variable name="General.Liquibase" /> to return exit codes of zero.</p>
        <h3>Example failures/errors</h3>
        <p>The following is a sample failure on a <MadCap:variable name="General.changelog" />:</p><pre xml:space="preserve"><code class="language-text">Unexpected error running Liquibase: Validation Failed:
1 preconditions failed
myChangelog.xml : DBMS Precondition failed: expected oracle, got postgresql</code></pre>
        <p>The following is a sample error on a <MadCap:variable name="General.changelog" />:</p><pre xml:space="preserve"><code class="language-text">Unexpected error running Liquibase: Validation Failed:
1 preconditions generated an error
myChangelog.xml : liquibase.precondition.core.SqlPrecondition@5745ca0e : ERROR: relation "public.table_does_not_exist" does not exist</code></pre>
        <p>The following is a sample warning on a <MadCap:variable name="General.changeset" />:</p><pre xml:space="preserve"><code class="language-text">WARNING: Executing myChangelog.xml::01-new::wonder.woman despite precondition failure due to onFail='WARN':
1 preconditions failed
myChangelog.xml : Column public.customer.name_new does not exist</code></pre>
        <h2 id="available-preconditions"><a name="available-preconditions"></a>Available preconditions</h2>
        <p>The examples of preconditions shown in the table doesn't include the <code>schemaName</code> <MadCap:variable name="General.Param/Attribute" />. It is best practice not to keep the <code>schemaName</code> in the <MadCap:variable name="General.changeset" /> and rely on the default schema except for times you don’t want to create something in the default schema.</p>
        <p>Additionally, you can include the <code>onError</code> or <code>onFail</code> <MadCap:variable name="General.Param/Attribute" />s with the <code>WARN</code>, <code>HALT</code>, <code>CONTINUE</code>, or <code>MARK_RAN</code> value in the preconditions tag, however, the <code>CONTINUE</code> and <code>MARK_RAN</code> options can only be applied to preconditions inside a <MadCap:variable name="General.changeset" />.</p>
        <p>You can use any precondition mentioned in the following table:</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <col style="width: 15vw;" />
            <col style="width: 35vw;" />
            <col style="width: 25vw;" />
            <thead>
                <tr>
                    <th>Precondition</th>
                    <th>Description</th>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>dbms</code>
                    </td>
                    <td>
                        <p>Defines if the database executed against matches the type specified.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
  &lt;or&gt;
    &lt;dbms  type="oracle"  /&gt;
    &lt;dbms  type="mysql"  /&gt;
  &lt;/or&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td><strong>type</strong> – the type of database expected. Multiple dbms values can be specified using comma-separated values. (required)</td>
                </tr>
                <tr>
                    <td><code>changeLogPropertyDefined</code>
                    </td>
                    <td>
                        <p>Checks whether given <MadCap:variable name="General.changelog" /> <MadCap:variable name="General.Param/Attribute" /> is present. It fails if the value is not the same as given.</p>
                        <p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;changeLogPropertyDefined property="myproperty"/&gt;
    &lt;changeLogPropertyDefined property="myproperty"
                              value="requiredvalue"/&gt;
&lt;/preConditions&gt;</code></pre>
                        </p>
                    </td>
                    <td>
                        <ul>
                            <li><strong>property</strong> – the name of the property to check. (required)</li>
                            <li><strong>value</strong> – the required value for a given property.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><code>changeSetExecuted</code>
                    </td>
                    <td>
                        <p>Defines if the specified <MadCap:variable name="General.changeset" /> has already been executed.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="HALT"&gt;
    &lt;changeSetExecuted id="1"
                       author="liquibase"
                       changelog-file="changelog.xml" /&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td>
                        <ul>
                            <li><strong>Id</strong> – the <MadCap:variable name="General.changeset" /> id. (required)</li>
                            <li><b>author</b> – the <MadCap:variable name="General.changeset" /> author. (required)</li>
                            <li><strong>changelog-file</strong> – the file name (including searchPath relative path) of the <MadCap:variable name="General.changeset" />. (required)</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><code>sqlCheck</code>
                    </td>
                    <td>
                        <p>Executes an SQL string and checks the returned value. The SQL must return a single row with a single value.</p>
                        <ul>
                            <li>To check a number of rows, use the <code>count</code> SQL function.</li>
                            <li>To check for ranges of values, perform the check in the SQL and return a value that can be easily compared against.</li>
                        </ul><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;sqlCheck expectedResult="1"&gt;
        SELECT COUNT(1)
        FROM pg_tables
        WHERE TABLENAME = 'myRequiredTable'
    &lt;/sqlCheck&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td><strong>expectedResult</strong> – the value to compare the SQL result to. (required)</td>
                </tr>
                <tr>
                    <td><code>rowCount</code>
                    </td>
                    <td>
                        <p>Checks that the number of rows in a table matches an expected value.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions&gt;
    &lt;rowCount expectedRows="5"
              tableName="person"/&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td>
                        <ul>
                            <li><b>expectedRows</b> – the number of rows the user expects in a table (required)</li>
                            <li><b>tableName</b> – the name of the column's table (required)</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><code>runningAs</code>
                    </td>
                    <td>
                        <p>Defines if the database user executed under matches the username specified.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions  onFail="WARN"&gt;
    &lt;dbms  type="oracle"  /&gt;
    &lt;runningAs  username="SYSTEM"  /&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td><strong>username</strong> – the database user script which is expected to run as. (required)</td>
                </tr>
                <tr>
                    <td><code>columnExists</code>
                    </td>
                    <td>
                        <p>Defines if the specified column exists in the database.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;columnExists tableName="table1"
                  columnName="column1" /&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td>
                        <ul>
                            <li><strong>schemaName</strong> – the name of the table's schema. </li>
                            <li><strong>tableName</strong> – the name of the column's table. (required)</li>
                            <li><strong>columnName</strong> – the name of the column. (required)</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><code>foreignKeyConstraintExists</code>
                    </td>
                    <td>
                        <p>Defines if the specified foreign key exists in a table in the database.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;foreignKeyConstraintExists foreignKeyName="PK_2354"
                                foreignKeyTableName="myTable" /&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td>
                        <ul>
                            <li><strong>schemaName</strong> – the name of the foreign key's schema. </li>
                            <li><strong>foreignKeyName</strong> – the name of the foreign key. (required)</li>
                            <li><b>foreignKeyTableName</b> – the name of the table the foreign key is in. (required in 4.7.0+)</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><code>indexExists</code>
                    </td>
                    <td>
                        <p>Defines if the specified index exists in the database. You can either specify the <code>indexName</code> <MadCap:variable name="General.Param/Attribute" /> or <code>tableName</code> and <code>columnNames</code> <MadCap:variable name="General.Param/Attribute" />s.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;indexExists indexName="originindex"/&gt;
&lt;/preConditions&gt;</code></pre><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;indexExists tableName="MY_NEW_TABLE"
                 columnNames="ID"/&gt;
&lt;/preConditions&gt;</code></pre>
                        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">There are a few databases where the <code>indexName</code> is not unique, that's why both <code>indexName</code> and <code>tableName</code> can be used.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;indexExists indexName="originindex"
                 tableName="MY_NEW_TABLE"/&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td>
                        <ul>
                            <li><strong>schemaName</strong> – the name of the index's schema. </li>
                            <li><strong>indexName</strong> – the name of the index. </li>
                            <li><strong>tableName</strong> – the name of the table.</li>
                            <li><strong>columnNames</strong> – the name of the column. </li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><code>primaryKeyExists</code>
                    </td>
                    <td>
                        <p>Defines if the specified primary key exists in the database.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="HALT"&gt;
    &lt;primaryKeyExists primaryKeyName="ID_2354"
                      tableName="table1" /&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td>
                        <ul>
                            <li><strong>schemaName</strong> – the name of the primary key's schema.</li>
                            <li><strong>primaryKeyName</strong> – the name of the primary key constraint.</li>
                            <li><strong>tableName</strong> – the name of the table containing primary key. <br />(<code>tableName</code> or <code>primaryKeyName</code> is required)</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><code>sequenceExists</code>
                    </td>
                    <td>
                        <p>Defines if the specified sequence exists in the database.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="WARN"&gt;
    &lt;sequenceExists sequenceName="idnumber" /&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td>
                        <ul>
                            <li><strong>schemaName</strong> – the name of the sequences' schema. </li>
                            <li><strong>sequenceName</strong> – the name of the sequence. (required)</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><code>tableExists</code>
                    </td>
                    <td>
                        <p>Defines if the specified table exists in the database.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;changeSet author="author" id="1"&gt;
   &lt;preConditions onFail="MARK_RAN"&gt;
       &lt;not&gt;
           &lt;tableExists tableName="MY_NEW_TABLE"/&gt;
       &lt;/not&gt; 
   &lt;/preConditions&gt;
       &lt;createTable tableName="MY_NEW_TABLE"&gt;
           &lt;column name="IDX"
                   type="${integer.type}"&gt;
               &lt;constraints nullable="false"/&gt; 
           &lt;/column&gt;
           &lt;column name="INTVAL"
                   type="${integer.type}"/&gt;
       &lt;/createTable&gt;
&lt;/changeSet&gt;</code></pre>
                    </td>
                    <td>
                        <ul>
                            <li><strong>schemaName</strong> – the name of the table's schema. </li>
                            <li><strong>tableName</strong> – the name of the table. (required)</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><code>uniqueConstraintExists</code>
                    </td>
                    <td>
                        <p>Checks for the existence of unique constraints before running the update. (since <MadCap:variable name="General.Liquibase" /> 4.9.0)</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions&gt;
&lt;uniqueConstraintExists constraintName="uq_constraint_name"
                        tableName="test_table"/&gt;
&lt;/preConditions&gt;

&lt;preConditions&gt;
&lt;uniqueConstraintExists tableName="test_table"
                        columnNames="first_name, last_name"/&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td>
                        <ul>
                            <li><b>constraintName</b> – the name of the unique constraint</li>
                            <li><b>tableName</b> – the name of the column's table (required)</li>
                            <li><b>columnNames</b> – the name of the column</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><code>viewExists</code>
                    </td>
                    <td>
                        <p>Defines if the specified view exists in the database.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;preConditions onFail="HALT"&gt;
    &lt;viewExists viewName="liquibase" /&gt;
&lt;/preConditions&gt;</code></pre>
                    </td>
                    <td>
                        <ul>
                            <li><strong>schemaName</strong> – the name of the view's schema. </li>
                            <li><strong>viewName</strong> – the name of the view. (required)</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><code>customPrecondition</code>
                    </td>
                    <td>
                        <p>Can be created by adding a class that implements the <code>liquibase.precondition.CustomPrecondition</code> interface. Parameters on custom classes are set through reflection based on the <code>&lt;param&gt;</code> sub-tags. Pass parameters as strings to the custom precondition.</p><pre xml:space="preserve" style="white-space:pre-wrap;"><code class="language-xml">&lt;customPrecondition className="com.example.CustomTableCheck"&gt;
     &lt;param name="tableName"
            value="our_table"/&gt;
     &lt;param name="count"
            value="42"/&gt;
&lt;/customPrecondition&gt;</code></pre>
                    </td>
                    <td>
                        <p><strong>className</strong> – the name of the custom precondition class. (required)</p>
                        <p><strong>The </strong><b>customPrecondition</b><strong> sub-tags:</strong>
                        </p>
                        <ul>
                            <li><strong>param</strong> – the parameter to pass to the custom precondition.</li>
                            <li><strong>name</strong> – the name of the parameter to set. (required)</li>
                            <li><strong>value</strong> – a string value to set parameter to. (required)</li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html>
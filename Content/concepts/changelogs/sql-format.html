<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/concepts/changelogs/sql-format.html" />
        <meta name="description" content="Reference information for SQL changelogs. Liquibase supports SQL as a format for storing your changelog files." />
    </head>
    <body>
        <h1 id="formatted-sql-changelogs">Example Changelogs: SQL Format</h1>
        <p><MadCap:variable name="General.Liquibase" /> supports <MadCap:xref href="home.html">Changelog</MadCap:xref> files in the SQL&#160;format. Like other file types, you can use as many formatted SQL&#160;<MadCap:variable name="General.changelog" />s as your database needs. You cannot use the <MadCap:xref href="../../change-types/include.html">include</MadCap:xref> or <MadCap:xref href="../../change-types/includeall.html">includeAll</MadCap:xref> tags in a formatted SQL&#160;<MadCap:variable name="General.changelog" /> to reference other <MadCap:variable name="General.changelog" /> files. However, you can use a formatted SQL&#160;<MadCap:variable name="General.changelog" /> without these tags, or use an XML, YAML, or JSON&#160;root <MadCap:variable name="General.changelog" /> that references your formatted SQL&#160;<MadCap:variable name="General.changelog" />(s).</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">When creating an SQL <MadCap:variable name="General.changelog" /> file with the <code>generate-changelog</code> and <code>diff-changelog</code> commands, add your database type name when you specify the <MadCap:variable name="General.changelog" /> file. See the example below. If using the example, replace <code>.oracle.sql</code> with your database type. When in doubt about your database type name, check <a href="https://www.liquibase.org/get-started/databases">Supported Databases</a>. <br /></p>
        <p class="example" MadCap:autonum="&lt;b&gt;Example: &lt;/b&gt;"><code>liquibase generate-changelog --changelog-file=mychangelog.oracle.sql
       <br />liquibase diff-changelog --changelog-file=mychangelog.oracle.sql</code>
        </p>
        <p>The <MadCap:variable name="General.changelog" /> files may contain arbitrary SQL statements. The statements are converted to <a href="../../change-types/sql.html">custom sql</a> Change Types.</p>
        <p>Formatted SQL files use comments to provide <MadCap:variable name="General.Liquibase" /> with metadata. Each SQL file must begin with the following comment:</p><pre><code class="language-sql">--liquibase formatted sql</code></pre>
        <h2 id="changesets"><MadCap:variable name="General.changeset" />
        </h2>
        <p>Each <MadCap:variable name="General.changeset" /> in a formatted SQL file begins with a comment of the form:</p><pre><code class="language-sql">--changeset author:id attribute1:value1 attribute2:value2 [...]</code></pre>
        <p>The <MadCap:variable name="General.changeset" /> comment is followed by one or more SQL statements, separated by
semicolons or by the value of the <code class="highlighter-rouge">&lt;endDelimiter&gt;</code> attribute).</p>
        <p>If you use the <MadCap:variable name="General.LBPro" /> feature <code>runWith=sqlPlus</code>, follow these rules with formatted SQL <MadCap:variable name="General.changelog" />s:</p>
        <ul>
            <li>Do not set the <code>endDelimiter</code> property on the <MadCap:variable name="General.changeset" />. This affects SQLPlus.</li>
            <li>Ensure that the <code>SplitStatements</code> attribute is set to <code>true</code>, which is the default value.</li>
        </ul>
        <h3 id="available-changeset-attributes"><MadCap:variable name="General.changeset" /> attributes</h3>
        <p>Use the following attributes for your <MadCap:variable name="General.changeset" />s:</p>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th>Attribute</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code><a href="attributes/contexts.html">contextFilter</a></code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-contexts.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>dbms</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/change-types/change-type-dbms.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>endDelimiter</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/change-types/change-type-end-delimiter.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code><MadCap:xref href="attributes/fail-on-error.htm">failOnError</MadCap:xref></code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/changelog/changelog-fail-on-error.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code><MadCap:xref href="attributes/ignore.htm">ignore</MadCap:xref></code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/changelog/changelog-ignore.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code><a href="attributes/labels.html">labels</a></code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-label-filter.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code><MadCap:xref href="attributes/logicalfilepath.htm">logicalFilePath</MadCap:xref></code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/changelog/changelog-logical-file-path.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>rollbackEndDelimiter</code>
                    </td>
                    <td>Specifies delimiter to apply to the end of the statement for rollback SQL. <b>Default value is</b>: <code>";"</code>. It can also be set to <code>""</code>. </td>
                </tr>
                <tr>
                    <td><code>rollbackSplitStatements</code>
                    </td>
                    <td>Removes <MadCap:variable name="General.Liquibase" /> split statements on <code>;'s</code> and <code>GO's</code> for rollback SQL when it is set to <code>false</code>. <b>Default value is:</b> <code>true</code>.</td>
                </tr>
                <tr>
                    <td><code><MadCap:xref href="attributes/run-always.htm">runAlways</MadCap:xref></code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/changelog/changelog-run-always.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code><MadCap:xref href="attributes/run-in-transaction.htm">runInTransaction</MadCap:xref></code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/changelog/changelog-run-in-transaction.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code><MadCap:xref href="attributes/runonchange.htm">runOnChange</MadCap:xref></code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/changelog/changelog-run-on-change.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code><MadCap:xref href="attributes/runwith.htm">runWith</MadCap:xref></code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/changelog/changelog-run-with.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code><MadCap:xref href="attributes/run-with-spool-file.htm">runWithSpoolFile</MadCap:xref></code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/changelog/changelog-run-with-spool-file.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>splitStatements</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/change-types/change-type-split-statements.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>stripComments</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/change-types/change-type-strip-comments.flsnp" />
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 id="preconditions">Preconditions</h2>
        <p>Preconditions can be specified for each <MadCap:variable name="General.changeset" />. Currently, only the SQL check precondition is supported.</p><pre><code class="language-sql">--preconditions onFail:HALT onError:HALT
--precondition-sql-check expectedResult:0 SELECT COUNT(*) FROM my_table</code></pre>
        <h2 id="rollback-actions">Rollback actions</h2>
        <p><MadCap:variable name="General.changeset" />s may include statements to be applied when rolling back the <MadCap:variable name="General.changeset" />. Rollback statements have the following format of the comments:</p><pre><code class="language-sql">--rollback SQL STATEMENT</code></pre>
        <h2 id="comment">Comment</h2>
        <p>The comment is a description of the <MadCap:variable name="General.changeset" />. The format of the comment can be one of the following:</p>
        <ul>
            <li>A multi-line comment that starts with <code>/*</code> and ends with <code>*/</code>.</li>
            <li>A single-line comment starting with <code>&lt;space&gt;--&lt;space&gt;</code> and finishing at the end of the line.</li>
        </ul>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">By default, the statements will be split on a <code>‘;'</code> or <code>‘go'</code> at the end of lines. Because of this, if you have a comment or other non-statement ending <code>‘;'</code> or <code>‘go'</code>, don't put it at the end of a line or you will get an invalid SQL.</p>
        <p>Future releases of <MadCap:variable name="General.Liquibase" /> may use comments to generate documentation.</p><pre><code class="language-sql">--comment: some comment</code></pre>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">When you add a comment to your <MadCap:variable name="General.changeset" /> and deploy this <MadCap:variable name="General.changeset" />, the comment will not be applied to the <MadCap:variable name="General.databasechangelog" /> tracking table.</p>
        <h2 id="valid-checksum">Valid checksum</h2>
        <p>Valid checksum is a checksum which is valid for a specific <MadCap:variable name="General.changeset" />, regardless of what is stored in the database. It is typically used when you need to change a <MadCap:variable name="General.changeset" /> and don't want errors to be thrown on databases on which it has been already run. Nevertheless, it is not a recommended procedure.(<b>Since 3.5</b>).</p><pre><code class="language-sql">--validCheckSum: 3:098f6bcd4621d373cade4e832627b4f6 
--validCheckSum: 7:ad0234829205b9033196ba818f7a872b</code></pre>
        <p>For more information about <MadCap:variable name="General.Liquibase" /> checksums, see <MadCap:xref href="changeset-checksums.htm">Changeset Checksums</MadCap:xref>.</p>
        <h2 id="ignore-lines">Ignore lines</h2>
        <p>The <code>ignoreLines</code> attribute allows you to ignore the specific lines. It is typically used when you run the same script with the other SQL tools.
<b>Since 3.7</b></p>
        <p>Marking two lines to be ignored:</p><pre><code class="language-sql">--changeset author:id1  
CREATE OR REPLACE PACKAGE ... 
--ignoreLines:2
/
show errors;
--changeset author:id2  
CREATE OR REPLACE PACKAGE BODY ...</code></pre>
        <p>Making two lines to be ignored by using start-end syntax:</p><pre><code class="language-sql">--changeset author:id1  
CREATE OR REPLACE PACKAGE ...  
--ignoreLines:start
/ 
show errors;
--ignoreLines:end
--changeset author:id2
CREATE OR REPLACE PACKAGE BODY ...</code></pre>
        <h2 id="sample-changelog">Sample <MadCap:variable name="General.changelog" /></h2><pre><code class="language-sql">--liquibase formatted sql

--changeset nvoxland:1
create table test1 (  
    id int primary key,
    name varchar(255)  
);  
--rollback drop table test1; 

--changeset nvoxland:2 
insert into test1 (id, name) values (1, ‘name 1′);
insert into test1 (id,  name) values (2, ‘name 2′);  

--changeset nvoxland:3 dbms:oracle
create sequence seq_test;</code></pre>
        <h2>Related links</h2>
        <ul>
            <li><a href="https://www.liquibase.org/blog/plain-sql"><MadCap:variable name="General.Liquibase" /> Works with Plain Old SQL</a>
            </li>
            <li>
                <MadCap:xref href="../introduction-to-liquibase.htm">Introduction to [%=General.Liquibase%]</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="home.html">Changelog</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="changeset.html">Changeset</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="attributes/home.htm">Changelog [%=General.Param/Attr/Uppercased%]s</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../../change-types/home.html">[%=General.changetypes%]s</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../../commands/home.htm">[%=General.Liquibase%] Commands</MadCap:xref>
            </li>
        </ul>
    </body>
</html>
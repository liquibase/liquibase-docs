<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/liquibase-pro/targeted-rollbacks.html" />
        <meta name="description" content="Description of Liquibase Pro targeted rollback functionality." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <MadCap:snippetBlock src="../Z_Resources/Snippets/images/icon-pro-top.flsnp" />
        <img src="../Z_Resources/Images/Icons/icon-target-script_200x200.png" alt="Simplified icon of a target above code syntax" />
        <h1>Targeted Rollbacks</h1>
        <p>Targeted rollbacks provide users the ability to target the exact <MadCap:variable name="General.changeset" /> or deployment update for rollback without rolling back all the changes that came after.</p>
        <p>Targeted rollback commands leave unrelated changes to the product and customer tables in place and remove the <MadCap:variable name="General.changeset" /> record from the <MadCap:xref href="../concepts/tracking-tables/databasechangelog-table.html">[%=General.databasechangelog%] table</MadCap:xref>. Rollback history is retained in the <MadCap:xref href="../concepts/tracking-tables/databasechangeloghistory-table.htm">[%=General.databasechangeloghistory%] table</MadCap:xref>.</p>
        <h2>Targeted Rollback Commands</h2>
        <p>These commands require an <b>active</b>&#160;<a href="license-key.htm"><MadCap:variable name="General.LBPro" /> license</a>:</p>
        <ul>
            <li><code><MadCap:xref href="../commands/rollback/rollback-one-changeset.html">rollback-one-changeset</MadCap:xref></code>: used to revert a single change without impact to changes made before or after the targeted change.</li>
            <li><code><MadCap:xref href="../commands/rollback/rollback-one-changeset-sql.html">rollback-one-changeset-sql</MadCap:xref></code>: executed before the <code class="language-text">rollback-one-changeset</code> command to inspect the raw SQL for potential issues.</li>
            <li><code><MadCap:xref href="../commands/rollback/rollback-one-update.html">rollback-one-update</MadCap:xref></code>: used to revert all changes that were applied to the database related to a specific deployment ID.</li>
            <li><code><MadCap:xref href="../commands/rollback/rollback-one-update-sql.html">rollback-one-update-sql</MadCap:xref></code>: executed before the <code class="language-text">rollback-one-update</code> command to inspect the raw SQL for potential issues.</li>
        </ul>
        <p>Each <b>individual targeted rollback command page</b> will specify the criteria for using the command successfully including a list of required and optional command-specific arguments.</p>
        <p class="warning" MadCap:autonum="&lt;b&gt;Warning: &lt;/b&gt;">Because data is constantly changing, there is a risk of data loss when a rollback is executed. There is also a risk of database drift if the rollback is not executed in all impacted database environments.</p>
        <h2>Targeted Rollback Command Requirements</h2>
        <p>All targeted rollback commands require the following <b>command arguments</b>:</p>
        <ul>
            <li>The root <MadCap:variable name="General.changelog" /> file is specified as <code class="language-text">--changelog-file</code>.</li>
            <li>The JDBC database connection URL is specified as <code class="language-text">--url</code>.</li>
        </ul>
        <p>The username and password are not required for connections and systems which use alternate means of authentication.</p>
        <h2>Troubleshooting</h2>
        <p>If an error is returned when executing a targeted rollback command, use the Liquibase&#160;<code class="language-text">--help</code> parameter to check the correct syntax of the command and the command-specific parameters that can be used when executing the command.</p>
        <p><b>For example, in the CLI:</b>
        </p><pre><code class="language-text">liquibase &lt;command&gt; --help</code></pre>
        <h2>Related Content</h2>
        <ul>
            <li>Visit the <MadCap:xref href="../workflows/liquibase-community/using-jdbc-url-in-liquibase.htm">Using JDBC URL in [%=General.Liquibase%]</MadCap:xref> documentation page to learn more about Liquibase database connection requirements.</li>
        </ul>
        <h2>Liquibase Resources</h2>
        <h3>Liquibase Help</h3>
        <ul>
            <li>Visit the Liquibase&#160;<a href="https://forum.liquibase.org/">Forum</a> channel to ask questions, find answers from other Liquibase users, and learn about new Liquibase version releases.</li>
            <li>Visit the <a href="https://support.liquibase.com/knowledge"><MadCap:variable name="General.CompanyName" /> Support Portal</a> for <MadCap:variable name="General.LBPro" /> assistance and troubleshooting tips.</li>
        </ul>
        <h3>Tutorials</h3>
        <ul>
            <li>Visit the <MadCap:xref href="../workflows/liquibase-community/using-rollback.htm">[%=General.Liquibase%] Rollback Workflow</MadCap:xref> documentation page to learn more about validating and creating rollback statements.</li>
        </ul>
        <h3>Blogs and Articles</h3>
        <ul>
            <li><a href="https://www.liquibase.com/blog/roll-back-database-fix-forward">Database Rollback or Fix Forward?</a>: read the blog about the common approaches to database issues and why a fix forward may be the right approach for you.</li>
            <li><a href="https://www.liquibase.com/targeted-rollback">Introducing Targeted Rollback for One Change</a>: read the blog to learn more about this <MadCap:variable name="General.LBPro" /> command.</li>
            <li><a href="https://www.liquibase.com/blog/rollback-one-update">Introducing Targeted Rollback for One Update</a>: read the blog to learn more about this <MadCap:variable name="General.LBPro" /> command.</li>
        </ul>
    </body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/liquibase-pro/policy-checks/checks/changelog-checks/sql-user-defined-pattern-check.html" />
        <meta name="description" content="This check scans SQL for the presence of specific patterns and warns the user when they are found." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <MadCap:snippetBlock src="../../../../Z_Resources/Snippets/images/icon-pro-top.flsnp" />
        <h1><code>SqlUserDefinedPatternCheck</code>
        </h1>
        <p>This check scans SQL for the presence of specific patterns and warns the user when they are found.</p>
        <table>
            <col />
            <col />
            <tbody>
                <tr>
                    <th colspan="2">About <code class="language-text">SqlUserDefinedPatternCheck</code></th>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Liquibase version required</td>
                    <td>4.5.0+</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Scope (<code class="language-text">--checks-scope</code>)</td>
                    <td><code class="language-text">changelog</code>
                    </td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Default status</td>
                    <td><code class="language-text">disabled</code>
                    </td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Default severity (exit code)</td>
                    <td><code class="language-text">0</code> ("<code class="language-text">INFO</code>")</td>
                </tr>
                <tr>
                    <td style="font-weight: bold;">Customizable settings</td>
                    <td>Yes (dynamic)</td>
                </tr>
            </tbody>
        </table>
        <h2>Uses</h2>
        <p>Use the check to notify you when your custom specific patterns in the changelog are found. This policy check is an "open-ended" check which you can copy and customize for as many custom patterns, defined as simple strings or regex, as your naming, security, compliance, and other policies require. For example, if your polices require all tables to begin with <code class="language-text">tbl_</code> or indexes to end with <code class="language-text">_id</code>, this check is easy copied and customized into two checks with those patterns. If you are handy with regex, the limit for pattern finding is greatly expanded. This policy check, like other checks, can be configured with a severity level which returns an exit code designed to stop automated jobs, giving your team time to investigate your user-defined patterns before they are deployed.</p>
        <h2>Use <code>SqlUserDefinedPatternCheck </code></h2>
        <MadCap:snippetBlock src="../../../../Z_Resources/Snippets/text/checks-use.flsnp" MadCap:conditionTagExpression="include[checks-use.default-disabled or checks-use.must-copy-customize or checks-use.settings-dynamic]" />
        <h2>Customization settings</h2>
        <p class="tip" MadCap:autonum="&lt;b&gt;Tip: &lt;/b&gt;">In Liquibase 4.27.0+ you can choose to enable the PATH_FILTER option. This can be used  to filter all changesets in changelogs in a specific directory that contain a specified string or regex.</p>
        <table style="width: 100%; margin-left: auto; margin-right: auto;">
            <col />
            <col />
            <col />
            <thead>
                <tr>
                    <th>
                        <p>Configurable Filter Option</p>
                    </th>
                    <th>Value</th>
                    <th>Path</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <p>PATH_FILTER_REGEX</p>
                    </td>
                    <td>String or Regex</td>
                    <td>
                        <p>Relative</p>
                        <p>Compatible with:</p>
                        <ul>
                            <li>S3 and GitHub paths</li>
                            <li>include/includeAll changelogs</li>
                            <li>changelogs using relative paths</li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot><code>liquibase checks enable --check-name=SqlUserDefinedPatternCheck</code> example output</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-text">Customization complete. Review the table below to confirm your changes.
...
+-------------------------------------+------------+----------+----------+--------------------------------+--------------------------------+
| SqlUserDefinedPatternCheck          | changelog  | disabled | 0        | SEARCH_STRING = null           | This check scans SQL for the   |
|                                     |            |          |          | MESSAGE = A match for regular  | presence of specific patterns  |
|                                     |            |          |          | expression &lt;SEARCH_STRING&gt; was | in specified changelog paths,  |
|                                     |            |          |          | detected in Changeset          | and warns the user when they   |
|                                     |            |          |          | &lt;CHANGESET&gt;.             | are found.                     |
|                                     |            |          |          | STRIP_COMMENTS = true          |                                |
|                                     |            |          |          | PATH_FILTER_REGEX = null       |                                |
+-------------------------------------+------------+----------+----------+--------------------------------+--------------------------------+
Liquibase command 'checks enable' was executed successfully.</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
    </body>
</html>
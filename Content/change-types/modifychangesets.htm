<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="True">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/change-types/modifychangesets.html" />
		<meta name="description" content="The modifyChangeSets tag lets you include SQL scripts in your Liquibase changelog while using a native executor like PSQL, SQL Plus, or SQLCMD." />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <h1><code>modifyChangeSets</code>
            <MadCap:snippetText src="../Z_Resources/Snippets/images/icon-community-top.flsnp" />
        </h1>
        <p>The <code>modifyChangeSets</code> tag lets you include SQL scripts in your <MadCap:variable name="General.Liquibase" />&#160;<MadCap:variable name="General.changelog" /> while using an application's native executor—like PSQL, SQL Plus, or SQLCMD—instead of the JDBC default— to deploy raw SQL&#160;scripts with a native executor. This removes the burden of converting raw SQL&#160;scripts into formatted SQL <MadCap:variable name="General.changelog" />s. You can use it to specify an overarching executor for all files in your project.</p>
        <h2>Uses</h2>
        <p>If you have many <MadCap:variable name="General.changeset" />s that need to be run with a native executor, and you organize your <MadCap:variable name="General.changelog" />s in a <a href="../concepts/bestpractices.html#root-nested-changelogs">"root" and "nested" format</a> using the <MadCap:xref href="include.html">include</MadCap:xref> and <MadCap:xref href="includeall.html">includeAll</MadCap:xref> tags, you can use the <MadCap:xref href="../concepts/changelogs/attributes/runwith.htm">runWith</MadCap:xref>&#160;<MadCap:variable name="General.Param/Attribute" /> (PSQL, SQLPlus, or SQLCMD) to specify an executor that applies to every <MadCap:variable name="General.changeset" /> in every file wrapped in the <code>modifyChangeSets</code> tag. Since your nested <MadCap:variable name="General.changelog" />s inherit the executor specified in <code>modifyChangeSets</code>, you don't have to specify it on each individual <MadCap:variable name="General.changeset" /> you include.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">
            <MadCap:xref href="include.html">include</MadCap:xref> and <MadCap:xref href="includeall.html">includeAll</MadCap:xref> changetypes are available only in structured <MadCap:variable name="General.changelog" />s (XML, YAML, JSON). This is an existing limitation not introduced by <code>modifyChangeSets</code>.</p>
        <p>If you want to make an exception for a particular <MadCap:variable name="General.changeset" /> you're including, you can specify the default <MadCap:variable name="General.Liquibase" /> JDBC executor for that <MadCap:variable name="General.changeset" />. All other <MadCap:variable name="General.changeset" />s still run with the executor inherited from <code>modifyChangeSets</code>.</p>
        <p>You can still include additional files in your root <MadCap:variable name="General.changelog" /> outside of the <code>modifyChangeSets</code> tag. These files run with the <MadCap:variable name="General.Liquibase" /> JDBC executor.</p>
        <h2>Syntax</h2>
        <h3><MadCap:variable name="General.Param/Attr/Uppercased" />s</h3>
        <MadCap:snippetBlock src="../Z_Resources/Snippets/text/change-type-runwith-executors.flsnp" />
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 18pt;">XML example</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-xml"><MadCap:snippetText src="../Z_Resources/Snippets/code/liquibase-xsd-xml-changelog-closed.flsnp" />

    &lt;modifyChangeSets runWith="sqlplus"&gt;
        &lt;include file="my/nested/changelog.xml" /&gt;
        &lt;includeAll path="release200/changelogs/sql" /&gt;
    &lt;/modifyChangeSets&gt;

    &lt;include file="sql/another.sql"/&gt;
&lt;/databaseChangeLog&gt;</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 18pt;">YAML example</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-yaml">databaseChangeLog:
  - modifyChangeSets:
      runWith: sqlplus
      include:
        - file: my/nested/changelog.xml
      includeAll:
        - path: release200/changelogs/sql
  - include:
      file: sql/another.sql</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 18pt;">JSON example</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-json">{
   "databaseChangeLog": [
       {
           "modifyChangeSets": {
               "runWith": "sqlplus",
               "include": {"file": "my/nested/changelog.xml"},
               "includeAll": {"path": "release200/changelogs/sql"}
           },
           "include": {"file": "sql/another.sql"}
       }
   ]
}</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 18pt;">Example: Deploy a single raw SQL File</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <h3>XML</h3><pre xml:space="preserve"><code class="language-xml">&lt;modifyChangeSets runWith="psql"&gt;
	&lt;include file="my-psql-script.sql" relativeToChangelogFile="true"/&gt;
&lt;/modifyChangeSets&gt;</code></pre>
                <h3>JSON</h3><pre xml:space="preserve"><code class="language-json">{  
  "databaseChangeLog": [
  "modifyChangeSets":
    {
      "runWith": "psql",
      "include": {"file": "my-psql-script.psql"},
      "relativeToChangeLogFile": {"true"}
					
    }
 ]
}</code></pre>
                <h3>YAML</h3><pre xml:space="preserve"><code class="language-yaml">databaseChangeLog:
- modifyChangeSets:
  - runWith: psql
  - include:
	file:&#160;my-psql-script.sql
       relativeToChangelogFile:&#160;true</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 18pt;">Example: Deploy a directory of raw SQL Files</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <h3>XML</h3><pre xml:space="preserve"><code class="language-xml">&lt;modifyChangeSets runWith="psql"&gt;
	&lt;includeAll path="raw-psql-scripts-directory"/&gt;
&lt;/modifyChangeSets&gt;</code></pre>
                <h3>JSON</h3><pre xml:space="preserve"><code class="language-json">{  
  "databaseChangeLog": [
  "modifyChangeSets":
    {
      "runWith": "psql",
      "includeAll": {"path": "raw-psql-scripts-directory"}
					
    }
 ]
}</code></pre>
                <h3>YAML</h3><pre xml:space="preserve"><code class="language-yaml">databaseChangeLog:
- modifyChangeSets:
  - runWith: psql
  - includeAll:
       path:&#160;/raw-psql-scripts-directory</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <h2>Related links</h2>
        <ul>
            <li>
                <MadCap:xref href="../concepts/changelogs/attributes/use-psql-integration.htm">Use PSQL and runWith on PostgreSQL</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../concepts/changelogs/attributes/use-sqlcmd-integration.htm">Use SQLCMD and runWith on Microsoft SQL Server</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../concepts/changelogs/attributes/use-sql-plus-integration.htm">Use SQL Plus and runWith on Oracle</MadCap:xref>
                <ul>
                    <li>
                        <MadCap:xref href="../concepts/changelogs/attributes/use-sql-plus-oracle-proxy-user.htm">Use SQL Plus and Oracle Proxy User</MadCap:xref>
                    </li>
                </ul>
            </li>
            <li>
                <MadCap:xref href="../workflows/liquibase-community/modify-sql.html">Modifying generated SQL</MadCap:xref>
            </li>
        </ul>
    </body>
</html>
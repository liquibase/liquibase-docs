<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>Setting up a Liquibase Project with Maven and PostgreSQL </title>
        <meta rel="canonical" href="https://docs.liquibase.com/tools-integrations/maven/workflows/creating-liquibase-projects-with-maven-postgresql.html" />
        <meta name="description" content="The purpose of this document is to guide you through the process of creating a new Maven project with &#xD;&#xA;PostgreSQL on a Linux/Unix/Mac machine." />
    </head>
    <body>
        <h1 id="setting-up-a-liquibase-project-with-maven-and-postgresql">Setting up a <MadCap:variable name="General.Liquibase" /> project with Maven and PostgreSQL</h1>
        <p>The purpose of this document is to guide you through the process of creating a new Maven project with 
PostgreSQL on a Linux/Unix/Mac machine. In this tutorial, you will generate an example project and follow 
the instructions to apply and learn concepts associated with creating new <MadCap:variable name="General.Liquibase" /> projects within Maven.</p>
        <h2 id="prerequisites">Prerequisites</h2>
        <p>
            <MadCap:xref href="../installation-linux-unix-mac-windows-with-maven.html">Installing [%=General.Liquibase%] with Maven on Linux/Unix/Mac</MadCap:xref> if you have not done so already.</p>
        <h2 id="maven--liquibase-project-tutorial">Maven – <MadCap:variable name="General.Liquibase" /> project tutorial</h2>
        <p>To create a <MadCap:variable name="General.Liquibase" /> project within Maven that uses a PostgreSQL database, begin with the following steps:</p>
        <ol>
            <li>Create a new project folder and name it <code class="highlighter-rouge">MavenPostgreSQL</code>.</li>
            <li>Create a new plain-text file named <code class="highlighter-rouge">dbchangelog.xml</code> in the <code class="highlighter-rouge">MavenPostgeSQL</code> directory. This file will be your <MadCap:variable name="General.changelog" />, a file that will keep track of
 all the changes you make to your database structure. You can learn more about them on the <MadCap:xref href="../../../concepts/changelogs/working-with-changelogs.html">[%=General.changelog%]</MadCap:xref> page. 
 In this tutorial, you will manually add a single change. </li>
            <li>Open the <code class="highlighter-rouge">dbchangelog.xml</code> file and update it with the following text. This is an empty <MadCap:variable name="General.changelog" /> file.</li><pre xml:space="preserve"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
<MadCap:snippetText src="../../../Z_Resources/Snippets/code/liquibase-xsd-xml-changelog-closed.flsnp" />
&lt;/databaseChangeLog&gt;</code></pre>
            <li>Create another plain text file in the same directory and give it a name like <code class="highlighter-rouge">liquibase.properties</code>.</li>
            <li>Add the following properties to the newly created <MadCap:variable name="General.Liquibase" /> properties file:</li><pre xml:space="preserve"><code class="language-txt" data-lang="txt">changeLogFile: dbchangelog.xml
 url: jdbc:postgresql://localhost:5432/MYDATABASE
 username: postgres
 password: password</code></pre>
            <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">If you have a <MadCap:variable name="General.LBPro" /> license key, add the following property to the <MadCap:variable name="General.Liquibase" /> properties file:
 <code class="highlighter-rouge">liquibaseProLicenseKey: &lt;paste license key&gt;</code>.</p>
            <li>Add a <MadCap:variable name="General.changeset" /> to the <MadCap:variable name="General.changelog" />.
 In the <code>dbchangelog.xml</code> file, add a new <MadCap:variable name="General.changeset" />. This <MadCap:variable name="General.changeset" /> includes a change to create a table named <i>department</i>.</li><pre xml:space="preserve"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
 <MadCap:snippetText src="../../../Z_Resources/Snippets/code/liquibase-xsd-xml-changelog-closed.flsnp" />
     &lt;changeSet  id="1"  author="bob"&gt;  
         &lt;createTable  tableName="department"&gt;  
             &lt;column  name="id"  type="int"&gt;  
                 &lt;constraints  primaryKey="true"  nullable="false"/&gt;  
             &lt;/column&gt;  
             &lt;column  name="name"  type="varchar(50)"&gt;  
                 &lt;constraints  nullable="false"/&gt;  
             &lt;/column&gt;  
             &lt;column  name="active"  type="boolean"  defaultValueBoolean="true"/&gt;  
         &lt;/createTable&gt;  
    &lt;/changeSet&gt;  
 &lt;/databaseChangeLog&gt;</code></pre>
            <li>Create the Maven POM file for the project. Create a new plain-text file in the same directory named <code class="highlighter-rouge">pom.xml</code>.</li>
            <li>Edit the <code class="highlighter-rouge">pom.xml</code> file and update it to have the following contents:</li><pre xml:space="preserve"><code class="language-xml" data-lang="xml"> &lt;project  xmlns="http://maven.apache.org/POM/4.0.0"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
   xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;  
   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;  
 
   &lt;groupId&gt;com.my-group.app&lt;/groupId&gt;  
   &lt;artifactId&gt;LiquiPostgreSQL-app&lt;/artifactId&gt;  
   &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;  
   &lt;build&gt;  
       &lt;pluginManagement&gt;  
           &lt;plugins&gt;  
               &lt;plugin&gt;  
                   &lt;groupId&gt;org.liquibase&lt;/groupId&gt;  
                   &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;  
                   &lt;version&gt;3.8.0&lt;/version&gt;  
                   &lt;configuration&gt;  
                       &lt;propertyFile&gt;liquibase.properties&lt;/propertyFile&gt;  
                   &lt;/configuration&gt;  
                   &lt;dependencies&gt;  
                     &lt;dependency&gt;  
                         &lt;groupId&gt;postgresql&lt;/groupId&gt;  
                         &lt;artifactId&gt;postgresql&lt;/artifactId&gt;  
                         &lt;version&gt;9.1-901-1.jdbc4&lt;/version&gt;  
                     &lt;/dependency&gt;  
                 &lt;/dependencies&gt;  
               &lt;/plugin&gt;  
           &lt;/plugins&gt;  
       &lt;/pluginManagement&gt;  
   &lt;/build&gt;  
 &lt;/project&gt;</code></pre>
        </ol>
        <ol start="9">
            <li>Open the command prompt and navigate to the <code class="highlighter-rouge">MavenPostgreSQL</code> directory.</li>
            <li>Run the following command: <code class="highlighter-rouge">mvn liquibase:update</code></li>
            <li>From a database UI Tool, for example: “pgAdmin” check your database changes under “MYDATABASE”.
 You should see a new “department” table added to the database.</li>
        </ol>
        <p>Also, you should see two more tables:</p>
        <ol>
            <li><MadCap:variable name="General.databasechangelog" /> - This table keeps a record of all the <MadCap:variable name="General.changeset" />s that have been deployed. The next time you run the <strong>update</strong> command, the 
<MadCap:variable name="General.changeset" />s in the <MadCap:variable name="General.changelog" />  will be compared with the <MadCap:variable name="General.databasechangelog" /> tracking table, and only the new <MadCap:variable name="General.changeset" />s not 
found in the <MadCap:variable name="General.databasechangelog" /> will be deployed. You will notice that a new row was created in that table with the <MadCap:variable name="General.changeset" /> 
information you have just deployed.</li>
            <li><MadCap:variable name="General.databasechangeloglock" /> - This table is used internally by <MadCap:variable name="General.Liquibase" /> to manage access to the <MadCap:variable name="General.changelog" />  table during deployment.</li>
        </ol>
    </body>
</html>
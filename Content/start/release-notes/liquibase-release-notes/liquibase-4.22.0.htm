<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/start/release-notes/liquibase-release-notes/liquibase-4.22.0.html" />
        <meta name="description" content="Liquibase 4.22.0 release notes." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <h1><MadCap:variable name="General.Liquibase" /> 4.22.0 Release Notes</h1>
        <p><b>Full Changelog:</b>&#160;<a href="https://github.com/liquibase/liquibase/compare/v4.21.1...v4.22.0">v4.21.1...v4.22.0</a> (May 11, 2023)</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">We have removed the 4.22.0 release of <MadCap:variable name="General.Liquibase" />. This version contains an updated algorithm for determining which changes <MadCap:variable name="General.Liquibase" /> needs to deploy to a database. In some situations, the conversion to this new algorithm could result in eligible changes not being deployed to a target database.<br /><br />Specifically, currently undeployed <MadCap:variable name="General.changeset" />s with the <code>runOnChange=true</code> attribute may not be deployed if they were present in the first execution of <MadCap:variable name="General.Liquibase" /> 4.22.0 against a given target database. If you have not upgraded to <MadCap:variable name="General.Liquibase" /> 4.22.0, you are not impacted by this issue, or if you do not rely on <code>runOnChange</code>&#160;<MadCap:variable name="General.changeset" />s which have changed before your upgrade.<br /><br />To remedy this issue, run the <code><MadCap:xref href="../../../commands/utility/clear-checksums.htm">clear-checksums</MadCap:xref></code> command, then revert to <MadCap:variable name="General.Liquibase" /> 4.21.1, and then run the <code><MadCap:xref href="../../../commands/utility/changelog-sync.htm">changelog-sync</MadCap:xref></code> command to recalculate the v8 checksums.</p>
        <p><MadCap:variable name="General.Liquibase" /> v4.22.0 is a major release.</p>
        <h3>Notable Changes</h3>
        <p>The checksum changes in <MadCap:variable name="General.Liquibase" /> version 4.22.0 a major change, which improves whitespace handling in views, procedures, <MadCap:variable name="General.LBPro" /> stored logic objects, and more. New checksums are silently recalculated upon the initial run of <MadCap:variable name="General.Liquibase" /> 4.22.0 or greater.</p>
        <p>No actions is required for the vast majority of users. However, for users who rely on the detection of a changed <MadCap:variable name="General.changeset" /> or have complex workflows, it is recommended that you run liquibase <code>clear-checksums</code> with your current version BEFORE your first operation using the new 4.22.0 version against a database. Learn more at <MadCap:xref href="../../../concepts/changelogs/changeset-checksums.htm">Changeset Checksums</MadCap:xref>.</p>
        <h3>API Breaking Changes </h3>
        <ul>
            <li>DAT-13285 - Fix CheckSum generation issues + improvement by @filipelautert in <a href="https://github.com/liquibase/liquibase/pull/3914">#3914</a></li>
        </ul>
        <h3>Enhancements</h3>
        <ul>
            <li>Improve <code>liquibase-core</code>&#160;<code>pom.xml</code> handling (DAT-14546) by @nvoxland in <a href="https://github.com/liquibase/liquibase/pull/4169">#4169</a></li>
            <li>DAT-14367 by @sayaliM0412 in <a href="https://github.com/liquibase/liquibase/pull/4186">#4186</a></li>
            <li>New test fixes by @wwillard7800 in <a href="https://github.com/liquibase/liquibase/pull/4199">#4199</a></li>
            <li>Update <code>release-published.yml</code> by @jnewton03 in <a href="https://github.com/liquibase/liquibase/pull/4206">#4206</a></li>
            <li>Adding support for Postgresql-generated columns. by @filipelautert in <a href="https://github.com/liquibase/liquibase/pull/4185">#4185</a></li>
            <li>update changelog to 4.22 by @suryaaki2 in <a href="https://github.com/liquibase/liquibase/pull/4231">#4231</a></li>
            <li><b>[Pro]</b> DAT-13972: add <code>rollback-on-error</code> ability and its MDC to <code>update-one-changeset</code> command by @StevenMassaro in <a href="https://github.com/liquibase/liquibase-pro/pull/934">liquibase/liquibase-pro#934</a></li>
            <li><b>[Pro]</b> update <code>pom.xml</code> by @sayaliM0412 in <a href="https://github.com/liquibase/liquibase-pro/pull/929">liquibase/liquibase-pro#929</a></li>
            <li><b>[Pro]</b> MDC for <code>update-testing-rollback</code> by @StevenMassaro in <a href="https://github.com/liquibase/liquibase-pro/pull/943">liquibase/liquibase-pro#943</a></li>
            <li><b>[Pro]</b> update pro key for test by @StevenMassaro in <a href="https://github.com/liquibase/liquibase-pro/pull/962">liquibase/liquibase-pro#962</a></li>
            <li><b>[Pro]</b> DAT-12568 pro license key automation by @jnewton03 in <a href="https://github.com/liquibase/liquibase-pro/pull/966">liquibase/liquibase-pro#966</a></li>
            <li><b>[Pro]</b> DAT- 13285:: Update stored logic checksum logic to match new OSS checksum logic for procedures by @MalloD12 in <a href="https://github.com/liquibase/liquibase-pro/pull/931">liquibase/liquibase-pro#931</a></li>
            <li><b>[Pro]</b> DAT-14674: add help test for pro side by @StevenMassaro in <a href="https://github.com/liquibase/liquibase-pro/pull/965">liquibase/liquibase-pro#965</a></li>
            <li><b>[Pro]</b> update pro xsd and schema to 4.22 by @suryaaki2 in <a href="https://github.com/liquibase/liquibase-pro/pull/971">liquibase/liquibase-pro#971</a></li>
        </ul>
        <h3>Security, Driver, and other updates</h3>
        <ul>
            <li>Bump <code>maven-surefire-plugin</code> from 2.22.2 to 3.0.0 by @filipelautert in <a href="https://github.com/liquibase/liquibase/pull/4113">#4113</a></li>
            <li>Bump <code>maven-enforcer-plugin</code> from 3.2.1 to 3.3.0 by @dependabot in <a href="https://github.com/liquibase/liquibase/pull/4081">#4081</a></li>
            <li>Bump <code>jacoco-maven-plugin</code> from 0.8.8 to 0.8.10 by @dependabot in <a href="https://github.com/liquibase/liquibase/pull/4174">#4174</a></li>
            <li>Bump <code>flatten-maven-plugin</code> from 1.3.0 to 1.4.1 by @dependabot in <a href="https://github.com/liquibase/liquibase/pull/4036">#4036</a></li>
            <li><b>[Pro]</b> Bump <code>logback-classic</code> from 1.4.6 to 1.4.7 by @dependabot in <a href="https://github.com/liquibase/liquibase-pro/pull/947">liquibase/liquibase-pro#947</a></li>
            <li><b>[Pro]</b> Bump <code>jackson-core</code> from 2.14.2 to 2.15.0 by @dependabot in <a href="https://github.com/liquibase/liquibase-pro/pull/949">liquibase/liquibase-pro#949</a></li>
            <li><b>[Pro]</b> Bump <code>jackson-annotations</code> from 2.14.2 to 2.15.0 by @dependabot in <a href="https://github.com/liquibase/liquibase-pro/pull/950">liquibase/liquibase-pro#950</a></li>
            <li><b>[Pro]</b> Bump <code>jackson-module-jaxb-annotations</code> from 2.14.2 to 2.15.0 by @dependabot in <a href="https://github.com/liquibase/liquibase-pro/pull/951">liquibase/liquibase-pro#951</a></li>
            <li><b>[Pro]</b> Bump <code>jackson-dataformat-yaml</code> from 2.14.2 to 2.15.0 by @dependabot in <a href="https://github.com/liquibase/liquibase-pro/pull/953">liquibase/liquibase-pro#953</a></li>
            <li><b>[Pro]</b> Bump <code>jacoco-maven-plugin</code> from 0.8.9 to 0.8.10 by @dependabot in <a href="https://github.com/liquibase/liquibase-pro/pull/955">liquibase/liquibase-pro#955</a></li>
        </ul>
        <h3>Fixes</h3>
        <ul>
            <li>Fixed <a href="https://github.com/liquibase/liquibase/issues/3487">#3487</a> Provide precision and scale for currency database datatype and H2. by @jccampanero in <a href="https://github.com/liquibase/liquibase/issues/4019">#4019</a></li>
            <li>Fix search path handle for PostgreSQL with JDBC connection with specified schema by @quonas in <a href="https://github.com/liquibase/liquibase/issues/4021">#4021</a></li>
            <li>Fixes undesired change to <code>CreateProcedureChange</code> checksum generation by @filipelautert in <a href="https://github.com/liquibase/liquibase/issues/4161">#4161</a></li>
            <li>Fixed <a href="https://github.com/liquibase/liquibase/issues/3722">#3722</a> auto-increment column starting with a custom value no longer works with H2 v1 by @quonas in <a href="https://github.com/liquibase/liquibase/issues/4013">#4013</a></li>
            <li>Fix <code>addDefaultValue</code> checksum calculation when providing schema name by @filipelautert in <a href="https://github.com/liquibase/liquibase/issues/4203">#4203</a></li>
            <li>Fix flaky Postgres tests by @abrackx in <a href="https://github.com/liquibase/liquibase/issues/4234">#4234</a></li>
            <li>Move <code>dbchangelog-4.21.xsd</code> to <code>liquibase-standard</code> by @nvoxland in <a href="https://github.com/liquibase/liquibase/issues/4176">#4176</a></li>
            <li>include <MadCap:variable name="General.changelog" /> file when running <code>status</code> command from <MadCap:variable name="General.Liquibase" /> class (DAT-14659) by @StevenMassaro in <a href="https://github.com/liquibase/liquibase/issues/4201">#4201</a></li>
            <li>Always use <code>LockService</code> from Factory when running command steps by @filipelautert in <a href="https://github.com/liquibase/liquibase/issues/4151">#4151</a></li>
            <li>SnowflakeDatabase allows catalog name in identifiers in <a href="https://github.com/liquibase/liquibase/issues/4092">#4092</a></li>
            <li>Change the case of <code>sys.extended_properties</code>. by @jccampanero in <a href="https://github.com/liquibase/liquibase/issues/4101">#4101</a></li>
            <li>Load properties from <code>defaults-file</code> fixing variable replacement for refactored commands by @filipelautert in <a href="https://github.com/liquibase/liquibase/issues/4204">#4204</a></li>
            <li>remove helper commands from help output (DAT-14674) by @StevenMassaro in <a href="https://github.com/liquibase/liquibase/issues/4207">#4207</a></li>
            <li><b>[Pro]</b> DAT-13953: fix integration name log message for native tools by @StevenMassaro in <a href="https://github.com/liquibase/liquibase-pro/pull/937">liquibase/liquibase-pro#937</a></li>
            <li><b>[Pro]</b> Fix tests because of output change from Postgres 9.6 to 15. by @filipelautert in <a href="https://github.com/liquibase/liquibase-pro/pull/970">liquibase/liquibase-pro#970</a></li>
            <li><b>[Pro]</b> DAT-14642 - Fix <code>Update-one-changeset</code> problem that shows up during checksum upgrade by @filipelautert in <a href="https://github.com/liquibase/liquibase-pro/pull/968">liquibase/liquibase-pro#968</a></li>
            <li><b>[Pro]</b> DAT-14177: add <code>changesetsRolledback</code> for failed <code>rollback-on-error</code> rollback by @StevenMassaro in <a href="https://github.com/liquibase/liquibase-pro/pull/932">liquibase/liquibase-pro#932</a></li>
        </ul>
        <h3>New Contributors</h3>
        <ul>
            <li>@sayaliM0412 made their first contribution in <a href="https://github.com/liquibase/liquibase-pro/pull/929">liquibase/liquibase-pro#929</a></li>
            <li>@MalloD12 made their first contribution in <a href="https://github.com/liquibase/liquibase-pro/pull/931">liquibase/liquibase-pro#931</a></li>
            <li>@jccampanero made their first contribution in <a href="https://github.com/liquibase/liquibase/issues/4019">#4019</a></li>
        </ul>
    </body>
</html>
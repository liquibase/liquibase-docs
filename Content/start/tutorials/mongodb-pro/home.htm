<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/start/tutorials/mongodb/home.html" />
        <meta name="description" content="This page describes the different ways to use MongoDB with Liquibase." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/images/icon-pro-top.flsnp" />
        <h1>Using Liquibase MongoDB Pro with MongoDB platforms</h1>
        <p>The Liquibase MongoDB Pro extension lets you use all the features of <MadCap:variable name="General.LBPro" /> with MongoDB, including <MadCap:xref href="../../../liquibase-pro/policy-checks/home.htm">Policy Checks</MadCap:xref>, <MadCap:xref href="../../../liquibase-pro/secrets-management/home.htm">Secrets Management</MadCap:xref>, and <MadCap:xref href="../../../liquibase-pro/observability/structured-logging.htm">[%=General.StructuredLogging%]</MadCap:xref>, as well as MongoDB Pro extension-only commands and access to Drift reports. With this extension, we've also enabled the option to use native MongoDB shell scripts. These features enhance your database's security, reliability, and compatibility with other tools in your development pipeline.</p>
        <p><a href="https://mvnrepository.com/artifact/org.liquibase.ext/liquibase-commercial-mongodb">Download the latest version of the Liquibase MongoDB&#160;Pro&#160;Extension here.</a>
        </p>
        <p>To use the community-maintained Liquibase MongoDB extension, see <a href="https://contribute.liquibase.com/extensions-integrations/directory/database-tutorials/mongodb/">Contributors Docs:&#160;MongoDB Extension</a>.</p>
        <p>Using Liquibase with MongoDB is similar to using it with other databases. You still track changes within <MadCap:variable name="General.changeset" />s in <MadCap:variable name="General.changelog" />s, and use commands such as <code><MadCap:xref href="../../../commands/update/update.html">update</MadCap:xref></code> and <code><MadCap:xref href="../../../commands/rollback/rollback.htm">rollback</MadCap:xref></code> to deploy changes and manage your database. However, because MongoDB&#160;does not use SQL, you cannot use SQL&#160;<MadCap:variable name="General.changelog" />s or Liquibase commands that generate SQL&#160;output.</p>
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/text/database-tutorials/database-mongodb-changelog-formats.flsnp" />
        <p>To learn how to specify changes in each format, see <MadCap:xref href="../../../liquibase-pro/native-executors/mongodb-mongosh.htm">Use Native Executors with MongoDB Pro</MadCap:xref>.</p>
        <h2>Supported databases</h2>
        <p>You can use the Liquibase Pro MongoDB&#160;extension with several MongoDB databases, including: </p>
        <ul>
            <li>MongoDB&#160;Atlas</li>
            <li>MongoDB&#160;Server for Community and Enterprise </li>
            <li>Amazon DocumentDB</li>
        </ul>
        <h2>Get started with the Liquibase MongoDB Pro Extension</h2>
        <ol>
            <li>
                <p><a href="https://mvnrepository.com/artifact/org.liquibase.ext/liquibase-commercial-mongodb">Download the latest version of the Liquibase MongoDB&#160;Pro&#160;Extension here.</a>
                </p>
            </li>
            <li>
                <p>The Liquibase MongoDB Pro extension requires a Liquibase Pro license. If you haven't already done so, apply your Liquibase Pro license key. </p>
                <p>For more information about applying your license key, see <MadCap:xref href="../../../liquibase-pro/license-key.htm">How to Apply Your [%=General.LBPro%] License Key.</MadCap:xref></p>
            </li>
            <li>
                <p>Configure the Liquibase MongoDB Pro extension with your installation of MongoDB, using one of the following tutorials.</p>
            </li>
        </ol>
        <ul>
            <li>
                <MadCap:xref href="mongodb-atlas.htm">Using [%=General.Liquibase%] MongoDB Pro with MongoDB Atlas</MadCap:xref>: multi-cloud database service to manage databases on demand</li>
            <li>
                <MadCap:xref href="mongodb-community-enterprise-server.htm">Using [%=General.Liquibase%] MongoDB Pro with MongoDB Community and Enterprise Server</MadCap:xref>: fully-featured MongoDB products for small or large-scale development</li>
            <li>
                <MadCap:xref href="amazon-documentdb.htm">Using [%=General.Liquibase%] MongoDB Pro with Amazon DocumentDB</MadCap:xref>: use MongoDB functionality through a clone, Amazon DocumentDB</li>
        </ul>
        <h2>Features</h2>
        <p>The MongoDB&#160;Pro extension supports all the features of Liquibase that are supported in the <a href="https://contribute.liquibase.com/extensions-integrations/directory/database-tutorials/mongodb/">MongoDB Open Source extension</a>. In addition, MongoDB&#160;Pro lets you use <MadCap:variable name="General.LBPro" /> features including:</p>
        <ul>
            <li>
                <MadCap:xref href="../../../liquibase-pro/policy-checks/home.htm">Policy Checks</MadCap:xref>: automatically analyze your <MadCap:variable name="General.changelog" />s for desired format and behavior to increase deployment success rates and uphold security best practices</li>
            <li>
                <MadCap:xref href="../../../liquibase-pro/secrets-management/home.htm">Secrets Management</MadCap:xref>: keep your authentication data secure by integrating with third-party secrets vaults</li>
            <li>
                <MadCap:xref href="../../../liquibase-pro/observability/structured-logging.htm">[%=General.StructuredLogging%]</MadCap:xref>: improve your database observability by easily reading Liquibase data in your favorite analytics tool</li>
            <li>
                <MadCap:xref href="../../../liquibase-pro/observability/operation-reports.htm">Operation Reports</MadCap:xref>:&#160;generate reports of operations you perform on your database</li>
            <li><a href="../../../liquibase-pro/flow/home.htm">Flow Files</a>: create repeatable, portable, and platform-independent Liquibase workflows to run in any of your CI/CD&#160;tools</li>
            <li><a href="../../../liquibase-pro/remote-files/s3.htm">Remote file access</a>: centralize file management with AWS S3 to build a reusable repository of Liquibase files you can update and retrieve</li>
            <li><a href="../../../workflows/liquibase-community/using-rollback.htm">Targeted rollback</a>: avoid collateral damage by specifying which <MadCap:variable name="General.changeset" />s in your <MadCap:variable name="General.changelog" /> to undo</li>
        </ul>
        <h3><MadCap:variable name="General.changetypes" />s</h3>
        <p>You can use many of the standard Liquibase&#160;<MadCap:variable name="General.changetypes" />s in MongoDB Pro. MongoDB-specific <MadCap:variable name="General.changetypes" />s include <code><MadCap:xref href="../../../change-types/mongodb/mongo.htm">mongo</MadCap:xref></code> and <code><MadCap:xref href="../../../change-types/mongodb/mongo-file.htm">mongoFile</MadCap:xref></code>, which allow you to specify native Mongo scripts in XML, YAML, and JSON&#160;<MadCap:variable name="General.changelog" />s. They require the user to configure the <a href="../../../liquibase-pro/native-executors/home.htm">native executor</a>, Mongo Shell (<code>mongosh</code>), prior to use.</p>
        <p>For a list of unique <MadCap:variable name="General.changetypes" />s in the <MadCap:variable name="General.LBPro" /> extension for MongoDB, see <MadCap:xref href="../../../change-types/mongodb/home.htm">[%=General.Liquibase%]&#160;[%=General.changetypes%]s for MongoDB</MadCap:xref>. In addition to the Pro <MadCap:variable name="General.changetypes" />s, you can use several <MadCap:variable name="General.changetypes" />s from the <MadCap:variable name="General.LBCommunity" /> extension.</p>
        <h3>Supported parameters</h3>
        <p>To configure MongoDB-specific behavior, such as OIDC authentication for MongoDB&#160;Atlas, you can set the following Liquibase parameters in the <a href="../../../parameters/working-with-command-parameters.htm">CLI</a>, in <a href="../../../liquibase-pro/flow/home.htm">flow files</a>, in your <a href="../../../concepts/connections/creating-config-properties.html"><code><MadCap:variable name="General.liquiPropFile" /></code> file</a>, or as <a href="../../../concepts/connections/liquibase-environment-variables.htm">environment variables</a>:</p>
        <ul>
            <li><code><MadCap:xref href="../../../parameters/mongodb/mongodb-adjust-tracking-tables-on-startup.htm">mongodb-adjust-tracking-tables-on-startup</MadCap:xref></code>
            </li>
            <li><code><MadCap:xref href="../../../parameters/mongodb/mongodb-oidc-authentication-mechanism.htm">mongodb-oidc-authentication-mechanism</MadCap:xref></code>
            </li>
            <li><code><MadCap:xref href="../../../parameters/mongodb/mongodb-oidc-environment.htm">mongodb-oidc-environment</MadCap:xref></code>
            </li>
            <li><code><MadCap:xref href="../../../parameters/mongodb/mongodb-oidc-oidc-application-id-uri.htm">mongodb-oidc-oidc-application-id-uri</MadCap:xref></code>
            </li>
            <li><code><MadCap:xref href="../../../parameters/mongodb/mongodb-oidc-oidc-client-id.htm">mongodb-oidc-oidc-client-id</MadCap:xref></code>
            </li>
            <li><code><MadCap:xref href="../../../parameters/mongodb/mongodb-retry-writes.htm">mongodb-retry-writes</MadCap:xref></code>
            </li>
            <li><code><MadCap:xref href="../../../parameters/mongodb/mongodb-supports-validator.htm">mongodb-supports-validator</MadCap:xref></code>
            </li>
        </ul>
        <p>For more information, see <MadCap:xref href="../../../parameters/mongodb/home.htm">[%=General.Liquibase%] Parameters for MongoDB</MadCap:xref>.</p>
        <h3>Supported commands</h3>
        <p>MongoDB supports the following commands:</p>
        <ul>
            <li>Update commands, except those that generate SQL&#160;output. For example, <code><MadCap:xref href="../../../commands/update/update.html">update</MadCap:xref></code> and <code><MadCap:xref href="../../../commands/update/update-count.htm">update-count</MadCap:xref></code> are supported.</li>
            <li>Rollback commands, except those that generate SQL output. For example, <code><MadCap:xref href="../../../commands/rollback/rollback.htm">rollback</MadCap:xref></code> and <code><MadCap:xref href="../../../commands/rollback/rollback-one-changeset.html">rollback-one-changeset</MadCap:xref></code> are supported.</li>
            <li>
                <p>Database inspection commands, except <code>diff-changelog</code> and <code>generate-changelog</code>. For example, <code><MadCap:xref href="../../../commands/inspection/diff.htm">diff</MadCap:xref></code> and <code><MadCap:xref href="../../../commands/inspection/snapshot.html">snapshot</MadCap:xref></code> are supported. </p>
                <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">Since MongoDB doesn't have schema objects, Liquibase will return a placeholder schema object in output and in files which you can ignore. This is because our highest-level objects (ie. catalog, schema) all point to the database object in MongoDB. It is not indicative of an error or problem in your configuration or with the command.</p>
            </li>
            <li>Change tracking commands, except those that generate SQL output. For example, <code><MadCap:xref href="../../../commands/utility/changelog-sync.htm">changelog-sync</MadCap:xref></code>, <code><MadCap:xref href="../../../commands/change-tracking/status.htm">status</MadCap:xref></code>, and <code><MadCap:xref href="../../../commands/change-tracking/history.html">history</MadCap:xref></code> are supported.<ul><li>The <code><MadCap:xref href="../../../commands/change-tracking/connect.htm">connect</MadCap:xref></code> command is supported in MongoDB Pro 1.4.0+.</li></ul></li>
            <li>Policy checks commands. For example, <code><MadCap:xref href="../../../commands/policy-checks/subcommands/copy.htm">copy</MadCap:xref></code>, <code><MadCap:xref href="../../../commands/policy-checks/subcommands/show.htm">show</MadCap:xref></code>, and <code><MadCap:xref href="../../../commands/policy-checks/subcommands/run.htm">run</MadCap:xref></code> are supported.</li>
            <li>All other commands, unless otherwise specified in the <MadCap:xref href="#Limitati">Limitations</MadCap:xref> section.</li>
        </ul>
        <p>For more information, see <MadCap:xref href="../../../commands/home.htm">[%=General.Liquibase%] Commands</MadCap:xref>.</p>
        <h3>Supported operations reports</h3>
        <p>Drift Report-- If you're working in an environment that experiences database drift, Liquibase drift reports can alert you of the drift and show you the changes that need to be addressed. For more information about how drift reports work, see <MadCap:xref href="../../../liquibase-pro/observability/operation-reports-drift-report.htm">Drift Report</MadCap:xref>.</p>
        <p>The Drift report is the only report supported for use with the MongoDB Pro extension.</p>
        <h3>Supported policy checks</h3>
        <p> You can use <MadCap:variable name="General.changelog" />-scoped policy checks in MongoDB Pro. For example:</p>
        <ul>
            <li>Checks that focus on <MadCap:variable name="General.changeset" /> metadata, such as <MadCap:xref href="../../../liquibase-pro/policy-checks/checks/changelog-checks/rollback-required.htm">RollbackRequired</MadCap:xref> and <MadCap:xref href="../../../liquibase-pro/policy-checks/checks/changelog-checks/changeset-label-check.htm">ChangesetLabelCheck</MadCap:xref>.</li>
            <li>The generic regex-based check <MadCap:xref href="../../../liquibase-pro/policy-checks/checks/changelog-checks/sql-user-defined-pattern-check.htm">SqlUserDefinedPatternCheck</MadCap:xref>.<br /><p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">These policy checks only work if you have created your own from the regex template. Liquibase uses the <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/regex/Pattern.html">java.util.regex</a> engine to match regular expressions.</p></li>
        </ul>
        <p>Changelog-scoped policy checks are supported <b>as long as they are not SQL-specific or relational-specific</b>. The following is a full list of policy checks supported on MongoDB:</p>
        <ul>
            <li><code><MadCap:xref href="../../../liquibase-pro/policy-checks/checks/changelog-checks/changeset-comment-check.htm">ChangesetCommentCheck</MadCap:xref></code>
            </li>
            <li><code><MadCap:xref href="../../../liquibase-pro/policy-checks/checks/changelog-checks/changeset-context-check.htm">ChangesetContextCheck</MadCap:xref></code>
            </li>
            <li><code><MadCap:xref href="../../../liquibase-pro/policy-checks/checks/changelog-checks/changeset-label-check.htm">ChangesetLabelCheck</MadCap:xref></code>
            </li>
            <li><code><MadCap:xref href="../../../liquibase-pro/policy-checks/checks/changelog-checks/rollback-required.htm">RollbackRequired</MadCap:xref></code>
            </li>
            <li><code><MadCap:xref href="../../../liquibase-pro/policy-checks/checks/changelog-checks/require-changeset-id-is-uuid.htm">RequireChangesetIDisUUID</MadCap:xref></code>
            </li>
            <li><code><MadCap:xref href="../../../liquibase-pro/policy-checks/checks/changelog-checks/sql-user-defined-pattern-check.htm">SqlUserDefinedPatternCheck</MadCap:xref></code>
            </li>
        </ul>
        <h2><a name="Limitati"></a>Limitations</h2>
        <ul>
            <li>The child MongoDB scripts referenced by the <code>include</code> and <code>includeAll</code> tags must contain the <MadCap:variable name="General.changeset" /> decoration and the following minimum <MadCap:variable name="General.changeset" /> metadata, <code>author:id</code> and <code>runWith:mongosh</code>.</li><pre xml:space="preserve"><code class="language-text">// liquibase formatted mongodb
// changeset authorname:1 runWith:mongosh</code></pre>
            <li>Liquibase&#160;<a href="../../../concepts/changelogs/preconditions.html">preconditions</a> are not supported.</li>
            <li>The <code><MadCap:xref href="../../../change-types/modifychangesets.htm">modifyChangeSets</MadCap:xref></code> tag is not supported.</li>
            <li>MongoDB is a NoSQL database, so you cannot use any commands that generate SQL output (such as <code><MadCap:xref href="../../../commands/update/update-sql.htm">update-sql</MadCap:xref></code> and <code><MadCap:xref href="../../../commands/utility/changelog-sync-sql.htm">changelog-sync-sql</MadCap:xref></code>).  Learn more <MadCap:xref href="../../../commands/home.htm">[%=General.Liquibase%] Commands</MadCap:xref> here.</li>
            <li><MadCap:variable name="General.LBPro" /> policy checks have limited support.  <a href="../../../liquibase-pro/policy-checks/checks/database-checks/home.htm">Database-scoped policy checks</a> are not supported because they are database-specific.</li>
            <li>OIDC&#160;authentication is supported only for MongoDB&#160;Atlas. </li>
            <li>LDAP authentication is supported for MongoDB Server.</li>
            <li> Kerberos authentication is not supported for any MongoDB&#160;platform. Learn more about MongoDB&#160;authentication here: <a href="https://www.mongodb.com/docs/v6.0/core/authentication/">authentication</a>.</li>
        </ul>
        <h2><a name="Verified"></a>Verified database versions</h2>
        <table style="width: 100%;margin-left: auto;margin-right: auto;">
            <col style="width: 272px;" />
            <col />
            <col />
            <col />
            <col />
            <thead>
                <tr>
                    <th>Liquibase MongoDB Pro extension version</th>
                    <th><MadCap:variable name="General.LBPro" /> version required</th>
                    <th>MongoDB versions verified</th>
                    <th>MongoDB Shell versions verified</th>
                    <th>Authentication</th>
                </tr>
            </thead>
            <tbody>
                <tr MadCap:conditions="">
                    <td>1.6.0</td>
                    <td>4.32.0+</td>
                    <td>&#160; &#160;</td>
                    <td rowspan="5">&#160; &#160;<ul><li>1.6.x</li><li>1.7.x</li><li>1.8.x (recommended)</li></ul></td>
                    <td rowspan="2">&#160;<ul><li>SCRAM</li><li>x.509</li><li>AWS&#160;IAM</li><li>OIDC</li></ul></td>
                </tr>
                <tr>
                    <td>1.5.0</td>
                    <td>4.30.0+</td>
                    <td rowspan="4">
                        <ul>
                            <li>MongoDB 5.x, 6.x, 7.x, 8.x</li>
                            <li>MongoDB Atlas 5, 6, 7, 8x</li>
                            <li>AWS DocumentDB 4, 5</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>1.4.1</td>
                    <td rowspan="2">4.28.0+</td>
                    <td rowspan="6">
                        <ul>
                            <li>SCRAM</li>
                            <li>x.509</li>
                            <li>AWS&#160;IAM</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>1.4.0</td>
                </tr>
                <tr>
                    <td>1.3.0</td>
                    <td>4.24.0+</td>
                </tr>
                <tr>
                    <td>1.2.0</td>
                    <td>4.23.1+</td>
                    <td rowspan="2">
                        <ul>
                            <li>MongoDB 5.x, 6.x</li>
                            <li>MongoDB Atlas 5, 6</li>
                            <li>AWS DocumentDB 4</li>
                        </ul>
                    </td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td>1.1.x</td>
                    <td>4.23.0+</td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td>1.0.0</td>
                    <td>4.20.0–4.21.1</td>
                    <td>
                        <ul>
                            <li>MongoDB 5.x, 6.x</li>
                            <li>MongoDB Atlas 5 and 6</li>
                        </ul>
                    </td>
                    <td>&#160;</td>
                </tr>
            </tbody>
        </table>
        <h2>Change history</h2>
        <table>
            <col style="width: 600px;" />
            <col style="width: 600px;" />
            <thead>
                <tr>
                    <th>Change</th>
                    <th>Version</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <p>Introduced diff, snapshot, include, includeAll, and Drift Report support. </p>
                    </td>
                    <td>Liquibase Pro 4.32.0+ and MongoDB Pro extension version 1.6.0+</td>
                </tr>
            </tbody>
        </table>
        <h2>Related links</h2>
        <ul>
            <li>
                <MadCap:xref href="config-user-roles.htm">Configure User Roles for MongoDB</MadCap:xref>
            </li>
            <li><a href="https://contribute.liquibase.com/extensions-integrations/directory/database-tutorials/mongodb/">MongoDB for OSS documentation</a>
            </li>
        </ul>
    </body>
</html>
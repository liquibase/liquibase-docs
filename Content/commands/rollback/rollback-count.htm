<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/commands/rollback/rollback-count.html" />
        <meta name="description" content="Reference information and use cases for the rollback-count &lt;value&gt; command. The rollback-count &lt;value&gt; command reverts a specified number of changesets, where &lt;value&gt; is the number of changesets you want to revert sequentially on your database." />
    </head>
    <body>
        <h1>rollback-count</h1>
        <p>The <code>rollback-count</code> command sequentially reverts a specified number of <MadCap:variable name="General.changeset" />s on your database.</p>
        <h2>Uses</h2>
        <p>Use the <code>rollback-count</code> command when you want to roll back changes sequentially, starting with the most recent changes and working backward until the count you specify is reached.</p>
        <p>The image below shows three <MadCap:variable name="General.changeset" />s: a, b, and c. Running the command <code>rollback-count --count=3</code> rolls back the last three <MadCap:variable name="General.changeset" />s.</p>
        <p style="text-align: center;">
            <img src="../../Z_Resources/Images/Screenshots/commands/rollbackCount.png" />
        </p>
        <p>If you want to revert <MadCap:variable name="General.changeset" /> a without having to roll back <MadCap:variable name="General.changeset" /> b and <MadCap:variable name="General.changeset" /> c as well, you can do it with the help of the <MadCap:xref href="rollback-one-changeset.html">rollback-one-changeset</MadCap:xref> command.</p>
        <h2>Impact</h2>
        <p>Using <code>rollback-count</code> comes with the risk of removing all changes depending on the number you specify. Also, when you roll back any change, the row associated with that change is deleted from the <MadCap:variable name="General.databasechangelog" /> table.</p>
        <p class="warning" MadCap:autonum="&lt;b&gt;Warning: &lt;/b&gt;"><code>rollback-count</code> increments based on <MadCap:variable name="General.changeset" />s in the <MadCap:variable name="General.changelog" />, not records in the <MadCap:variable name="General.databasechangelog" /> table. If you manually delete <MadCap:variable name="General.changeset" />s from your <MadCap:variable name="General.changelog" />, <code>rollback-count</code> does not restore those changes. For best practices on maintaining large <MadCap:variable name="General.changelog" />s, see <MadCap:xref href="../../workflows/liquibase-community/trimming-changelogs.html">Trimming [%=General.changelog%] files</MadCap:xref>.</p>
        <p><b>Look for unintended consequences before using this command.</b>
        </p>
        <p>The best practice is to run the <MadCap:xref href="rollback-count-sql.htm">rollback-count-sql</MadCap:xref> command helper command because it allows you to inspect the <code>rollback-count</code> SQL and search for any potential mistakes before you execute the <code>rollback-count</code> command.</p>
        <h2>Syntax</h2>
        <p>Before running the <code>rollback-count</code> command, you can run the <MadCap:xref href="../change-tracking/history.html">history</MadCap:xref> command to see all your previously executed changes.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><code>rollback-count</code> works from the bottom of the list toward the top.</p>
        <p>To run the <code>rollback-count</code> command, specify the driver, classpath, and URL in the <MadCap:variable name="General.Liquibase" /> properties file. For more information, see <MadCap:xref href="../../concepts/connections/creating-config-properties.html">Create and Configure a [%=General.liquiPropFile%] File</MadCap:xref>.  You can also specify these in your command line.</p>
        <p>Then run the <code>rollback-count</code> command:</p><pre><code class="language-text">liquibase rollback-count --count=2 --changelog-file=example-changelog.xml</code></pre>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/note/command-attribute-positional-count.flsnp" />
        <h2>Command arguments</h2>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/note/command-parameter-kebab.flsnp" />
        <table>
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Definition</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>--changelog-file</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-changelog-file.flsnp" MadCap:conditionTagExpression="include[command-changelog-file.root-changelog]" />
                    </td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>--count</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-count.flsnp" />
                    </td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>--url</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-url.flsnp" />
                    </td>
                    <td><b>Required</b>
                    </td>
                </tr>
                <tr>
                    <td><code>--change-exec-listener-class</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-change-exec-listener-class.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--change-exec-listener-properties-file</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-change-exec-listener-properties-file.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--contexts</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-contexts.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--default-catalog-name</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-default-catalog-name.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--default-schema-name</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-default-schema-name.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--driver</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-global-driver.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--driver-properties-file</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-global-driver-properties-file.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--label-filter</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-label-filter.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--password</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-password.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--rollback-script</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-rollback-script.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--username</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-username.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <p>* <MadCap:variable name="General.Liquibase" /> will check nested <MadCap:variable name="General.changelog" /><i>s </i>for definitions of the <MadCap:variable name="General.changeset" />s to rollback</p>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/note/command-username-password.flsnp" />
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>Output</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-text">Liquibase Community 4.9.1 by Liquibase
Rolling Back Changeset: example-changelog.sql::3::other.dev
Rolling Back Changeset: example-changelog.sql::2::your.name
Rolling Back Changeset: example-changelog.sql::1::your.name

----------------------------------------------------------------------
View a report of this operation at https://hub.liquibase.com/r/CHqKuCjWFc
* IMPORTANT: New users of Hub first need to Sign In to your account
with the one-time password sent to your email, which also serves as
your username.
----------------------------------------------------------------------
Liquibase command 'rollback-count' was executed successfully.</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
    </body>
</html>
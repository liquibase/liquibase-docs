<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/commands/rollback/rollback-count.html" />
        <meta name="description" content="Reference information and use cases for the rollback-count &lt;value&gt; command. The rollback-count &lt;value&gt; command reverts a specified number of changesets, where &lt;value&gt; is the number of changesets you want to revert sequentially on your database." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <h1>rollback-count</h1>
        <p>The <code>rollback-count</code> command sequentially reverts a specified number of <MadCap:variable name="General.changeset" />s on your database.</p>
        <h2>Uses</h2>
        <p>Use the <code>rollback-count</code> command when you want to roll back changes sequentially, starting with the most recent changes and working backward until the count you specify is reached.</p>
        <p>The image below shows three <MadCap:variable name="General.changeset" />s: a, b, and c. Running the command <code>rollback-count --count=3</code> rolls back the last three <MadCap:variable name="General.changeset" />s.</p>
        <p style="text-align: center;">
            <img src="../../Z_Resources/Images/Screenshots/commands/rollbackCount.png" />
        </p>
        <p>If you want to revert <MadCap:variable name="General.changeset" /> a without having to roll back <MadCap:variable name="General.changeset" /> b and <MadCap:variable name="General.changeset" /> c as well, you can do it with the help of the <MadCap:xref href="rollback-one-changeset.html">rollback-one-changeset</MadCap:xref> command.</p>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-reports-rollback.flsnp" />
        <h2>Impact</h2>
        <p>Using <code>rollback-count</code> comes with the risk of removing all changes depending on the number you specify. Also, when you roll back any change, the row associated with that change is deleted from the <MadCap:variable name="General.databasechangelog" /> table.</p>
        <p class="warning" MadCap:autonum="&lt;b&gt;Warning: &lt;/b&gt;"><code>rollback-count</code> increments based on <MadCap:variable name="General.changeset" />s in the <MadCap:variable name="General.changelog" />, not records in the <MadCap:variable name="General.databasechangelog" /> table. If you manually delete <MadCap:variable name="General.changeset" />s from your <MadCap:variable name="General.changelog" />, <code>rollback-count</code> does not restore those changes. For best practices on maintaining large <MadCap:variable name="General.changelog" />s, see <MadCap:xref href="../../workflows/liquibase-community/trimming-changelogs.html">Trimming [%=General.changelog%] files</MadCap:xref>.</p>
        <p><b>Look for unintended consequences before using this command.</b>
        </p>
        <p>The best practice is to run the <MadCap:xref href="rollback-count-sql.htm">rollback-count-sql</MadCap:xref> command helper command because it allows you to inspect the <code>rollback-count</code> SQL and search for any potential mistakes before you execute the <code>rollback-count</code> command.</p>
        <h2>Syntax</h2>
        <p>Before running the <code>rollback-count</code> command, you can run the <MadCap:xref href="../change-tracking/history.html">history</MadCap:xref> command to see all your previously executed changes.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><code>rollback-count</code> works from the bottom of the list toward the top.</p>
        <p>To run the <code>rollback-count</code> command, specify the driver, classpath, and URL in the <MadCap:variable name="General.Liquibase" /> properties file. For more information, see <MadCap:xref href="../../concepts/connections/creating-config-properties.html">Create and Configure a [%=General.liquiPropFile%] File</MadCap:xref>.  You can also specify these in your command line.</p>
        <p>Then run the <code>rollback-count</code> command:</p><pre><code class="language-text">liquibase rollback-count --count=2 --changelog-file=example-changelog.xml</code></pre>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/note/command-attribute-positional-count.flsnp" />
        <h2>Command parameters</h2>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h3">
                <li class="js-tablist__item"><a href="#cli" id="label_cli" class="js-tablist__link">CLI</a>
                </li>
                <li class="js-tablist__item"><a href="#flow" id="label_flow" class="js-tablist__link">Flow</a>
                </li>
                <li class="js-tablist__item"><a href="#properties_file" id="label_properties_file" class="js-tablist__link"><code>liquibase.properties</code></a>
                </li>
                <li class="js-tablist__item"><a href="#java_opts" id="label_java_opts" class="js-tablist__link"><code>JAVA_OPTS</code></a>
                </li>
                <li class="js-tablist__item"><a href="#envar" id="label_envar" class="js-tablist__link">Environment variable</a>
                </li>
            </ul>
            <div id="cli" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-rollback-count.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.cli]" />
            </div>
            <div id="flow" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-rollback-count.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.flow]" />
            </div>
            <div id="properties_file" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-rollback-count.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.properties-file]" />
            </div>
            <div id="java_opts" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-rollback-count.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.java-opts]" />
            </div>
            <div id="envar" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-rollback-count.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.envar]" />
            </div>
        </div>
        <p>* <MadCap:variable name="General.Liquibase" /> will check nested <MadCap:variable name="General.changelog" /><i>s </i>for definitions of the <MadCap:variable name="General.changeset" />s to rollback</p>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/note/command-username-password.flsnp" />
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>Output</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-text">Liquibase Community 4.9.1 by Liquibase
Rolling Back Changeset: example-changelog.sql::3::other.dev
Rolling Back Changeset: example-changelog.sql::2::your.name
Rolling Back Changeset: example-changelog.sql::1::your.name

Liquibase command 'rollback-count' was executed successfully.</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
    </body>
</html>
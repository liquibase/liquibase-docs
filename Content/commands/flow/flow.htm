<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/commands/flow/flow.html" />
        <meta name="description" content="Reference information and use cases for the flow command." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <h1><code>flow</code>
        </h1>
        <p><code class="language-text">flow</code> lets you run a series of commands contained in one or more stages, as configured in a <MadCap:variable name="General.Liquibase" /> <a href="home.htm">flow file</a>. This command is available in <MadCap:variable name="General.Liquibase" /> 4.15.0 and later.</p>
        <h2>Uses</h2>
        <p><MadCap:variable name="General.Liquibase" /> flow files let you create portable, platform-independent <MadCap:variable name="General.Liquibase" /> workflows that can run anywhere without modification. This includes Jenkins, GitHub actions, a developers desktop, or any other CI/CD support tool.</p>
        <p>You can use the <code class="language-text">flow</code> command to run your flow file and execute many other commands all in one place. For more information, see <MadCap:xref href="home.htm">[%=General.Liquibase%] Flow Files</MadCap:xref>.</p>
        <h2>Syntax</h2>
        <p>To run the <code class="language-text">flow</code> command, specify the driver, classpath, and URL in <MadCap:variable name="General.Liquibase" /> properties file. For more information, see <MadCap:xref href="../../concepts/connections/creating-config-properties.html">Create and Configure a [%=General.liquiPropFile%] File</MadCap:xref>. You can also specify these properties in your command line.</p>
        <p>Then run the <code class="language-text">flow</code> command:</p><pre><code class="language-text">liquibase flow</code></pre>
        <h2>Global arguments</h2>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/note/command-parameter-kebab.flsnp" />
        <table style="width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Definition</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>--license-key</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-global-license-key.flsnp" />
                    </td>
                    <td><b>Required</b>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2>Command arguments</h2>
        <table style="width: 100%;">
            <thead>
                <tr>
                    <th><MadCap:variable name="General.Param/Attr/Uppercased" />
                    </th>
                    <th>Definition</th>
                    <th>Requirement</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>--flow-file</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-flow-file.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--flow-file-strict-parsing=&lt;true|false&gt;</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-flow-file-strict-parsing.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--flow-shell-interpreter</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-flow-shell-interpreter.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
                <tr>
                    <td><code>--flow-shell-keep-temp-files=&lt;true|false&gt;</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/attributes/cli/cli-cmd-flow-shell-keep-temp-files.flsnp" />
                    </td>
                    <td>Optional</td>
                </tr>
            </tbody>
        </table>
        <h2>Output</h2>
        <p>In this example, we are running the default flow file that comes pre-installed with <MadCap:variable name="General.Liquibase" />.</p>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 14.0pt;">Example flow file</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-yaml">##########           LIQUIBASE FLOWFILE                ##########
##########  learn more http://docs.liquibase.com/flow  ##########

## Note: Any command which fails in any stage below result in the command stopping, and endStage being run.
## A flow file can have one or more stages, each with multiple "actions", 
## or your flow file can have multiple stages with fewer actions in each stage.
stages:


  ## The first stage of actions. 
  Default:
        
    actions:
      #
      # Quality Checks for changelog
      #
      - type: liquibase
        command: checks run
        cmdArgs: {checks-scope: changelog}
      #
      # Run the update
      #
      - type: liquibase
        command: update
          
      #
      # Quality Checks for database
      #
      - type: liquibase
        command: checks run
        cmdArgs: {checks-scope: database}


## The endStage ALWAYS RUNS. 
## So put actions here which you desire to perform whether previous stages' actions succeed or fail.
## If you do not want any actions to ALWAYS RUN, simply delete the endStage from your flow file.

endStage:
  actions:
    - type: liquibase
      command: history</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 14.0pt;">Example output</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-text">Flow file liquibase.flowfile.yaml is valid.
******************************************************************************
*
* Executing Stage: Default
*
******************************************************************************

******************************************************************************
*
* Executing 'liquibase' checks run
*
******************************************************************************

Executing Quality Checks against example-changelog.xml

Executing all changelog checks because a valid license key was found!

WARNING: No database checks were run. Make sure the checks-scope property includes "database" to run database checks. In the CLI set --checks-scope="changelog,database" or set an environment variable LIQUIBASE_COMMAND_CHECKS_SCOPE=database. Learn more at https://docs.liquibase.com/quality-checks

INFO: Checks executed against SQL generated by H2 at jdbc:h2:tcp://localhost:9090/mem:dev.
Checks-settings File:      liquibase.checks-settings.conf
=====================================================================================
Changesets Validated: in example-changelog.xml
  ID: 1; Author: your.name
  ID: 2; Author: your.name
  ID: 3; Author: other.dev

Checks run against each changeset:
  Changesets Must Have a Comment Assigned (Short names: ChangesetCommentCheck)
  Changesets Must Have a Context Assigned (Short names: ChangesetContextCheck)
  Changesets Must Have a Label Assigned (Short names: ChangesetLabelCheck)
  Check Table Column Count (Short names: TableColumnLimit)
  One Change Per Changeset (Short names: OneChangePerChangeset)
  Require primary key when creating table (Short names: PrimaryKeyOnCreateTable)
  Rollback Required for Changeset (Short names: RollbackRequired)
  Warn on Detection of 'SELECT *' (Short names: SqlSelectStarWarn)
  Warn on Detection of 'USE DATABASE' statements (Short names: WarnOnUseDatabase)
  Warn on Use of User Defined ChangeTypes (Short names: DetectChangeType)
  Warn when 'DROP COLUMN' detected (Short names: ChangeDropColumnWarn)
  Warn when 'DROP TABLE' detected (Short names: ChangeDropTableWarn)
Warn when 'MODIFY &lt;column&gt;' detected (Short names: ModifyDataTypeWarn)

	Changelogs Checks Skipped Due to unsupported changeset type for this check:
	Warn on Detection of 'GRANT' Statements (Short names: SqlGrantWarn) skipped for:
	1:your.name,
	2:your.name,
	3:other.dev
	Warn on Detection of 'REVOKE' Statements (Short names: SqlRevokeWarn) skipped for:
	1:your.name,
	2:your.name,
	3:other.dev
	Warn on Detection of grant that contains 'WITH ADMIN OPTION' (Short names: SqlGrantAdminWarn) skipped for:
	1:your.name,
	2:your.name,
	3:other.dev
	Warn on Detection of grant that contains 'WITH GRANT OPTION' (Short names: SqlGrantOptionWarn) skipped for:
	1:your.name,
	2:your.name,
	3:other.dev
	Warn when 'TRUNCATE TABLE' detected (Short names: ChangeTruncateTableWarn) skipped for:
	1:your.name,
	2:your.name,
	3:other.dev

	INFO: Customize this output with the 'checks-output' property. See list of options with 'liquibase checks run --help' or https://docs.liquibase.com/quality-checks
	INFO: The return code of all SQL Parser failures can be customized by setting the --sql-parser-fail-severity/LIQUIBASE_COMMAND_CHECKS_RUN_SQL_PARSER_FAIL_SEVERITY property, including setting it to '0' to prevent job interruptions. Learn more at https://docs.liquibase.com/quality-checks
	Liquibase command 'checks run' was executed successfully.

	******************************************************************************
	*
	* Executing 'liquibase' update
	*
	******************************************************************************

	Running Changeset: example-changelog.xml::1::your.name
	Running Changeset: example-changelog.xml::2::your.name
	Running Changeset: example-changelog.xml::3::other.dev

	UPDATE SUMMARY
	Run:                          3
	Previously run:               0
	Filtered out:                 0
	Failed deployment:            0
	-------------------------------
	Total change sets:            3

	Liquibase: Update has been successful. Rows affected: 3
	Liquibase command 'update' was executed successfully.

	******************************************************************************
	*
	* Executing 'liquibase' checks run
	*
	******************************************************************************

	Executing Quality Checks against database jdbc:h2:tcp://localhost:9090/mem:dev

	Executing all database checks because a valid license key was found!

	INFO This command might not yet capture Liquibase Pro additional object types on h2
	Checks-settings File:      liquibase.checks-settings.conf
	=====================================================================================
	Database objects Validated:
	Catalog             : 1
	Column              : 11
	Index               : 2
	PrimaryKey          : 2
	Schema              : 1
	Table               : 2
	To increase details set the --verbose property

	Checks run against database jdbc:h2:tcp://localhost:9090/mem:dev:
	Check Table Column Count (Short names: TableColumnLimit)
	Table must have an index (Short names: CheckTablesForIndex)

	INFO: Customize this output with the 'checks-output' property. See list of options with 'liquibase checks run --help' or https://docs.liquibase.com/quality-checks
	INFO: The return code of all SQL Parser failures can be customized by setting the --sql-parser-fail-severity/LIQUIBASE_COMMAND_CHECKS_RUN_SQL_PARSER_FAIL_SEVERITY property, including setting it to '0' to prevent job interruptions. Learn more at https://docs.liquibase.com/quality-checks
	Liquibase command 'checks run' was executed successfully.

	******************************************************************************
	*
	* Executing Stage: endStage
	*
	******************************************************************************

	******************************************************************************
	*
	* Executing 'liquibase' history
	*
	******************************************************************************

	Liquibase History for jdbc:h2:tcp://localhost:9090/mem:dev

	+---------------+------------------+-----------------------+------------------+--------------+-----+
	| Deployment ID | Update Date      | Changelog Path        | Changeset Author | Changeset ID | Tag |
	+---------------+------------------+-----------------------+------------------+--------------+-----+
	| 9150144810    | 2/28/24, 2:55 PM | example-changelog.xml | your.name        | 1            |     |
	+---------------+------------------+-----------------------+------------------+--------------+-----+
	| 9150144810    | 2/28/24, 2:55 PM | example-changelog.xml | your.name        | 2            |     |
	+---------------+------------------+-----------------------+------------------+--------------+-----+
	| 9150144810    | 2/28/24, 2:55 PM | example-changelog.xml | other.dev        | 3            |     |
	+---------------+------------------+-----------------------+------------------+--------------+-----+

	Liquibase command 'history' was executed successfully.

	Liquibase command 'flow' was executed successfully.</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <h2>Related videos</h2>
        <h3>Learn more about Flow in <MadCap:variable name="General.LBPro" /></h3><iframe width="420px" height="315px" src="https://www.youtube.com/embed/QKV_yiRMHjw" class="center"></iframe>
        <h3>Learn how to use Flow files with S3</h3><iframe width="420" height="315" src="https://www.youtube.com/embed/nOv2YK8rfqI" class="center"></iframe>
        <h2>Related links</h2>
        <ul>
            <li>
                <MadCap:xref href="home.htm">[%=General.Liquibase%] Flow Files</MadCap:xref>
            </li>
            <li><code><MadCap:xref href="flow-validate.htm">flow validate</MadCap:xref></code>
            </li>
        </ul>
    </body>
</html>
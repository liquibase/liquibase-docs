<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/commands/quality-checks/checks/changelog-database-checks/max-affected-rows-allowed.html" />
        <meta name="description" content="Reference information and use cases for the maxAffectedRowsAllowed check. This check triggers when the Max Affected Rows Allowed value is exceeded by, per user setup, either any changeset, any pending  changeset, or just one specific changeset in the changelog." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <MadCap:snippetBlock src="../../../../Z_Resources/Snippets/images/icon-pro-top.flsnp" />
        <h1>maxAffectedRowsAllowed</h1>
        <p>This check triggers when the Max Affected Rows Allowed value is exceeded by, per user setup, either any <MadCap:variable name="General.changeset" />, any pending  <MadCap:variable name="General.changeset" />, or just one specific  <MadCap:variable name="General.changeset" /> in the <MadCap:variable name="General.changelog" />. </p>
        <h2>Uses</h2>
        <p>Use this check to prevent statements from being committed to your database if more than a specified number of rows are affected by that statement.</p>
        <h2>Run the maxAffectedRowsAllowed check</h2>
        <p>To run the <code class="language-text">maxAffectedRowsAllowed</code> check, ensure you have a  <MadCap:variable name="General.LBPro" /> license, a valid <code class="language-text">url</code> property that points to a live JDBC connection or a snapshot, and that the <MadCap:xref href="../../command-arguments/checks-scope.htm">checks-scope</MadCap:xref> property includes <code><MadCap:variable name="General.changelog" /></code>. The <MadCap:xref href="../../command-arguments/checks-scope.htm">checks-scope</MadCap:xref> property is set in the default properties file, environment variable, or any standard method. Then check if any searchable object types match the supplied pattern. </p>
        <p>Enable the <code class="language-text">maxAffectedRowsAllowed</code> check by running the following command in the CLI:<pre><code class="language-text">liquibase checks enable --check-name=maxAffectedRowsAllowed</code></pre></p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">This check can not be enabled directly because one or more fields does not have a default value.  Creating a copy of this check initiates the customization work flow.</p>
        <h3><code class="language-text">MaxAffectedRowsAllowed</code> configurable attributes</h3>
        <p>The following table identifies attributes that are configurable by <code class="language-text">MaxAffectedRowsAllowed</code>.</p>
        <table>
            <col style="width: auto;" />
            <col style="width: auto;" />
            <col style="width: auto;" />
            <col style="width: auto;" />
            <col style="width: auto;" />
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Description</th>
                    <th>Customization</th>
                    <th>Default Value</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code class="language-text">MAX_ROWS</code>
                    </td>
                    <td>Integer</td>
                    <td>
                        <p>The number limit of rows that trigger the check</p>
                    </td>
                    <td>
                        <p>&#160;</p>
                    </td>
                    <td>
                        <p>&#160;</p>
                    </td>
                </tr>
                <tr>
                    <td><code class="language-text">MESSAGE</code>
                    </td>
                    <td>String/enum</td>
                    <td><pre>Checks completed validation of the changelog and found the following issues:

Check Name:         Check Affected Rows Count (MaxAffectedRowsAllowed)
Changeset ID:       01
Changeset Filepath: update.sql
Check Severity:     INFO (Return code: 0)
Message:            More than the allowed '50' rows will be affected by the SQL statement 
                    'update POPULATED set
                    FIRST='JANET' where ID &lt;= 115 AND FIRST='Cecilia'' in 
                    'update.sql::01::asmith'</pre>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../../../Z_Resources/Snippets/def/attributes/cli/quality-checks/cli-checks-operator-customization.flsnp" />
                    </td>
                    <td><pre>Checks completed validation of the changelog and found the following issues:

Check Name:         Check Affected Rows Count (MaxAffectedRowsAllowed)
Changeset ID:       01
Changeset Filepath: update.sql
Check Severity:     INFO (Return code: 0)
Message:            More than the allowed '50' rows will be affected by the SQL statement 
                    'update POPULATED set
                    FIRST='JANET' where ID &lt;= 115 AND FIRST='Cecilia'' in 
                    'update.sql::01::asmith'</pre>
                    </td>
                </tr>
                <tr>
                    <td><code class="language-text">THRESHOLD</code>
                    </td>
                    <td>Integer</td>
                    <td>
                        <MadCap:snippetBlock src="../../../../Z_Resources/Snippets/def/attributes/cli/quality-checks/cli-checks-search-string-description.flsnp" />
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../../../Z_Resources/Snippets/def/attributes/cli/quality-checks/cli-checks-search-string-customization.flsnp" />
                    </td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td><code>STATEMENT</code>
                    </td>
                    <td>String/enum</td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td><MadCap:variable name="General.changeset" />
                    </td>
                    <td>String/enum</td>
                    <td>A changeset is the basic unit of change in Liquibase.</td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                </tr>
            </tbody>
        </table>
    </body>
</html>
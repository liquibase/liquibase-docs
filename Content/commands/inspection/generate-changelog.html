<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/commands/inspection/generate-changelog.html" />
        <meta name="description" content="Reference information and use cases for the generate-changelog command. The generate-changelog command creates a changelog file that has a sequence of changesets which describe how to re-create the current state of the database." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <h1 id="liquibase-commands-generate-changelog"><code class="highlighter-rouge">generate-changelog</code>
        </h1>
        <p>The <code class="highlighter-rouge">generate-changelog</code> command creates a <MadCap:variable name="General.changelog" /> file that has a sequence of <MadCap:variable name="General.changeset" />s which describe how to re-create the current state of the database.</p>
        <div align="center"><iframe width="560" height="315" src="https://www.youtube.com/embed/8AdiGIb2SY4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
            <br />
        </div>
        <h2 id="uses">Uses </h2>
        <p>The <code class="highlighter-rouge">generate-changelog</code> command is typically used when you want to capture the current state of a database, then apply those changes to any number of databases. This is typically only done when a project has an existing database, but hasn't used <MadCap:variable name="General.Liquibase" /> before. See <MadCap:xref href="../../workflows/liquibase-community/existing-project.html">How to set up [%=General.Liquibase%] with an Existing Project and Multiple Environments</MadCap:xref> for more details.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">When using the <MadCap:xref href="../update/update.html">update</MadCap:xref> command to apply the changes in the <MadCap:variable name="General.changelog" />, <MadCap:variable name="General.Liquibase" /> will not create a new database or schema. You must create them <strong><em>before</em></strong> applying the <MadCap:variable name="General.changelog" /> to it.</p>
        <h2 id="running-the-generate-changelog-command">Run the <code>generate-changelog</code> command</h2>
        <p>In this example, our sample database has the following content:</p>
        <p>
            <img src="../../Z_Resources/Images/command-generate-changelog-initial-database.png" />
        </p>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot style="font-size: 14pt;">Click to expand:&#160;database snapshot</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-text">Database snapshot for jdbc:postgresql://localhost:54322/lbadmindb
-----------------------------------------------------------------
Database type: PostgreSQL
Database version: 16.0 (Debian 16.0-1.pgdg120+1)
Database user: lbadminuser
Included types:
    com.datical.liquibase.ext.appdba.synonym.Synonym
    com.datical.liquibase.ext.storedlogic.checkconstraint.CheckConstraint
    com.datical.liquibase.ext.storedlogic.databasepackage.DatabasePackage
    com.datical.liquibase.ext.storedlogic.databasepackage.DatabasePackageBody
    com.datical.liquibase.ext.storedlogic.function.Function
    com.datical.liquibase.ext.storedlogic.trigger.Trigger
    liquibase.structure.core.Catalog
    liquibase.structure.core.Column
    liquibase.structure.core.ForeignKey
    liquibase.structure.core.Index
    liquibase.structure.core.PrimaryKey
    liquibase.structure.core.Schema
    liquibase.structure.core.Sequence
    liquibase.structure.core.StoredProcedure
    liquibase.structure.core.Table
    liquibase.structure.core.UniqueConstraint
    liquibase.structure.core.View

Catalog &amp; Schema: lbadmindb / public
    com.datical.liquibase.ext.storedlogic.checkconstraint.CheckConstraint:
        testtable_check
            body: ((number &gt; 0))
            disabled: false
            table: testtable
        
    com.datical.liquibase.ext.storedlogic.function.Function:
        customfunction()
            body: CREATE OR REPLACE FUNCTION public.customfunction()
             RETURNS trigger
             LANGUAGE plpgsql
            AS $function$
            BEGIN
            	IF NEW.text &lt;&gt; OLD.text THEN
            		 INSERT INTO testtable (text,number,date)
            		 VALUES(new.text,new.number,new.date);
            	END IF;
            
            	RETURN NEW;
            END;
            $function$
            
            functionName: customfunction
            valid: true
        
    com.datical.liquibase.ext.storedlogic.trigger.Trigger:
        customtrigger
            body: CREATE TRIGGER customtrigger BEFORE UPDATE ON public.testtable FOR EACH ROW EXECUTE FUNCTION customfunction()
            disabled: false
            tableName: testtable
            valid: true
        
    liquibase.structure.core.ForeignKey:
        fk_foreigntable
            deferrable: false
            deleteRule: importedKeyNoAction
            foreignKeyColumns: 
                foreignid
            foreignKeyTable: foreigntable
            initiallyDeferred: false
            primaryKeyColumns: 
                number
            primaryKeyTable: testtable
            updateRule: importedKeyNoAction
        
    liquibase.structure.core.Index:
        testtable_un
            columns: 
                number
            table: testtable
            unique: true
        
    liquibase.structure.core.StoredProcedure:
        customProcedure
            body: CREATE OR REPLACE PROCEDURE public."customProcedure"()
             LANGUAGE plpgsql
            AS $procedure$
            	BEGIN
            		insert into public.testtable (text,date) values ('first',CURRENT_DATE);
            	END;
            $procedure$
            
            type: plpgsql
        
    liquibase.structure.core.Table:
        foreigntable
            columns: 
                foreignid
                    nullable: false
                    order: 2
                    type: int4
                id
                    autoIncrementInformation: GENERATED null AUTO INCREMENT START WITH 1 INCREMENT BY 1
                    nullable: false
                    order: 1
                    type: int4
            default_tablespace: false
            outgoingForeignKeys: 
                fk_foreigntable
                    deferrable: false
                    deleteRule: importedKeyNoAction
                    foreignKeyColumns: 
                        foreignid
                    initiallyDeferred: false
                    primaryKeyColumns: 
                        number
                    primaryKeyTable: testtable
                    updateRule: importedKeyNoAction
        testtable
            checkConstraints: 
                testtable_check
                    body: ((number &gt; 0))
                    disabled: false
            columns: 
                date
                    nullable: false
                    order: 3
                    type: date
                number
                    autoIncrementInformation: GENERATED null AUTO INCREMENT START WITH 1 INCREMENT BY 1
                    nullable: false
                    order: 2
                    type: int4
                text
                    defaultValue: My text value
                    nullable: true
                    order: 1
                    type: varchar
            default_tablespace: false
            indexes: 
                testtable_un
                    columns: 
                        number
                    unique: true
            uniqueConstraints: 
                testtable_un
                    backingIndex: testtable_un
                    clustered: false
                    columns: 
                        number
                    deferrable: false
                    disabled: false
                    initiallyDeferred: false
                    validate: true
        
    liquibase.structure.core.UniqueConstraint:
        testtable_un
            backingIndex: testtable_un
            clustered: false
            columns: 
                number
            deferrable: false
            disabled: false
            initiallyDeferred: false
            table: testtable
            validate: true
        
    liquibase.structure.core.View:
        customview
            columns: 
                foreignid
                    nullable: true
                    order: 2
                    type: int4
                id
                    nullable: true
                    order: 1
                    type: int4
            definition: SELECT id,
                foreignid
               FROM foreigntable;</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <p>To generate a <MadCap:variable name="General.changelog" /> from our sample database:</p>
        <ol>
            <li>Configure the <a href="../../concepts/connections/creating-config-properties.html"><MadCap:variable name="General.Liquibase" /> properties file</a> to include your driver, classpath, and URL for the database you want to capture. Alternatively, you can pass the necessary information as <a href="../../concepts/connections/liquibase-environment-variables.htm">environment variables</a> or from the command line.</li>
            <li>Decide which data types you want to include. You can specify these with the <code>--diff-types</code> parameter.</li>
            <li>Open your CLI and run one of the following commands:</li>
            <ul>
                <li>Generate a <MadCap:variable name="General.changelog" /> without specifying diff types (<MadCap:variable name="General.Liquibase" /> uses the default diff types:&#160;<code>columns</code>, <code>foreignkeys</code>, <code>indexes</code>, <code>primarykeys</code>, <code>tables</code>,    <code>uniqueconstraints</code>, and <code>views</code>):</li><pre><code class="language-sql">liquibase generate-changelog --changelog-file=example-changelog.xml</code></pre>
                <li>Generate a <MadCap:variable name="General.changelog" /> with specific diff types:</li><pre><code class="language-sql">liquibase generate-changelog --changelog-file=example-changelog.xml --diff-types=catalogs,checkconstraints,columns,databasepackage,databasepackagebody,foreignkeys,functions,indexes,primarykeys,sequences,storedprocedures,tables,triggers,uniqueconstraints,views</code></pre>
            </ul>
        </ol>
        <p><MadCap:variable name="General.Liquibase" /> then generates your <MadCap:variable name="General.changelog" /> and displays the following message:</p><pre xml:space="preserve"><code class="language-text">BEST PRACTICE: The changelog generated by diffChangeLog/generateChangeLog should be inspected for correctness and completeness before being deployed. Some database objects and their dependencies cannot be represented automatically, and they may need to be manually updated before being deployed.
Generated changelog written to example-changelog.xml
Liquibase command 'generate-changelog' was executed successfully.</code></pre>
        <h2>Output <MadCap:variable name="General.changelog" />s</h2>
        <p>The <code class="highlighter-rouge">generate-changelog</code> command generates a <MadCap:variable name="General.changelog"></MadCap:variable> that contains all your objects (represented as <MadCap:variable name="General.changeset"></MadCap:variable>s) and places the file in the same directory where the command was ran.</p>
        <p>The extension you provide determines the format of the <MadCap:variable name="General.changelog" />, so if you specify the filename as <code class="highlighter-rouge">changelog.xml</code>, you will get an XML formatted <MadCap:variable name="General.changelog" />. However, if you specify the filename as <code class="highlighter-rouge">changelog.yaml</code>, <code class="highlighter-rouge">changelog.json</code>, or <code class="highlighter-rouge">changelog.sql</code>, you will get <MadCap:variable name="General.changelog" />s formatted in YAML, JSON, or SQL, respectively.</p>
        <h3>Default diff types</h3>
        <div class="js-tabs">
            <ul class="js-tablist" data-existing-hx="h3">
                <li class="js-tablist__item"><a href="#xml_example" id="label_xml_example" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example" id="label_yaml_example" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example" id="label_json_example" class="js-tablist__link">JSON example</a>
                </li>
                <li class="js-tablist__item"><a href="#sql_example" id="label_sql_example" class="js-tablist__link">SQL example</a>
                </li>
            </ul>
            <div id="xml_example" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;?xml version="1.1" encoding="UTF-8" standalone="no"?&gt;
&lt;databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xmlns:pro="http://www.liquibase.org/xml/ns/pro"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-latest.xsd
    http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd"&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821089427-1"&gt;
        &lt;createTable tableName="testtable"&gt;
            &lt;column defaultValue="My text value" name="text" type="VARCHAR" /&gt;
            &lt;column autoIncrement="true" name="number" type="INTEGER"&gt;
                &lt;constraints nullable="false" /&gt;
            &lt;/column&gt;
            &lt;column name="date" type="date"&gt;
                &lt;constraints nullable="false" /&gt;
            &lt;/column&gt;
        &lt;/createTable&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821089427-2"&gt;
        &lt;pro:createFunction functionName="customfunction"
            path="objects/function/customfunction-bcd8b0c2.sql" relativeToChangelogFile="true" /&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821089427-3"&gt;
        &lt;createTable tableName="foreigntable"&gt;
            &lt;column autoIncrement="true" name="id" type="INTEGER"&gt;
                &lt;constraints nullable="false" /&gt;
            &lt;/column&gt;
            &lt;column name="foreignid" type="INTEGER"&gt;
                &lt;constraints nullable="false" /&gt;
            &lt;/column&gt;
        &lt;/createTable&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821089427-4"&gt;
        &lt;pro:createTrigger disabled="false"
            path="objects/trigger/testtable_customtrigger-41365cf7.sql"
            relativeToChangelogFile="true" tableName="testtable" triggerName="customtrigger" /&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821089427-5"&gt;
        &lt;addUniqueConstraint columnNames="number" constraintName="testtable_un"
            tableName="testtable" /&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821089427-6"&gt;
        &lt;createView fullDefinition="false" viewName="customview"&gt;SELECT id,
            foreignid
            FROM foreigntable;
        &lt;/createView&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821089427-7"&gt;
        &lt;createProcedure path="objects/storedprocedure/customProcedure.sql"
            procedureName="customProcedure" relativeToChangelogFile="true" /&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821089427-8"&gt;
        &lt;addForeignKeyConstraint baseColumnNames="foreignid" baseTableName="foreigntable"
            constraintName="fk_foreigntable" deferrable="false" initiallyDeferred="false"
            onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="number"
            referencedTableName="testtable" validate="true" /&gt;
    &lt;/changeSet&gt;
&lt;/databaseChangeLog&gt;</code></pre>
            </div>
            <div id="yaml_example" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">databaseChangeLog:
- changeSet:
    id: 1704821121380-1
    author: tfernandez (generated)
    changes:
    - createTable:
        columns:
        - column:
            defaultValue: My text value
            name: text
            type: VARCHAR
        - column:
            autoIncrement: true
            constraints:
              nullable: false
            name: number
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: date
            type: date
        tableName: testtable
- changeSet:
    id: 1704821121380-2
    author: tfernandez (generated)
    changes:
    - createFunction:
        functionName: customfunction
        path: objects/function/customfunction-bcd8b0c2.sql
        relativeToChangelogFile: true
- changeSet:
    id: 1704821121380-3
    author: tfernandez (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: foreignid
            type: INTEGER
        tableName: foreigntable
- changeSet:
    id: 1704821121380-4
    author: tfernandez (generated)
    changes:
    - createTrigger:
        disabled: false
        path: objects/trigger/testtable_customtrigger-41365cf7.sql
        relativeToChangelogFile: true
        tableName: testtable
        triggerName: customtrigger
- changeSet:
    id: 1704821121380-5
    author: tfernandez (generated)
    changes:
    - addUniqueConstraint:
        columnNames: number
        constraintName: testtable_un
        tableName: testtable
- changeSet:
    id: 1704821121380-6
    author: tfernandez (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT id,
              foreignid
             FROM foreigntable;
        viewName: customview
- changeSet:
    id: 1704821121380-7
    author: tfernandez (generated)
    changes:
    - createProcedure:
        path: objects/storedprocedure/customProcedure.sql
        procedureName: customProcedure
        relativeToChangelogFile: true
- changeSet:
    id: 1704821121380-8
    author: tfernandez (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: foreignid
        baseTableName: foreigntable
        constraintName: fk_foreigntable
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: number
        referencedTableName: testtable
        validate: true</code></pre>
            </div>
            <div id="json_example" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{ "databaseChangeLog": [
  {
    "changeSet": {
      "id": "1704821132889-1",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "defaultValue": "My text value",
                  "name": "text",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "autoIncrement": true,
                  "constraints": {
                    "nullable": false
                  },
                  "name": "number",
                  "type": "INTEGER"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "date",
                  "type": "date"
                }
              }
            ]
            ,
            "tableName": "testtable"
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821132889-2",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createFunction": {
            "functionName": "customfunction",
            "path": "objects/function/customfunction-bcd8b0c2.sql",
            "relativeToChangelogFile": true
          }
        }
      ]
      
    }
  },
  {
    "changeSet": {
      "id": "1704821132889-3",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "autoIncrement": true,
                  "constraints": {
                    "nullable": false
                  },
                  "name": "id",
                  "type": "INTEGER"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "foreignid",
                  "type": "INTEGER"
                }
              }
            ]
            ,
            "tableName": "foreigntable"
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821132889-4",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createTrigger": {
            "disabled": false,
            "path": "objects/trigger/testtable_customtrigger-41365cf7.sql",
            "relativeToChangelogFile": true,
            "tableName": "testtable",
            "triggerName": "customtrigger"
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821132889-5",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "addUniqueConstraint": {
            "columnNames": "number",
            "constraintName": "testtable_un",
            "tableName": "testtable"
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821132889-6",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createView": {
            "fullDefinition": false,
            "selectQuery": "SELECT id,\n    foreignid\n   FROM foreigntable;",
            "viewName": "customview"
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821132889-7",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createProcedure": {
            "path": "objects/storedprocedure/customProcedure.sql",
            "procedureName": "customProcedure",
            "relativeToChangelogFile": true
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821132889-8",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "foreignid",
            "baseTableName": "foreigntable",
            "constraintName": "fk_foreigntable",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "number",
            "referencedTableName": "testtable",
            "validate": true
          }
        }
      ]
      
    }
  }
  
]}</code></pre>
            </div>
            <div id="sql_example" class="js-tabcontent"><pre xml:space="preserve"><code class="language-sql">--liquibase formatted sql

--changeset tfernandez:1704821094961-1
CREATE TABLE "testtable" ("text" VARCHAR DEFAULT 'My text value', "number" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "date" date NOT NULL);

--changeset tfernandez:1704821094961-2 splitStatements:false
CREATE OR REPLACE FUNCTION "public".customfunction()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
	IF NEW.text &lt;&gt; OLD.text THEN
		 INSERT INTO testtable (text,number,date)
		 VALUES(new.text,new.number,new.date);
	END IF;

	RETURN NEW;
END;
$function$;

--changeset tfernandez:1704821094961-3
CREATE TABLE "foreigntable" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "foreignid" INTEGER NOT NULL);

--changeset tfernandez:1704821094961-4 splitStatements:false
CREATE TRIGGER customtrigger BEFORE UPDATE ON "public".testtable FOR EACH ROW EXECUTE FUNCTION customfunction();

--changeset tfernandez:1704821094961-5
ALTER TABLE "testtable" ADD CONSTRAINT "testtable_un" UNIQUE ("number");

--changeset tfernandez:1704821094961-6
CREATE VIEW "customview" AS SELECT id,
    foreignid
   FROM foreigntable;

--changeset tfernandez:1704821094961-7 splitStatements:false
CREATE OR REPLACE PROCEDURE public."customProcedure"()
 LANGUAGE plpgsql
AS $procedure$
	BEGIN
		insert into public.testtable (text,date) values ('first',CURRENT_DATE);
	END;
$procedure$;

--changeset tfernandez:1704821094961-8
ALTER TABLE "foreigntable" ADD CONSTRAINT "fk_foreigntable" FOREIGN KEY ("foreignid") REFERENCES "testtable" ("number") ON UPDATE NO ACTION ON DELETE NO ACTION;</code></pre>
            </div>
        </div>
        <h3>Specific diff types</h3>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h2">
                <li class="js-tablist__item"><a href="#xml_example_2" id="label_xml_example_2" class="js-tablist__link">XML example</a>
                </li>
                <li class="js-tablist__item"><a href="#yaml_example_2" id="label_yaml_example_2" class="js-tablist__link">YAML example</a>
                </li>
                <li class="js-tablist__item"><a href="#json_example_2" id="label_json_example_2" class="js-tablist__link">JSON example</a>
                </li>
                <li class="js-tablist__item"><a href="#sql_example_2" id="label_sql_example_2" class="js-tablist__link">SQL example</a>
                </li>
            </ul>
            <div id="xml_example_2" class="js-tabcontent"><pre xml:space="preserve"><code class="language-xml">&lt;?xml version="1.1" encoding="UTF-8" standalone="no"?&gt;
&lt;databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xmlns:pro="http://www.liquibase.org/xml/ns/pro"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
    http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-latest.xsd
    http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd"&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821340603-1"&gt;
        &lt;createTable tableName="testtable"&gt;
            &lt;column defaultValue="My text value" name="text" type="VARCHAR" /&gt;
            &lt;column autoIncrement="true" name="number" type="INTEGER"&gt;
                &lt;constraints nullable="false" /&gt;
            &lt;/column&gt;
            &lt;column name="date" type="date"&gt;
                &lt;constraints nullable="false" /&gt;
            &lt;/column&gt;
        &lt;/createTable&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821340603-2"&gt;
        &lt;insert tableName="testtable"&gt;
            &lt;column name="text" value="one" /&gt;
            &lt;column name="number" valueNumeric="1" /&gt;
            &lt;column name="date" valueDate="2024-01-09" /&gt;
        &lt;/insert&gt;
        &lt;insert tableName="testtable"&gt;
            &lt;column name="text" value="three" /&gt;
            &lt;column name="number" valueNumeric="2" /&gt;
            &lt;column name="date" valueDate="2024-01-09" /&gt;
        &lt;/insert&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821340603-3"&gt;
        &lt;pro:createFunction functionName="customfunction"
            path="objects/function/customfunction-bcd8b0c2.sql" relativeToChangelogFile="true" /&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821340603-4"&gt;
        &lt;createTable tableName="foreigntable"&gt;
            &lt;column autoIncrement="true" name="id" type="INTEGER"&gt;
                &lt;constraints nullable="false" /&gt;
            &lt;/column&gt;
            &lt;column name="foreignid" type="INTEGER"&gt;
                &lt;constraints nullable="false" /&gt;
            &lt;/column&gt;
        &lt;/createTable&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704822563807-1"&gt;
        &lt;pro:addCheckConstraint constraintName="testtable_check" disabled="false" tableName="testtable"&gt;
            ((number &gt; 0))
        &lt;/pro:addCheckConstraint&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821340603-5"&gt;
        &lt;pro:createTrigger disabled="false"
            path="objects/trigger/testtable_customtrigger-41365cf7.sql"
            relativeToChangelogFile="true" tableName="testtable" triggerName="customtrigger" /&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821340603-6"&gt;
        &lt;addUniqueConstraint columnNames="number" constraintName="testtable_un"
            tableName="testtable" /&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821340603-7"&gt;
        &lt;createView fullDefinition="false" viewName="customview"&gt;SELECT id,
            foreignid
            FROM foreigntable;
        &lt;/createView&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821340603-8"&gt;
        &lt;addForeignKeyConstraint baseColumnNames="foreignid" baseTableName="foreigntable"
            constraintName="fk_foreigntable" deferrable="false" initiallyDeferred="false"
            onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="number"
            referencedTableName="testtable" validate="true" /&gt;
    &lt;/changeSet&gt;
    &lt;changeSet author="tfernandez (generated)" id="1704821340603-9"&gt;
        &lt;createProcedure path="objects/storedprocedure/customProcedure.sql"
            procedureName="customProcedure" relativeToChangelogFile="true" /&gt;
    &lt;/changeSet&gt;
&lt;/databaseChangeLog&gt;</code></pre>
            </div>
            <div id="yaml_example_2" class="js-tabcontent"><pre xml:space="preserve"><code class="language-yaml">databaseChangeLog:
- changeSet:
    id: 1704821709768-1
    author: tfernandez (generated)
    changes:
    - createTable:
        columns:
        - column:
            defaultValue: My text value
            name: text
            type: VARCHAR
        - column:
            autoIncrement: true
            constraints:
              nullable: false
            name: number
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: date
            type: date
        tableName: testtable
- changeSet:
    id: 1704821709768-2
    author: tfernandez (generated)
    changes:
    - insert:
        columns:
        - column:
            name: text
            value: one
        - column:
            name: number
            valueNumeric: 1
        - column:
            name: date
            valueDate: 2024-01-09
        tableName: testtable
    - insert:
        columns:
        - column:
            name: text
            value: three
        - column:
            name: number
            valueNumeric: 2
        - column:
            name: date
            valueDate: 2024-01-09
        tableName: testtable
- changeSet:
    id: 1704821709768-3
    author: tfernandez (generated)
    changes:
    - createFunction:
        functionName: customfunction
        path: objects/function/customfunction-bcd8b0c2.sql
        relativeToChangelogFile: true
- changeSet:
    id: 1704821709768-4
    author: tfernandez (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: foreignid
            type: INTEGER
        tableName: foreigntable
- changeSet:
    id: 1704822601396-1
    author: tfernandez (generated)
    changes:
    - addCheckConstraint:
        constraintBody: ((number &gt; 0))
        constraintName: testtable_check
        disabled: false
        tableName: testtable
- changeSet:
    id: 1704821709768-5
    author: tfernandez (generated)
    changes:
    - createTrigger:
        disabled: false
        path: objects/trigger/testtable_customtrigger-41365cf7.sql
        relativeToChangelogFile: true
        tableName: testtable
        triggerName: customtrigger
- changeSet:
    id: 1704821709768-6
    author: tfernandez (generated)
    changes:
    - addUniqueConstraint:
        columnNames: number
        constraintName: testtable_un
        tableName: testtable
- changeSet:
    id: 1704821709768-7
    author: tfernandez (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT id,
              foreignid
             FROM foreigntable;
        viewName: customview
- changeSet:
    id: 1704821709768-8
    author: tfernandez (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: foreignid
        baseTableName: foreigntable
        constraintName: fk_foreigntable
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: number
        referencedTableName: testtable
        validate: true
- changeSet:
    id: 1704821709768-9
    author: tfernandez (generated)
    changes:
    - createProcedure:
        path: objects/storedprocedure/customProcedure.sql
        procedureName: customProcedure
        relativeToChangelogFile: true</code></pre>
            </div>
            <div id="json_example_2" class="js-tabcontent"><pre xml:space="preserve"><code class="language-json">{ "databaseChangeLog": [
  {
    "changeSet": {
      "id": "1704821676788-1",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "defaultValue": "My text value",
                  "name": "text",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "autoIncrement": true,
                  "constraints": {
                    "nullable": false
                  },
                  "name": "number",
                  "type": "INTEGER"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "date",
                  "type": "date"
                }
              }
            ]
            ,
            "tableName": "testtable"
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821676788-2",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "insert": {
            "columns": [
              {
                "column": {
                  "name": "text",
                  "value": "one"
                }
              },
              {
                "column": {
                  "name": "number",
                  "valueNumeric": 1
                }
              },
              {
                "column": {
                  "name": "date",
                  "valueDate": "2024-01-09"
                }
              }
            ]
            ,
            "tableName": "testtable"
          }
        },
        {
          "insert": {
            "columns": [
              {
                "column": {
                  "name": "text",
                  "value": "three"
                }
              },
              {
                "column": {
                  "name": "number",
                  "valueNumeric": 2
                }
              },
              {
                "column": {
                  "name": "date",
                  "valueDate": "2024-01-09"
                }
              }
            ]
            ,
            "tableName": "testtable"
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821676788-3",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createFunction": {
            "functionName": "customfunction",
            "path": "objects/function/customfunction-bcd8b0c2.sql",
            "relativeToChangelogFile": true
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821676788-4",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "autoIncrement": true,
                  "constraints": {
                    "nullable": false
                  },
                  "name": "id",
                  "type": "INTEGER"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "foreignid",
                  "type": "INTEGER"
                }
              }
            ]
            ,
            "tableName": "foreigntable"
          }
        }
      ]
      
    }
  },
  {
    "changeSet": {
      "id": "1704822683055-1",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "addCheckConstraint": {
            "constraintBody": "((number &gt; 0))",
            "constraintName": "testtable_check",
            "disabled": false,
            "tableName": "testtable"
          }
        }
      ]
      
    }
  },
  {
    "changeSet": {
      "id": "1704821676788-5",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createTrigger": {
            "disabled": false,
            "path": "objects/trigger/testtable_customtrigger-41365cf7.sql",
            "relativeToChangelogFile": true,
            "tableName": "testtable",
            "triggerName": "customtrigger"
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821676788-6",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "addUniqueConstraint": {
            "columnNames": "number",
            "constraintName": "testtable_un",
            "tableName": "testtable"
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821676788-7",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createView": {
            "fullDefinition": false,
            "selectQuery": "SELECT id,\n    foreignid\n   FROM foreigntable;",
            "viewName": "customview"
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821676788-8",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "foreignid",
            "baseTableName": "foreigntable",
            "constraintName": "fk_foreigntable",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "number",
            "referencedTableName": "testtable",
            "validate": true
          }
        }
      ]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1704821676788-9",
      "author": "tfernandez (generated)",
      "changes": [
        {
          "createProcedure": {
            "path": "objects/storedprocedure/customProcedure.sql",
            "procedureName": "customProcedure",
            "relativeToChangelogFile": true
          }
        }
      ]
      
    }
  }
  
]}</code></pre>
            </div>
            <div id="sql_example_2" class="js-tabcontent"><pre xml:space="preserve"><code class="language-sql">--liquibase formatted sql

--changeset tfernandez:1704821730934-1
CREATE TABLE "testtable" ("text" VARCHAR DEFAULT 'My text value', "number" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "date" date NOT NULL);

--changeset tfernandez:1704821730934-2
INSERT INTO "testtable" ("text", "number", "date") VALUES ('one', 1, '2024-01-09');
INSERT INTO "testtable" ("text", "number", "date") VALUES ('three', 2, '2024-01-09');

--changeset tfernandez:1704821730934-3 splitStatements:false
CREATE OR REPLACE FUNCTION "public".customfunction()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
	IF NEW.text &lt;&gt; OLD.text THEN
		 INSERT INTO testtable (text,number,date)
		 VALUES(new.text,new.number,new.date);
	END IF;

	RETURN NEW;
END;
$function$;

--changeset tfernandez:1704821730934-4
CREATE TABLE "foreigntable" ("id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL, "foreignid" INTEGER NOT NULL);

--changeset tfernandez:1704822632841-1
ALTER TABLE "testtable" ADD CONSTRAINT "testtable_check" CHECK (((number &gt; 0)));

--changeset tfernandez:1704821730934-5 splitStatements:false
CREATE TRIGGER customtrigger BEFORE UPDATE ON "public".testtable FOR EACH ROW EXECUTE FUNCTION customfunction();

--changeset tfernandez:1704821730934-6
ALTER TABLE "testtable" ADD CONSTRAINT "testtable_un" UNIQUE ("number");

--changeset tfernandez:1704821730934-7
CREATE VIEW "customview" AS SELECT id,
    foreignid
   FROM foreigntable;

--changeset tfernandez:1704821730934-8
ALTER TABLE "foreigntable" ADD CONSTRAINT "fk_foreigntable" FOREIGN KEY ("foreignid") REFERENCES "testtable" ("number") ON UPDATE NO ACTION ON DELETE NO ACTION;

--changeset tfernandez:1704821730934-9 splitStatements:false
CREATE OR REPLACE PROCEDURE public."customProcedure"()
 LANGUAGE plpgsql
AS $procedure$
	BEGIN
		insert into public.testtable (text,date) values ('first',CURRENT_DATE);
	END;
$procedure$;</code></pre>
            </div>
        </div>
        <h2>Parameters</h2>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h3">
                <li class="js-tablist__item"><a href="#cli" id="label_cli" class="js-tablist__link">CLI</a>
                </li>
                <li class="js-tablist__item"><a href="#flow" id="label_flow" class="js-tablist__link">Flow</a>
                </li>
                <li class="js-tablist__item"><a href="#properties_file" id="label_properties_file" class="js-tablist__link"><code>liquibase.properties</code></a>
                </li>
                <li class="js-tablist__item"><a href="#java_opts" id="label_java_opts" class="js-tablist__link"><code>JAVA_OPTS</code></a>
                </li>
                <li class="js-tablist__item"><a href="#envar" id="label_envar" class="js-tablist__link">Environment variable</a>
                </li>
            </ul>
            <div id="cli" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-generate-changelog.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.cli]" />
            </div>
            <div id="flow" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-generate-changelog.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.flow]" />
            </div>
            <div id="properties_file" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-generate-changelog.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.properties-file]" />
            </div>
            <div id="java_opts" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-generate-changelog.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.java-opts]" />
            </div>
            <div id="envar" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-generate-changelog.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.envar]" />
            </div>
        </div>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/note/command-username-password.flsnp" />
        <p>* <code class="highlighter-rouge">--include-tablespace</code> only captures the tablespace if it was specified in the <code>create table</code> statement.</p>
        <h2>Database objects supported by <MadCap:variable name="General.Liquibase" /></h2>
        <p>You can use the following object types in <MadCap:variable name="General.Liquibase" />:</p>
        <table style="width: 100%;">
            <col />
            <col />
            <col />
            <thead>
                <tr>
                    <th>Object type</th>
                    <th><code>--diff-types</code> syntax</th>
                    <th><MadCap:variable name="General.Liquibase" /> edition</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Catalog</td>
                    <td><code>catalogs</code>
                    </td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>Column</td>
                    <td><code>columns</code>
                    </td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>Data</td>
                    <td><code>data</code>
                    </td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>Foreign key</td>
                    <td><code>foreignkeys</code>
                    </td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>Index</td>
                    <td><code>indexes</code>
                    </td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>NOT&#160;NULL constraint</td>
                    <td>N/A</td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>Primary key</td>
                    <td><code>primarykeys</code>
                    </td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>Schema</td>
                    <td>N/A</td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>Sequence</td>
                    <td><code>sequences</code>
                    </td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>Table</td>
                    <td><code>tables</code>
                    </td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>Unique constraint</td>
                    <td><code>uniqueconstraints</code>
                    </td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>View</td>
                    <td><code>views</code>
                    </td>
                    <td><MadCap:variable name="General.LBCommunity" />
                    </td>
                </tr>
                <tr>
                    <td>Check constraint</td>
                    <td><code>checkconstraints</code>
                    </td>
                    <td><MadCap:variable name="General.LBPro" />
                    </td>
                </tr>
                <tr>
                    <td>Function</td>
                    <td><code>functions</code>
                    </td>
                    <td><MadCap:variable name="General.LBPro" />
                    </td>
                </tr>
                <tr>
                    <td>Package</td>
                    <td><code>databasepackage</code>
                    </td>
                    <td><MadCap:variable name="General.LBPro" />
                    </td>
                </tr>
                <tr>
                    <td>Package body</td>
                    <td><code>databasepackagebody</code>
                    </td>
                    <td><MadCap:variable name="General.LBPro" />
                    </td>
                </tr>
                <tr>
                    <td>Stored procedure</td>
                    <td><code>storedprocedures</code>
                    </td>
                    <td><MadCap:variable name="General.LBPro" />
                    </td>
                </tr>
                <tr>
                    <td>Trigger</td>
                    <td><code>triggers</code>
                    </td>
                    <td><MadCap:variable name="General.LBPro" />
                    </td>
                </tr>
            </tbody>
        </table>
        <h3><MadCap:variable name="General.LBPro" /> stored logic behavior</h3>
        <p>While <MadCap:variable name="General.LBCommunity" /> stores all <MadCap:variable name="General.changeset" />s in a <MadCap:variable name="General.changelog" />, <MadCap:variable name="General.LBPro" /> creates a directory called <code>Objects</code> and places the directory at the same level as your <MadCap:variable name="General.changelog" />. The <code>Objects</code> directory contains a subdirectory for each of the following stored logic types:</p>
        <ul>
            <li>Function</li>
            <li>Package</li>
            <li>Package body</li>
            <li>Stored procedure</li>
            <li>Trigger</li>
        </ul>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">Some database platforms may  not support all of these stored logic types.</p>
        <p>The <code>generate-changelog</code> command will not create the <code>Objects</code> directory if:</p>
        <ul>
            <li>You don't have a valid <MadCap:variable name="General.LBPro" /> license key</li>
            <li>There are no stored logic objects in the database</li>
            <li>The <MadCap:variable name="General.changelog" /> file is written in formatted SQL (the <code>Objects</code> folder can only be created when generating XML, JSON or YAML <MadCap:variable name="General.changelog" />s)</li>
            <li>The target database is not supported with the <code>generate-changelog</code> command and stored logic objects</li>
        </ul>
        <p>If your database contains stored logic objects, you may have issues attempting to run the <code>generate-changelog</code> command more than once, even with a new <MadCap:variable name="General.changelog" /> name, because the stored logic files already exist in the <code>Objects</code> directory.</p>
        <p>To generate a newer version of the <MadCap:variable name="General.changelog" /> file with stored logic objects based on the current database state, you need to delete, rename, or move the <code>Objects</code> directory that was created by running the <code>generate-changelog</code> command previously. Then, you can run the <code>generate-changelog</code> command again.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">If there is a pre-existing <code>Objects</code> directory that is not related to <MadCap:variable name="General.Liquibase" />, you need to delete, rename, or move it to run the <code>generate-changelog</code> command.</p>
        <p>If you want to track the history of stored logic objects, use the <MadCap:xref href="diff-changelog.html">diff-changelog</MadCap:xref> command. The <code>diff-changelog</code> command structures stored logic files into timestamped directories every time you run the command.</p>
        <h2>Related links</h2>
        <ul>
            <li>
                <MadCap:xref href="../../tools-integrations/maven/commands/maven-generatechangelog.html">Maven generateChangeLog</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../../tools-integrations/ant/commands/generatechangelog.html">Ant generateChangeLog</MadCap:xref>
            </li>
        </ul>
    </body>
</html>
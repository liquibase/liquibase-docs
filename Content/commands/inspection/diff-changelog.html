<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/commands/inspection/diff-changelog.html" />
        <meta name="description" content="Reference information and use cases for the diff-changelog command. The diff-changelog command displays the differences between two databases you are comparing. It also generates a changelog file containing deployable changesets to resolve most of these differences." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <h1 id="liquibase-commands-diff-changelog"><code>diff-changelog</code>
        </h1>
        <p>The <code class="language-text">diff-changelog</code> command displays the differences between two databases you are comparing. It also generates a <MadCap:variable name="General.changelog" /> file containing deployable <MadCap:variable name="General.changeset" />s to resolve most of these differences.</p>
        <h2 id="uses">Uses</h2>
        <p>The <code class="language-text">diff-changelog</code> command is typically used when you want to create a deployable <MadCap:variable name="General.changelog" /> to synchronize multiple databases. The <code class="language-text">diff-changelog</code> command also provides more information about:</p>
        <ul>
            <li>Missing objects in your database</li>
            <li>Changes made to your database</li>
            <li>Unexpected items in your database</li>
        </ul>
        <h2 id="running-the-diff-changelog-command">Running the <code>diff-changelog</code> command</h2>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-diff-run.flsnp" MadCap:conditionTagExpression="include[command-diff-run.diff-changelog]" />
        <h2 id="output">Output</h2>
        <p>The <code class="language-text">diff-changelog</code> command produces a list of all objects and creates a <MadCap:variable name="General.changelog" /> with a list of <MadCap:variable name="General.changeset" />s.</p>
        <p><MadCap:variable name="General.LBCommunity" />&#160;<code class="language-text">diff-changelog</code> categories:</p>
        <ul>
            <li>Catalog</li>
            <li>Column</li>
            <li>Foreign Key</li>
            <li>Index</li>
            <li>Primary Key</li>
            <li>Schema</li>
            <li>Sequence</li>
            <li>Unique Constraints</li>
            <li>View</li>
        </ul>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>Console output example</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-text">Liquibase Version: 4.9.1						
BEST PRACTICE: The changelog generated by diffChangeLog/generateChangeLog should be inspected for correctness and completeness before being deployed. Some database objects and their dependencies cannot be represented automatically, and they may need to be manually updated before being deployed.
Liquibase command 'diff-changelog' was executed successfully.</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <h2>Filtering <code>diff-changelog</code> types</h2>
        <p>You can filter what objects <code>diff-changelog</code> generates with the <code>--diff-types</code>&#160;<MadCap:variable name="General.Param/Attribute" />:</p><pre><code class="language-text">--diff-types=&lt;catalogs,tables,functions,views,columns,indexes,foreignkeys,primarykeys,uniqueconstraints,storedprocedures,triggers,sequences,databasepackage,databasepackagebody&gt;</code></pre>
        <p>You can also filter specific objects by name with the <code>--include-objects</code> and <code>--exclude-objects</code>&#160;<MadCap:variable name="General.Param/Attribute" />s. For example:</p><pre xml:space="preserve"><code class="language-text">--include-objects=table:tableName,column:columnName,view:viewName,index:indexName
--exclude-objects=table:tableName,column:columnName,view:viewName,index:indexName</code></pre>
        <p>This way, you can prevent any undesired objects from ending up in the resulting <MadCap:variable name="General.changelog" />.</p>
        <h2 id="additional-functionality-with-liquibase-pro">Additional Functionality with <MadCap:variable name="General.LBPro" /></h2>
        <p>While <MadCap:variable name="General.LBCommunity" /> stores all <MadCap:variable name="General.changeset" />s in a <MadCap:variable name="General.changelog" />, <MadCap:variable name="General.LBPro" /> creates a directory called <code>Objects</code> and places the directory at the same level as your <MadCap:variable name="General.changelog" />. The <code>Objects</code> directory contains a subdirectory for each of the following stored logic types:</p>
        <ul>
            <li>checkconstraint</li>
            <li>package</li>
            <li>packagebody</li>
            <li>procedure</li>
            <li>function</li>
            <li>trigger</li>
            <li>synonyms</li>
        </ul>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">Not all database platforms support all stored logic types that are listed.</p>
        <p>The <code class="language-text">diff-changelog</code> command structures stored logic files into timestamped directories every time you run the command.</p>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot><MadCap:variable name="General.LBPro" /> <code class="language-text">diff-changelog</code> example file</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<MadCap:snippetText src="../../Z_Resources/Snippets/code/liquibase-xsd-xml-changelog-closed.flsnp" />

	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-8"&gt;
		&lt;pro:createTrigger  disabled="false"  path="objects/trigger/TS_T_EXEMPLAR_SEQEXEMPLAR.sql"  relativeToChangelogFile="true"  tableName="T_EXEMPLAR"  triggerName="TS_T_EXEMPLAR_SEQEXEMPLAR"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-9"&gt;
		&lt;pro:createTrigger  disabled="false"  path="objects/trigger/ORDERS_BEFORE_INSERT4.sql"  relativeToChangelogFile="true"  tableName="orders"  triggerName="ORDERS_BEFORE_INSERT4"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-10"&gt;
		&lt;pro:createTrigger  disabled="false"  path="objects/trigger/ORDERS_BEFORE_INSERT2.sql"  relativeToChangelogFile="true"  tableName="orders"  triggerName="ORDERS_BEFORE_INSERT2"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-11"&gt;
		&lt;pro:createTrigger  disabled="false"  path="objects/trigger/ORDERS_BEFORE_INSERT.sql"  relativeToChangelogFile="true"  tableName="orders"  triggerName="ORDERS_BEFORE_INSERT"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-12"&gt;
		&lt;createView  fullDefinition="true"  path="objects/view/OREDERS_VIEW.sql"  relativeToChangelogFile="true"  viewName="OREDERS_VIEW"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-13"&gt;
		&lt;pro:createTrigger  disabled="false"  path="objects/trigger/ORDERS_BEFORE_INSERT3.sql"  relativeToChangelogFile="true"  tableName="orders"  triggerName="ORDERS_BEFORE_INSERT3"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-14"&gt;
		&lt;createProcedure  path="objects/storedprocedure/P_CUSTOMER_HAS_NUM_FILM.sql"  procedureName="P_CUSTOMER_HAS_NUM_FILM"  relativeToChangelogFile="true"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-15"&gt;
		&lt;createView  fullDefinition="true"  path="objects/view/V_CUSTOMER_HAS_FILM.sql"  relativeToChangelogFile="true"  viewName="V_CUSTOMER_HAS_FILM"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-16"&gt;
		&lt;createProcedure  path="objects/storedprocedure/SP_CUSTOMER_SOCIAL_ACCTS.sql"  procedureName="SP_CUSTOMER_SOCIAL_ACCTS"  relativeToChangelogFile="true"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-17"&gt;
		&lt;pro:createTrigger  disabled="false"  path="objects/trigger/TRI_BORROWING.sql"  relativeToChangelogFile="true"  tableName="T_BORROWING"  triggerName="TRI_BORROWING"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-18"&gt;
		&lt;pro:createTrigger  disabled="false"  path="objects/trigger/TRU_BORROWING.sql"  relativeToChangelogFile="true"  tableName="T_BORROWING"  triggerName="TRU_BORROWING"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-19"&gt;
		&lt;pro:createTrigger  disabled="false"  path="objects/trigger/TSU_T_EXEMPLAR_SEQEXEMPLAR.sql"  relativeToChangelogFile="true"  tableName="T_EXEMPLAR"  triggerName="TSU_T_EXEMPLAR_SEQEXEMPLAR"/&gt;
	&lt;/changeSet&gt;
	&lt;changeSet  author="Administrator (generated)"  id="1571345362466-20"&gt;
		&lt;pro:createFunction  functionName="F_CUSTOMER_HAS_NUM_FILM"  path="objects/function/F_CUSTOMER_HAS_NUM_FILM.sql"  relativeToChangelogFile="true"/&gt;
	&lt;/changeSet&gt;
&lt;/databaseChangeLog&gt;</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><MadCap:variable name="General.Liquibase" /> does not currently check data type length.</p>
        <h2>Command parameters</h2>
        <div class="js-tabs">
            <ul class="js-tablist" data-hx="h3">
                <li class="js-tablist__item"><a href="#cli" id="label_cli" class="js-tablist__link">CLI</a>
                </li>
                <li class="js-tablist__item"><a href="#flow" id="label_flow" class="js-tablist__link">Flow</a>
                </li>
                <li class="js-tablist__item"><a href="#properties_file" id="label_properties_file" class="js-tablist__link"><code>liquibase.properties</code></a>
                </li>
                <li class="js-tablist__item"><a href="#java_opts" id="label_java_opts" class="js-tablist__link"><code>JAVA_OPTS</code></a>
                </li>
                <li class="js-tablist__item"><a href="#envar" id="label_envar" class="js-tablist__link">Environment variable</a>
                </li>
            </ul>
            <div id="cli" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-diff-changelog.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.cli]" />
            </div>
            <div id="flow" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-diff-changelog.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.flow]" />
            </div>
            <div id="properties_file" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-diff-changelog.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.properties-file]" />
            </div>
            <div id="java_opts" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-diff-changelog.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.java-opts]" />
            </div>
            <div id="envar" class="js-tabcontent">
                <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/command-parameters-global-cmd/param-lists/command-diff-changelog.flsnp" MadCap:conditionTagExpression="include[command-parameters-format.envar]" />
            </div>
        </div>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/note/command-username-password.flsnp" />
        <h3>Drift report</h3>
        <p>In <MadCap:variable name="General.Liquibase" /> 4.25.1 and later, you can automatically generate a <MadCap:xref href="../../tools-integrations/observability/operation-reports-drift-report.htm">Drift Report</MadCap:xref> using the <code>diff-changelog</code> command. The drift report requires a <a href="../../workflows/liquibase-pro/how-to-apply-your-liquibase-pro-license-key.htm"><MadCap:variable name="General.LBPro" /> license key</a>.</p>
    </body>
</html>
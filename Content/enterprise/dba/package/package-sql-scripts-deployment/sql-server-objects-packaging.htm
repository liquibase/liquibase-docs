<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <meta rel="canonical" href="https://docs.liquibase.com/enterprise/dba/package/package-sql-scripts-deployment/sql-server-objects-packaging.html" />
        <meta name="description" content="Learn about SQL Server database objects and packaging." />
    </head>
    <body>
        <h1>SQL Server Database Objects and Packaging</h1>
        <MadCap:snippetBlock src="../../../../Z_Resources/Snippets/images/icon-enterprise-top.flsnp" />
        <h2>Qualifying Object Names</h2>
        <ul>
            <li>
                <p>Do not qualify objects with the <strong>database name</strong>. Datical takes care of that.</p>
            </li>
            <li>
                <p>For a Single-Schema project, you do not have to qualify object names with the schema name. If not qualified, Datical uses the default schema for the user (dbo is the default).</p>
            </li>
            <li>
                <p>For a Multi-Schema project, you must qualify object names with the schema name so they get deployed to the correct schema during packaging.</p>
            </li>
            <li>
                <p>For a Multi-Database project, you must qualify object names with the schema name so they get deployed to the correct schema during packaging. You typically organized folders by database and schema. You may also use only the database folder level. See <MadCap:xref href="../../planning-projects/release-pipeline-schema/multi-database-projects.htm">Multi-database Projects</MadCap:xref></p>
            </li>
        </ul>
        <h2>SQL Server SCM Packaging Patterns</h2>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">that <MadCap:variable name="General.LBEnterprise" /> packages non-transient files differently from transient files. Place scripts for Oracle objects in packaging folders as follows.</p>
        <ul>
            <li>
                <p>Non-transient - In-place editing, packaging and no-archiving of database changes so they can be managed similar to application code. This applies to the following object types:</p>
                <ul>
                    <li>
                        <p>Procedures (when scripts are placed in the <span class="HTMLCode_1">procedure folder)</p>
                    </li>
                    <li>
                        <p>Functions&#160;(when scripts are placed in the <span class="HTMLCode_1">function folder)</p>
                    </li>
                    <li>
                        <p>Views&#160;(when scripts are placed in the <span class="HTMLCode_1">view folder)</p>
                    </li>
                    <li>
                        <p>Triggers&#160;(when scripts are placed in the <span class="HTMLCode_1">trigger folder)</p>
                    </li>
                </ul>
            </li>
            <li>
                <p>Transient - Database changes are archived after packaging (all other folders).</p>
            </li>
        </ul>
        <h2>Objects and Packaging Folders</h2>
        <p>Use the specified folder for listed SQL Server database operations.</p>
        <table>
            <tbody>
                <tr>
                    <td>
                        <p><strong>Operation and Object Type</strong>
                        </p>
                    </td>
                    <td>
                        <p>Packaging Folders (fixed folders)</p>
                    </td>
                    <td>
                        <p>Package Methods (flexible folders)</p>
                    </td>
                    <td>
                        <p>Archived</p>
                    </td>
                    <td>
                        <p>Notes</p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>DATABASE LINK</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">sql_direct
                        </p>
                    </td>
                    <td>
                        <p>direct</p>
                    </td>
                    <td>
                        <p>Yes</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>FUNCTION</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">function
                        </p>
                    </td>
                    <td>
                        <p>storedlogic</p>
                    </td>
                    <td>
                        <p>No</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>INDEX</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">ddl,&#160;ddl_direct,&#160;sql_direct
                        </p>
                    </td>
                    <td>
                        <p>convert, ddl_direct, direct</p>
                    </td>
                    <td>
                        <p>Yes</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>PROCEDURE</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">procedure
                        </p>
                    </td>
                    <td>
                        <p>storedlogic</p>
                    </td>
                    <td>
                        <p>No</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>QUEUE</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">sql_direct
                        </p>
                    </td>
                    <td>
                        <p>direct</p>
                    </td>
                    <td>
                        <p>Yes</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>SEQUENCE</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">ddl,&#160;ddl_direct,&#160;sql_direct
                        </p>
                    </td>
                    <td>
                        <p>convert, ddl_direct, direct</p>
                    </td>
                    <td>
                        <p>Yes</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>SYNONYM</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">ddl,&#160;ddl_direct,&#160;sql_direct
                        </p>
                    </td>
                    <td>
                        <p>convert, ddl_direct, direct</p>
                    </td>
                    <td>
                        <p>Yes</p>
                    </td>
                    <td>
                        <p>For ALTER and CREATE OR REPLACE synonym use ddl_direct or sql_direct/direct. (Do not use ddl/convert with ALTER and CREATE OR REPLACE synonym.)</p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>TABLE</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">ddl,&#160;ddl_direct,&#160;sql_direct
                        </p>
                    </td>
                    <td>
                        <p>convert, ddl_direct, direct</p>
                    </td>
                    <td>
                        <p>Yes</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>TRIGGER</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">trigger
                        </p>
                    </td>
                    <td>
                        <p>storedlogic</p>
                    </td>
                    <td>
                        <p>No</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>TYPE</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">sql_direct
                        </p>
                    </td>
                    <td>
                        <p>direct</p>
                    </td>
                    <td>
                        <p>Yes</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>VIEW</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">view
                        </p>
                    </td>
                    <td>
                        <p>storedlogic</p>
                    </td>
                    <td>
                        <p>No</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>CREATE/ALTER/DROP <strong>VIEW INDEX</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">ddl,&#160;ddl_direct,&#160;sql_direct
                        </p>
                    </td>
                    <td>
                        <p>convert, ddl_direct, direct</p>
                    </td>
                    <td>
                        <p>Yes</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>RENAME<strong>&#160;&lt;DB_OBJECT&gt;</strong></p>
                    </td>
                    <td>
                        <p><span class="HTMLCode_1">sql_direct
                        </p>
                    </td>
                    <td>
                        <p>direct</p>
                    </td>
                    <td>
                        <p>Yes</p>
                    </td>
                    <td>
                        <p>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <table>
            <tr>
                <td>
                    <p>Operation</p>
                </td>
                <td>
                    <p>Packaging Folder (fixed folders)</p>
                </td>
                <td>
                    <p>Package Method (flexible folders)</p>
                </td>
                <td>
                    <p>Archived</p>
                </td>
            </tr>
            <tr>
                <td>
                    <p>INSERT, UPDATE, DELETE, SELECT</p>
                </td>
                <td>
                    <p>data_dml</p>
                </td>
                <td>
                    <p>data_dml</p>
                </td>
                <td>
                    <p>Yes</p>
                </td>
            </tr>
            <tr>
                <td>
                    <p>GRANT, REVOKE</p>
                </td>
                <td>
                    <p>sql_direct</p>
                </td>
                <td>
                    <p>direct</p>
                </td>
                <td>
                    <p>Yes</p>
                </td>
            </tr>
        </table>
        <h2>Error Handling</h2>
        <p>Do not put error-handling statements in the SQL scripts.</p>
        <p>For SQL Server databases, do not include <code>IF EXISTS</code> statements with an object definition.</p>
        <p><MadCap:variable name="General.LBEnterprise" /> has its own error-handling that wraps SQL scripts. Specifying error-handling within the statements is not necessary.</p>
        <p>Deployment Packager fails with an error if it encounters statements before an object definition.</p>
        <p>See also these pages for overview of packaging workflows, guidelines for writing scripts, and which packaging methods or folders to use for which types of changes:</p>
        <p><a href="overview-packaging/home.htm">Overview of Packaging</a>
        </p>
        <p>
            <MadCap:xref href="../../../developer/write-sql-scripts/home.htm">Writing SQL Scripts for [%=General.LBEnterprise%]</MadCap:xref>
        </p>
        <p><a href="place-files-scm-repo/fixed-folder-names.htm">Fixed Folder Names</a>
        </p>
        <p><a href="place-files-scm-repo/flexible-folder-names.htm">Flexible Folder Names</a>
        </p>
    </body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title><MadCap:variable name="Heading.Level1" /> | Enterprise Docs</title>
        <link rel="canonical" href="https://docs.liquibase.com/enterprise/developer/define-release-pipeline/initialize-database-project/baseline-initial-project/review-baseline.html" />
        <meta name="description" content="If you have an existing application database schema that you want Liquibase Enterprise to manage, the following outlines the process to implement Enterprise." />
    </head>
    <body>
        <h1>Review Baseline <MadCap:snippetText src="../../../../../Z_Resources/Snippets/images/icon-enterprise-top.flsnp" /></h1>
        <p>Once the project baseline is complete, you need to review the results. It's normal to find inconsistencies among databases the first time you execute the baseline. This is your opportunity to figure out what needs to be addressed and get the databases cleaned up. Once you have them all cleaned up, you will need to re-run the baseline on the updated databases.</p>
        <h2>What to Expect After Running the Baseline Script</h2>
        <p>The baseline script will generate changes between each pair of databases in the pipeline, and it will label these detected differences with:</p>
        <ul>
            <li>Default Label (from connection information)</li>
            <li>DbDef Name</li>
            <li>"needs_review"</li>
        </ul>
        <p>This step often uncover inconsistencies among the databases. It is normal to see objects that are supposed to have been deleted long ago, or objects that were deployed to one environment and not to the others. By running the baseline, you are now seeing things that were previously hidden from your view. Now that you can see them, this is your opportunity to get these inconsistencies cleaned up. After baselining, the DBA needs to review the <strong>needs_review</strong> changes and determine if they are:</p>
        <ol>
            <li>Missing objects in one or more of the databases that actually need to be there</li>
            <li>Extraneous objects in one of the databases that needs to be removed</li>
            <li>Changes to objects that are intended (or not)</li>
            <li>Duplicate changesets (occasionally generated by the baseline)</li>
            <li>Storage option related changes that are captured when managing storage options is not desired <strong><em>(managing storage options in Datical is optional and can be enabled/disabled before running the baseline)</em></strong></li>
        </ol>
        <p>Here are the typical situations you will encounter:</p>
        <ul>
            <li>Changesets are correct – label them so they can be promoted easily</li>
            <li>Changesets were generated from missing objects in one of the earlier DBs that are in a later DB – these need to be added to the earlier DBs (or removed from the later DB)</li>
            <li>Changesets were generated from extra objects in one of the later DBs that are missing from earlier DBs – these need to be removed from the later DBs (or added to the earlier DBs)</li>
            <li>Changesets were generated due to Storage Option differences – either fix the differences in the DBs or ignore these changesets <strong><em>(managing storage options in Datical is optional and can be enabled/disabled before running the baseline)</em></strong></li>
            <li>Changesets were generated that duplicate changesets captured in another pipeline – ignore these changesets</li>
        </ul>
        <p>The 3 types of changes that can get created are drop, modify and create. The following discussion explains what to look for when validating each of these changesets.</p>
        <h2>Reviewing Changesets in <MadCap:variable name="General.LBEnterprise" /></h2>
        <p>For this example project, the Pipeline is: <strong>DEV &gt;&gt; REF &gt;&gt; SIT &gt;&gt; TT &gt;&gt; PROD.</strong> In the screenshot below, we're looking at the differences between <strong>TT</strong> and <strong>PROD</strong>. Any differences will be marked with the <strong>&lt;pipeline label&gt;, TT</strong> and <strong>needs_review</strong>.</p>
        <ol>
            <li>To review the changes, open your project</li>
            <li>Click on the <strong>Design</strong> tab</li>
            <li>Scroll down until you see changesets with the <strong>needs_review</strong> label and visually review the changesets generated for a specific database (in this case, <strong>TT</strong>).<ul><li>Open a changeset to see more details. Click the triangle to the left of it.<br /><img class="confluence-embedded-image" height="250" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_16-57-48.png?version=1&amp;modificationDate=1569858658008&amp;cacheVersion=1&amp;api=v2&amp;width=454&amp;height=250" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_16-57-48.png?version=1&amp;modificationDate=1569858658008&amp;cacheVersion=1&amp;api=v2&amp;width=669&amp;height=368 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_16-57-48.png?version=1&amp;modificationDate=1569858658008&amp;cacheVersion=1&amp;api=v2&amp;width=454&amp;height=250 1x" /></li></ul></li>
            <li>In this example, for each changeset marked as <strong>needs_review</strong> and <strong>TT</strong>, you need to determine the following and take the appropriate action. <em>(The changes marked as TT are the results from the comparison between <strong>TT</strong> and <strong>PROD</strong>)</em></li>
        </ol>
        <p>Review the list of changesets and determine what action to take for each.</p>
        <p>When you see a <strong>CREATE</strong>, it means that this object is in <strong>TT</strong> but is missing from <strong>PROD</strong></p>
        <ul>
            <li>If the object is missing from <strong>PROD</strong> because it hasn't been deployed there <em>but should be</em>, then <strong>remove the needs_review label</strong>. The Create is ready to deploy to <strong>PROD</strong> when needed.</li>
            <li>If the object is missing from <strong>PROD</strong> because it is an old object that was supposed to have been dropped from <strong>TT</strong> in the past but got missed, then:</li>
        </ul>
        <ol>
            <li><strong>EITHER THIS</strong>: Remove the object and rebaseline.<ol><li>Remove the object from the <strong>TT</strong> database</li><li>Re-baseline after reviewing the rest of the <strong>needs_review</strong> changes in the changelog</li></ol></li>
            <li><strong>OR THIS</strong>: Update the label so the changeset will be IGNORED and not deployable in the any of the pipelines.<ol><li>Remove the <strong>needs_review</strong> and <strong>&lt;pipeline_label&gt;</strong> labels</li><li>Add a label called <strong>ignore</strong></li></ol></li>
        </ol>
        <p>When you see a <strong>DROP</strong>, it means that this object is in <strong>PROD</strong> but is missing from <strong>TT</strong></p>
        <ul>
            <li>If the object is missing from <strong>TT</strong> because the object is no longer needed by the application, then <strong>remove the needs_review label</strong>. The Drop is ready to deploy to <strong>PROD</strong> when needed.</li>
            <li>If the object is missing from <strong>TT</strong> because it was deployed in <strong>PROD</strong> but never got deployed back to earlier environments, then</li>
        </ul>
        <ol>
            <li><strong>EITHER THIS</strong>: Add the object and rebaseline.<ol><li>Add the object to the <strong>TT</strong> database</li><li>Re-baseline after reviewing the rest of the <strong>needs_review</strong> changes in the changelog</li></ol></li>
            <li><strong>OR THIS</strong>: Update the label so the changeset will be IGNORED and not deployable in the any of the pipelines.<ol><li>Remove the <strong>needs_review</strong> and <strong>&lt;pipeline_label&gt;</strong> labels</li><li>Add a label called <strong>ignore</strong></li></ol></li>
        </ol>
        <p>When you see a <strong>MODIFY</strong>, it means that this object is in both <strong>TT</strong> and <strong>PROD</strong>, but it has changed.</p>
        <ul>
            <li>If the change is expected, then <strong>remove the needs_review label</strong>. The Modify is ready to deploy to <strong>PROD</strong> when needed.</li>
            <li>If the change is unexpected, then</li>
        </ul>
        <ol>
            <li><strong>EITHER THIS</strong>: Correct the object and rebaseline.<ol><li>Correct the object in the <strong>TT</strong> database</li><li>Re-baseline after reviewing the rest of the <strong>needs_review</strong> changes in the changelog</li></ol></li>
            <li><strong>OR THIS</strong>: Update the label so the changeset will be IGNORED and not deployable in the any of the pipelines.<ol><li>Remove the <strong>needs_review</strong> and <strong>&lt;pipeline_label&gt;</strong> labels</li><li>Add a label called <strong>ignore</strong></li></ol></li>
        </ol>
        <h2>Re-Baseline, if Database Changes Were Made</h2>
        <p>If you made any changes to any of the databases during the review stage, re-run the baseline step, delete the current project and re-import the re-baselined project into Datical so it can be re-reviewed.</p>
        <h2>How to Remove Labels</h2>
        <p>As part of the process above, you will need to modify the labels as you process the changesets. Below is an example of removing the <strong>needs_review</strong> label from a group of changesets.</p>
        <ol>
            <li>Click the link under the Production Database's Database Icon <em>(in this case it says Partially Deployed)<br /><br /></em><img class="confluence-embedded-image" height="250" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_17-8-2.png?version=1&amp;modificationDate=1569858658713&amp;cacheVersion=1&amp;api=v2&amp;width=307&amp;height=250" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_17-8-2.png?version=1&amp;modificationDate=1569858658713&amp;cacheVersion=1&amp;api=v2&amp;width=341&amp;height=277 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_17-8-2.png?version=1&amp;modificationDate=1569858658713&amp;cacheVersion=1&amp;api=v2&amp;width=307&amp;height=250 1x" /></li>
            <li>Scroll down until you see changesets with <strong>needs_review</strong> as part of their label<br /><br /><img class="confluence-embedded-image" height="428" width="612" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/worddav4268f7477fc5748a72f7bd9bf65d5bc7.png?version=1&amp;modificationDate=1569858658187&amp;cacheVersion=1&amp;api=v2&amp;width=612&amp;height=427" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/worddav4268f7477fc5748a72f7bd9bf65d5bc7.png?version=1&amp;modificationDate=1569858658187&amp;cacheVersion=1&amp;api=v2&amp;width=847&amp;height=592 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/worddav4268f7477fc5748a72f7bd9bf65d5bc7.png?version=1&amp;modificationDate=1569858658187&amp;cacheVersion=1&amp;api=v2&amp;width=612&amp;height=427 1x" /></li>
            <li>Select the desired changesets by <strong>checking each checkbox</strong> next to the appropriate changesets and click the <strong>Remove Labels</strong> button.<br /><br /><img class="confluence-embedded-image" height="414" width="603" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/worddavf7f490589acf45ad37c6344980fcd00c.png?version=1&amp;modificationDate=1569858657665&amp;cacheVersion=1&amp;api=v2&amp;width=603&amp;height=413" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/worddavf7f490589acf45ad37c6344980fcd00c.png?version=1&amp;modificationDate=1569858657665&amp;cacheVersion=1&amp;api=v2&amp;width=878&amp;height=602 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/worddavf7f490589acf45ad37c6344980fcd00c.png?version=1&amp;modificationDate=1569858657665&amp;cacheVersion=1&amp;api=v2&amp;width=603&amp;height=413 1x" /></li>
            <li>Double-click the <strong>needs_review</strong> label in the left column (it will move to the right) and click <strong>Next</strong>.<strong><br /><br /></strong><img class="confluence-embedded-image" height="250" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_17-9-4.png?version=1&amp;modificationDate=1569858658533&amp;cacheVersion=1&amp;api=v2&amp;width=455&amp;height=250" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_17-9-4.png?version=1&amp;modificationDate=1569858658533&amp;cacheVersion=1&amp;api=v2&amp;width=621&amp;height=341 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_17-9-4.png?version=1&amp;modificationDate=1569858658533&amp;cacheVersion=1&amp;api=v2&amp;width=455&amp;height=250 1x" /></li>
            <li>Review the changes and click <strong>Finish<br /><br /><img class="confluence-embedded-image" height="250" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_17-9-47.png?version=1&amp;modificationDate=1569858658363&amp;cacheVersion=1&amp;api=v2&amp;width=455&amp;height=250" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_17-9-47.png?version=1&amp;modificationDate=1569858658363&amp;cacheVersion=1&amp;api=v2&amp;width=625&amp;height=343 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/image2017-9-13_17-9-47.png?version=1&amp;modificationDate=1569858658363&amp;cacheVersion=1&amp;api=v2&amp;width=455&amp;height=250 1x" /><br /><br /></strong></li>
            <li>The <strong>needs_review</strong> label has been removed from the selected changesets<br /><br /><img class="confluence-embedded-image" height="407" width="622" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/worddavea4149f4e177da05890feb2956c798ea.png?version=1&amp;modificationDate=1569858657838&amp;cacheVersion=1&amp;api=v2&amp;width=622&amp;height=407" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/worddavea4149f4e177da05890feb2956c798ea.png?version=1&amp;modificationDate=1569858657838&amp;cacheVersion=1&amp;api=v2&amp;width=900&amp;height=589 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896569807/worddavea4149f4e177da05890feb2956c798ea.png?version=1&amp;modificationDate=1569858657838&amp;cacheVersion=1&amp;api=v2&amp;width=622&amp;height=407 1x" /></li>
        </ol>
        <p>The changes are now available to propagate through the pipeline.</p>
    </body>
</html>